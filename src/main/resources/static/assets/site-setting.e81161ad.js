import{a as C,b as h,h as i,az as w,$ as z,r as y,w as N,u as e,Q as E,e as o,k as U,J as m}from"./index.552205f5.js";import{aO as F,x as D,aP as L,r as $}from"./base.d698891e.js";/* empty css                */import{Z as q,a as R}from"./ZFormItem.7a4b4758.js";/* empty css               *//* empty css              */import{l as T,u as I}from"./admin-setting.158855e4.js";import{E as M}from"./request.3708b2c4.js";import{b as k}from"./route-block.9b0645f8.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{E as S}from"./index.11692625.js";import{r as A}from"./BadgeCheckIcon.09c2c42b.js";import{E as G}from"./index.4ab44dc8.js";import{v as J}from"./directive.e250a256.js";import"./index.c92ded65.js";import"./index.0f572ca8.js";import"./scroll.cbf731df.js";import"./event.3ec63147.js";import"./focus-trap.58847c97.js";import"./validator.6f3b33db.js";import"./index.1e624cbf.js";import"./event.776e7e11.js";function O(p,u){return C(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[i("path",{"fill-rule":"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])}function P(){const{data:p,loading:u,reload:t}=w(T,{formatResult:_=>_.data}),{loading:f,run:c}=w(I,{manual:!0,onSuccess(){M({message:"\u4FDD\u5B58\u6210\u529F",type:"success"})}});return{data:p,dataLoading:u,reload:t,saveData:()=>{c(p.value)},saveLoading:f}}const Q=m(" \u7AD9\u70B9\u4FE1\u606F "),j=m(" \u8BF7\u586B\u5199\u60A8\u7684\u7AD9\u70B9\u4FE1\u606F "),H=m("\u6B64\u5730\u5740\u7528\u4E8E\u751F\u6210\u76F4\u94FE\u53CA\u672C\u6B21\u5B58\u50A8\u4E0B\u8F7D\u4F7F\u7528\uFF0C\u8BF7\u52A1\u5FC5\u4FDD\u6301\u548C\u670D\u52A1\u7AEF\u5730\u5740\u4E00\u6837."),K=m("\u524D\u540E\u7AEF\u5206\u79BB\u540E\uFF0C\u9700\u914D\u7F6E\u6B64\u5730\u5740\uFF0C\u4F1A\u5F71\u54CD 401\u3001403\u3001404 \u9875\u9762\u7684\u8DF3\u8F6C."),W=m("\u7528\u4E8E\u7BA1\u7406\u5458\u9875\u9762\u53F3\u4E0A\u89D2\u5934\u50CF\u5730\u5740\uFF0C\u63A8\u8350\u5C3A\u5BF8\u4E3A 35 * 35."),X=m("\u4FDD\u5B58\u8BBE\u7F6E"),B={__name:"site-setting",setup(p){let u=z();const{data:t,dataLoading:f,saveData:c,saveLoading:b}=P();let _=y({siteName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7AD9\u70B9\u540D\u79F0"}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u540E\u7AEF\u7AD9\u70B9\u57DF\u540D"},{type:"url",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u57DF\u540D"}],frontDomain:[{type:"url",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u57DF\u540D"}],avatar:[{type:"url",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u5934\u50CF\u5730\u5740\uFF0C\u9700\u4EE5 http \u6216 https \u5F00\u5934"}]});const V=y(),g=()=>{V.value.validate(v=>{v&&c()})};return N(()=>f.value,(v,a)=>{if(a===!0){let n=u.zfileConfig.baseUrl||window.location.origin,l=t.value.domain;if(n!==l)S.confirm(`\u68C0\u6D4B\u5230\u670D\u52A1\u7AEF\u5730\u5740\u4E3A ${n}\uFF0C\u5F53\u524D\u914D\u7F6E\u7AD9\u70B9\u57DF\u540D\u4E3A ${l}\uFF0C\u662F\u5426\u81EA\u52A8\u8FDB\u884C\u4FEE\u6B63\uFF1F\uFF08\u4E0D\u4FEE\u6B63\u53EF\u80FD\u4F1A\u5F71\u54CD\u4E0B\u8F7D\u3001\u6587\u4EF6\u5939\u52A0\u5BC6\u548C\u6587\u6863\u9884\u89C8\u529F\u80FD\uFF09`,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",callback:s=>{s==="confirm"&&(t.value.domain=n,g())}});else{let s=t.value.frontDomain,d=window.location.origin;u.zfileConfig.baseUrl!==""&&s!==d&&S.confirm(`\u68C0\u6D4B\u5230\u5F53\u524D\u4E3A\u524D\u540E\u7AEF\u5206\u79BB\u6A21\u5F0F\uFF0C\u8BBF\u95EE\u57DF\u540D\u4E3A ${d}\uFF0C\u5F53\u524D\u914D\u7F6E\u524D\u7AEF\u7AD9\u70B9\u57DF\u540D\u4E3A ${s}\uFF0C\u662F\u5426\u81EA\u52A8\u8FDB\u884C\u4FEE\u6B63\uFF1F\uFF08\u4E0D\u4FEE\u6B63\u53EF\u80FD\u4F1A\u9632\u76D7\u94FE\u529F\u80FD\uFF09`,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",callback:x=>{x==="confirm"&&(t.value.frontDomain=d,g())}})}}}),(v,a)=>{const n=G,l=q,s=$,d=R,x=J;return e(t)?E((C(),h(d,{key:0,model:e(t),rules:e(_),ref_key:"siteSettingForm",ref:V},{"form-title":o(()=>[Q]),"form-sub-title":o(()=>[j]),footer:o(()=>[i(s,{type:"primary",size:"default",icon:e(A),onClick:g},{default:o(()=>[X]),_:1},8,["icon"])]),default:o(()=>[i(l,{prop:"siteName",label:"\u7AD9\u70B9\u540D\u79F0"},{default:o(()=>[i(n,{id:"siteName","prefix-icon":e(F),modelValue:e(t).siteName,"onUpdate:modelValue":a[0]||(a[0]=r=>e(t).siteName=r)},null,8,["prefix-icon","modelValue"])]),_:1}),i(l,{prop:"domain",label:"\u540E\u7AEF\u7AD9\u70B9\u57DF\u540D"},{tips:o(()=>[H]),default:o(()=>[i(n,{id:"domain","prefix-icon":e(D),modelValue:e(t).domain,"onUpdate:modelValue":a[1]||(a[1]=r=>e(t).domain=r)},null,8,["prefix-icon","modelValue"])]),_:1}),i(l,{prop:"frontDomain",label:"\u524D\u7AEF\u7AD9\u70B9\u57DF\u540D"},{tips:o(()=>[K]),default:o(()=>[i(n,{"prefix-icon":e(D),modelValue:e(t).frontDomain,"onUpdate:modelValue":a[2]||(a[2]=r=>e(t).frontDomain=r)},null,8,["prefix-icon","modelValue"])]),_:1}),i(l,{prop:"avatar",label:"\u5934\u50CF\u5730\u5740"},{tips:o(()=>[W]),default:o(()=>[i(n,{id:"avatar","prefix-icon":e(L),modelValue:e(t).avatar,"onUpdate:modelValue":a[3]||(a[3]=r=>e(t).avatar=r)},null,8,["prefix-icon","modelValue"])]),_:1}),i(l,{label:"\u5907\u6848\u53F7"},{default:o(()=>[i(n,{id:"icp","prefix-icon":e(O),modelValue:e(t).icp,"onUpdate:modelValue":a[4]||(a[4]=r=>e(t).icp=r)},null,8,["prefix-icon","modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[x,e(b)]]):U("",!0)}}};typeof k=="function"&&k(B);var we=Z(B,[["__scopeId","data-v-9690cabc"]]);export{we as default};
