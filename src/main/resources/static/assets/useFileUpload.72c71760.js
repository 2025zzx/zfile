import{u as Gn,d as Yn,e as q,f as Zn,g as Qn,E as H,h as Dt,i as Xn,j as $t}from"./request.e2daed10.js";import{d as kn,r as M,c as L,o as xn,ae as jt,a as D,b as Me,e as et,Q as Be,R as Oe,p as R,n as ge,q as Jn,k as te,t as Ut,i as Ie,g as ea,f as j,F as ta,j as tt,h as An,T as En,Y as At,m as na,ao as Nt,ap as Tn,M as Ue,w as $e,W as we,ad as Et,U as aa,V as oa,aq as ra,u as le,S as la,ar as ia,Z as at,a3 as sa,a4 as ca,$ as Bt,as as ua,at as pe}from"./index.43b3cbf5.js";import{c as se}from"./common.72335e7c.js";import{E as ne}from"./index.439070da.js";import{b as da,d as Ve,E as fa,a8 as ga,u as pa,a7 as Vt,_ as ha,R as ma,I as dt,B as va,H as ba,F as Kt,a9 as ya}from"./base.4ef7f45b.js";import{E as wa}from"./index.e7e80979.js";const Ln=["success","info","warning","error"],Sa=da({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Ve([String,Object]),default:""},id:{type:String,default:""},message:{type:Ve([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Ve(Function),default:()=>{}},onClose:{type:Ve(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...Ln,""],default:""},zIndex:{type:Number,default:0}}),Ca={destroy:()=>!0},ka=kn({name:"ElNotification",components:{ElIcon:fa,...ga},props:Sa,emits:Ca,setup(e){const t=pa("notification"),n=M(!1);let a;const r=L(()=>{const f=e.type;return f&&Vt[e.type]?t.m(f):""}),s=L(()=>Vt[e.type]||e.icon||""),o=L(()=>e.position.endsWith("right")?"right":"left"),l=L(()=>e.position.startsWith("top")?"top":"bottom"),i=L(()=>({[l.value]:`${e.offset}px`,zIndex:e.zIndex}));function d(){e.duration>0&&({stop:a}=ma(()=>{n.value&&c()},e.duration))}function g(){a==null||a()}function c(){n.value=!1}function p({code:f}){f===dt.delete||f===dt.backspace?g():f===dt.esc?n.value&&c():d()}return xn(()=>{d(),n.value=!0}),Gn(document,"keydown",p),{ns:t,horizontalClass:o,typeClass:r,iconComponent:s,positionStyle:i,visible:n,close:c,clearTimer:g,startTimer:d}}}),xa=["id"],Aa=["textContent"],Ea={key:0},Ta=["innerHTML"];function La(e,t,n,a,r,s){const o=jt("el-icon"),l=jt("close");return D(),Me(En,{name:e.ns.b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[3]||(t[3]=i=>e.$emit("destroy")),persisted:""},{default:et(()=>[Be(R("div",{id:e.id,class:ge([e.ns.b(),e.customClass,e.horizontalClass]),style:Ie(e.positionStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...i)=>e.clearTimer&&e.clearTimer(...i)),onMouseleave:t[1]||(t[1]=(...i)=>e.startTimer&&e.startTimer(...i)),onClick:t[2]||(t[2]=(...i)=>e.onClick&&e.onClick(...i))},[e.iconComponent?(D(),Me(o,{key:0,class:ge([e.ns.e("icon"),e.typeClass])},{default:et(()=>[(D(),Me(Jn(e.iconComponent)))]),_:1},8,["class"])):te("v-if",!0),R("div",{class:ge(e.ns.e("group"))},[R("h2",{class:ge(e.ns.e("title")),textContent:Ut(e.title)},null,10,Aa),Be(R("div",{class:ge(e.ns.e("content")),style:Ie(e.title?void 0:{margin:0})},[ea(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(D(),j(ta,{key:1},[te(" Caution here, message could've been compromized, nerver use user's input as message "),te(" eslint-disable-next-line "),R("p",{innerHTML:e.message},null,8,Ta)],2112)):(D(),j("p",Ea,Ut(e.message),1))])],6),[[Oe,e.message]]),e.showClose?(D(),Me(o,{key:0,class:ge(e.ns.e("closeBtn")),onClick:tt(e.close,["stop"])},{default:et(()=>[An(l)]),_:1},8,["class","onClick"])):te("v-if",!0)],2)],46,xa),[[Oe,e.visible]])]),_:3},8,["name","onBeforeLeave"])}var Pa=ha(ka,[["render",La],["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const ot={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},Tt=16;let Fa=1;const Se=function(e={},t=null){if(!va)return{close:()=>{}};(typeof e=="string"||At(e))&&(e={message:e});const n=e.position||"top-right";let a=e.offset||0;ot[n].forEach(({vm:c})=>{var p;a+=(((p=c.el)==null?void 0:p.offsetHeight)||0)+Tt}),a+=Tt;const{nextZIndex:r}=ba(),s=`notification_${Fa++}`,o=e.onClose,l={zIndex:r(),offset:a,...e,id:s,onClose:()=>{Ma(s,n,o)}};let i=document.body;Kt(e.appendTo)?i=e.appendTo:na(e.appendTo)&&(i=document.querySelector(e.appendTo)),Kt(i)||(i=document.body);const d=document.createElement("div"),g=An(Pa,l,At(l.message)?{default:()=>l.message}:null);return g.appContext=t!=null?t:Se._context,g.props.onDestroy=()=>{Nt(null,d)},Nt(g,d),ot[n].push({vm:g}),i.appendChild(d.firstElementChild),{close:()=>{g.component.proxy.visible=!1}}};Ln.forEach(e=>{Se[e]=(t={})=>((typeof t=="string"||At(t))&&(t={message:t}),Se({...t,type:e}))});function Ma(e,t,n){const a=ot[t],r=a.findIndex(({vm:d})=>{var g;return((g=d.component)==null?void 0:g.props.id)===e});if(r===-1)return;const{vm:s}=a[r];if(!s)return;n==null||n(s);const o=s.el.offsetHeight,l=t.split("-")[0];a.splice(r,1);const i=a.length;if(!(i<1))for(let d=r;d<i;d++){const{el:g,component:c}=a[d].vm,p=Number.parseInt(g.style[l],10)-o-Tt;c.props.offset=p}}function za(){for(const e of Object.values(ot))e.forEach(({vm:t})=>{t.component.proxy.visible=!1})}Se.closeAll=za;Se._context=null;const Ra=ya(Se,"$notify"),{width:qt,height:Da}=Yn();function Ba(){const e=L(()=>qt.value<768),t=L(()=>qt.value>=768),n=o=>{if(a(o))return"";let l="",i=-1;for(let d=0;d<o.length;d++){const g=o.charAt(d);if(g==="/"){if(i<d){let c=o.substring(i+1,d);l+=encodeURIComponent(c),i=d}l+=g}if(d===o.length-1&&i<d){let c=o.substring(i+1,d+1);l+=encodeURIComponent(c)}}return l},a=o=>o==null||o==="";return{isMobile:e,isNotMobile:t,height:Da,encodeAllIgnoreSlashes:n,strIsEmpty:a,strIsNotEmpty:o=>!a(o),removeDuplicateSeparator:o=>{let l="";o.indexOf("http://")===0?l="http://":o.indexOf("https://")===0&&(l="https://");for(let i=l.length;i<o.length-1;i++){let d=o.charAt(i),g=o.charAt(i+1);d==="/"&&g==="/"||(l+=d)}return l+=o.charAt(o.length-1),l}}}const J=M([]);let Pn=null,Ke=L(()=>Pn.proxy.$refs.fileTableRef);function st(e){e&&(Pn=e);const t=()=>{Ke.value.clearSelection()},n=(c,p)=>{(c==null?void 0:c.type)!=="BACK"&&Ke.value.toggleRowSelection(c,p)},a=()=>{Ke.value.toggleAllSelection()},r=c=>c.type==="FILE"||c.type==="FOLDER",s=L(()=>J.value.length>0?J.value[J.value.length-1]:null),o=L(()=>J.value.filter(c=>c.type==="FILE")),l=L(()=>J.value.filter(c=>c.type==="FOLDER")),i=c=>{J.value=c},d=({row:c,rowIndex:p})=>(c.index=p,J.value.indexOf(c)!==-1?"select-row":""),g=L(()=>{let c=J.value.length,p=o.value.length,f=l.value.length,m=c===1,w=c>1;return{isSingleSelect:m,isMultiSelect:w,isAllFile:p===c,isAllFolder:f===c}});return{checkSelectable:r,tableRowClassName:d,selectRowsChange:i,selectRow:s,selectRows:J,selectFiles:o,selectFolders:l,selectStatistics:g,tableRef:Ke,clearSelection:t,toggleRowSelection:n,toggleAllSelection:a}}let{selectStatistics:ue}=st();const Ne=Tn("storageConfigStore",{state:()=>({globalConfig:{siteName:"",directLinkPrefix:"",infoEnable:!1,showLinkBtn:!1,recordDownloadLog:!1,showShortLink:!1,showPathLink:!1,tableSize:"small",rootShowStorage:!0,fileClickMode:"dbclick",showDocument:!1,debugMode:!1,domain:"",icp:"",avatar:"",announcement:"",layout:"full",showAnnouncement:!1,searchEnable:!1,showLogin:!1},folderConfig:{readmeText:null,readmeDisplayMode:null,defaultSwitchToImgMode:!1,enableFileOperator:!1}}),getters:{permission:e=>({open:ue.value.isSingleSelect&&ue.value.isAllFolder,preview:ue.value.isAllFile&&ue.value.isSingleSelect,download:ue.value.isAllFile,link:ue.value.isAllFile&&e.globalConfig.showLinkBtn&&(e.globalConfig.showShortLink||e.globalConfig.showPathLink),rename:e.folderConfig.enableFileOperator&&ue.value.isSingleSelect,delete:e.folderConfig.enableFileOperator,newFolder:e.folderConfig.enableFileOperator,upload:e.folderConfig.enableFileOperator,pathLink:e.globalConfig.showPathLink,shortLink:e.globalConfig.showShortLink})},actions:{updateGlobalConfig(e){this.globalConfig=e},updateFolderConfig(e){this.folderConfig=e}}}),Cr=e=>q({url:"/api/site/reset-password",method:"get",data:e}),Oa=e=>q({url:"/api/storage/list",method:"get",data:e}),Ce=Tn("fileDataStore",{state:()=>({currentClickRow:{},currentRightClickRow:{},currentStorageSource:{id:null,type:{description:"",key:""}},imgMode:!1,newImgMode:!1,oldStorageKey:null,searchParam:"",fileListSource:[],audioArray:[],audioIndex:0}),getters:{filterFileByType:e=>t=>e.fileListSource.filter(function(n){if(n.type==="BACK")return!1;let a=n.name,r=a.substr(a.lastIndexOf(".")+1).toLowerCase();return se.constant.fileTypeMap[t].indexOf(r)!==-1}),fileList:e=>{let t=e.fileListSource;return t.forEach(n=>{if(n.icon||(n.icon=se.getFileIconName(n)),n.preview!==null){var a=se.getFileType(n.name);a?(n.fileType=a,n.preview=se.constant.previewFileType.indexOf(a)!==-1):n.preview=!1}}),t}},actions:{updateCurrentStorageSource(e){this.currentStorageSource=e},updateAudioIndex(e){this.audioIndex=e},updateAudioList(e){this.audioArray=e},updateCurrentClickRow(e){this.currentClickRow=e},updateCurrentRightClickRow(e){this.currentRightClickRow=e},updateFileList(e){this.fileListSource=e},updateOldStorageKey(e){this.oldStorageKey=e}}});let Ht=Ce(),Wt=Ne(),{routerRef:ft,fullpath:Ia,storageKey:qe}=Ue(),ae=M([]),xe=M(),Gt=!1;function _a(){let e=Wt.globalConfig.rootShowStorage,t=()=>new Promise(l=>{Oa().then(i=>{if(ae.value=i.data,ae.value.length===0){ne.confirm("\u5F53\u524D\u65E0\u53EF\u7528\u5B58\u50A8\u6E90\uFF0C\u662F\u5426\u8DF3\u8F6C\u81F3\u7BA1\u7406\u5458\u9875\u9762\u6DFB\u52A0\u5B58\u50A8\u6E90\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"info",callback:d=>{d==="confirm"&&ft.value.push("/login")}});return}n(e),l(i)})});const n=l=>{qe.value?o(qe.value)?xe.value=qe.value:s():l?(Ht.updateFileList(a.value),document.title=Wt.globalConfig.siteName+" | \u9996\u9875"):s(),r()},a=L(()=>{let l=[];return ae.value.forEach(i=>{l.push({name:i.name,path:i.key,size:0,time:"-",type:"ROOT"})}),l}),r=()=>{ae.value.some(l=>{l.key===xe.value&&Ht.updateCurrentStorageSource(l)})};Gt||($e(()=>xe.value,(l,i)=>{(l&&!Ia.value||i!==void 0)&&(ft.value.push("/"+l),r())}),$e(()=>qe.value,l=>{n(!0)}),Gt=!0);const s=()=>{if(ae.value.length>0){let l=ae.value[0].key;xe.value=l,ft.value.push("/"+l)}},o=l=>ae.value.find(i=>{if(i.key==l)return i});return{loadStorageSourceList:t,storageList:ae,findStorageByKey:o,currentStorageKey:xe,storageListAsFileList:a}}var je={};Object.defineProperty(je,"__esModule",{value:!0});var rt=je.removeDuplicateSlashes=je.transform=void 0;const $a=/(?!^)\/{2,}/g;function ja(e){return e.map(t=>Fn(t))}je.transform=ja;function Fn(e){return e.replace($a,"/")}rt=je.removeDuplicateSlashes=Fn;const Ua=e=>q({url:"/api/file/operator/mkdir",method:"post",data:e}),Na=e=>q({url:"/api/file/operator/delete/file",method:"post",data:e}),Va=e=>q({url:"/api/file/operator/delete/folder",method:"post",data:e}),Ka=e=>q({url:"/api/file/operator/rename/file",method:"post",data:e}),qa=e=>q({url:"/api/file/operator/rename/folder",method:"post",data:e}),Ha=e=>q({url:"/api/file/operator/upload/file",method:"post",data:e});function Y(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Yt(e,t){for(var n="",a=0,r=-1,s=0,o,l=0;l<=e.length;++l){if(l<e.length)o=e.charCodeAt(l);else{if(o===47)break;o=47}if(o===47){if(!(r===l-1||s===1))if(r!==l-1&&s===2){if(n.length<2||a!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var i=n.lastIndexOf("/");if(i!==n.length-1){i===-1?(n="",a=0):(n=n.slice(0,i),a=n.length-1-n.lastIndexOf("/")),r=l,s=0;continue}}else if(n.length===2||n.length===1){n="",a=0,r=l,s=0;continue}}t&&(n.length>0?n+="/..":n="..",a=2)}else n.length>0?n+="/"+e.slice(r+1,l):n=e.slice(r+1,l),a=l-r-1;r=l,s=0}else o===46&&s!==-1?++s:s=-1}return n}function Wa(e,t){var n=t.dir||t.root,a=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+a:n+e+a:a}var ye={resolve:function(){for(var t="",n=!1,a,r=arguments.length-1;r>=-1&&!n;r--){var s;r>=0?s=arguments[r]:(a===void 0&&(a=process.cwd()),s=a),Y(s),s.length!==0&&(t=s+"/"+t,n=s.charCodeAt(0)===47)}return t=Yt(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(Y(t),t.length===0)return".";var n=t.charCodeAt(0)===47,a=t.charCodeAt(t.length-1)===47;return t=Yt(t,!n),t.length===0&&!n&&(t="."),t.length>0&&a&&(t+="/"),n?"/"+t:t},isAbsolute:function(t){return Y(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,n=0;n<arguments.length;++n){var a=arguments[n];Y(a),a.length>0&&(t===void 0?t=a:t+="/"+a)}return t===void 0?".":ye.normalize(t)},relative:function(t,n){if(Y(t),Y(n),t===n||(t=ye.resolve(t),n=ye.resolve(n),t===n))return"";for(var a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var r=t.length,s=r-a,o=1;o<n.length&&n.charCodeAt(o)===47;++o);for(var l=n.length,i=l-o,d=s<i?s:i,g=-1,c=0;c<=d;++c){if(c===d){if(i>d){if(n.charCodeAt(o+c)===47)return n.slice(o+c+1);if(c===0)return n.slice(o+c)}else s>d&&(t.charCodeAt(a+c)===47?g=c:c===0&&(g=0));break}var p=t.charCodeAt(a+c),f=n.charCodeAt(o+c);if(p!==f)break;p===47&&(g=c)}var m="";for(c=a+g+1;c<=r;++c)(c===r||t.charCodeAt(c)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+n.slice(o+g):(o+=g,n.charCodeAt(o)===47&&++o,n.slice(o))},_makeLong:function(t){return t},dirname:function(t){if(Y(t),t.length===0)return".";for(var n=t.charCodeAt(0),a=n===47,r=-1,s=!0,o=t.length-1;o>=1;--o)if(n=t.charCodeAt(o),n===47){if(!s){r=o;break}}else s=!1;return r===-1?a?"/":".":a&&r===1?"//":t.slice(0,r)},basename:function(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Y(t);var a=0,r=-1,s=!0,o;if(n!==void 0&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var l=n.length-1,i=-1;for(o=t.length-1;o>=0;--o){var d=t.charCodeAt(o);if(d===47){if(!s){a=o+1;break}}else i===-1&&(s=!1,i=o+1),l>=0&&(d===n.charCodeAt(l)?--l===-1&&(r=o):(l=-1,r=i))}return a===r?r=i:r===-1&&(r=t.length),t.slice(a,r)}else{for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===47){if(!s){a=o+1;break}}else r===-1&&(s=!1,r=o+1);return r===-1?"":t.slice(a,r)}},extname:function(t){Y(t);for(var n=-1,a=0,r=-1,s=!0,o=0,l=t.length-1;l>=0;--l){var i=t.charCodeAt(l);if(i===47){if(!s){a=l+1;break}continue}r===-1&&(s=!1,r=l+1),i===46?n===-1?n=l:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||r===-1||o===0||o===1&&n===r-1&&n===a+1?"":t.slice(n,r)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return Wa("/",t)},parse:function(t){Y(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var a=t.charCodeAt(0),r=a===47,s;r?(n.root="/",s=1):s=0;for(var o=-1,l=0,i=-1,d=!0,g=t.length-1,c=0;g>=s;--g){if(a=t.charCodeAt(g),a===47){if(!d){l=g+1;break}continue}i===-1&&(d=!1,i=g+1),a===46?o===-1?o=g:c!==1&&(c=1):o!==-1&&(c=-1)}return o===-1||i===-1||c===0||c===1&&o===i-1&&o===l+1?i!==-1&&(l===0&&r?n.base=n.name=t.slice(1,i):n.base=n.name=t.slice(l,i)):(l===0&&r?(n.name=t.slice(1,o),n.base=t.slice(1,i)):(n.name=t.slice(l,o),n.base=t.slice(l,i)),n.ext=t.slice(o,i)),l>0?n.dir=t.slice(0,l-1):r&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};ye.posix=ye;var He=ye;const Ga=e=>q({url:"/api/storage/files",method:"post",data:e,config:{showDefaultMsg:!1}}),kr=e=>q({url:"/api/storage/file/item",method:"post",data:e,config:{responseIntercept:!1,showDefaultMsg:!1}}),xr=()=>q({url:"/api/site/config/global",method:"get"}),Ya=e=>q({url:"/api/site/config/storage",method:"post",data:e}),Ar=e=>q({url:"/api/short-link",method:"get",data:e}),Za=typeof process=="object"&&process&&process.platform==="win32";var Qa=Za?{sep:"\\"}:{sep:"/"},Xa=Mn;function Mn(e,t,n){e instanceof RegExp&&(e=Zt(e,n)),t instanceof RegExp&&(t=Zt(t,n));var a=zn(e,t,n);return a&&{start:a[0],end:a[1],pre:n.slice(0,a[0]),body:n.slice(a[0]+e.length,a[1]),post:n.slice(a[1]+t.length)}}function Zt(e,t){var n=t.match(e);return n?n[0]:null}Mn.range=zn;function zn(e,t,n){var a,r,s,o,l,i=n.indexOf(e),d=n.indexOf(t,i+1),g=i;if(i>=0&&d>0){if(e===t)return[i,d];for(a=[],s=n.length;g>=0&&!l;)g==i?(a.push(g),i=n.indexOf(e,g+1)):a.length==1?l=[a.pop(),d]:(r=a.pop(),r<s&&(s=r,o=d),d=n.indexOf(t,g+1)),g=i<d&&i>=0?i:d;a.length&&(l=[s,o])}return l}var Rn=Xa,Ja=no,Dn="\0SLASH"+Math.random()+"\0",Bn="\0OPEN"+Math.random()+"\0",Ot="\0CLOSE"+Math.random()+"\0",On="\0COMMA"+Math.random()+"\0",In="\0PERIOD"+Math.random()+"\0";function gt(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function eo(e){return e.split("\\\\").join(Dn).split("\\{").join(Bn).split("\\}").join(Ot).split("\\,").join(On).split("\\.").join(In)}function to(e){return e.split(Dn).join("\\").split(Bn).join("{").split(Ot).join("}").split(On).join(",").split(In).join(".")}function _n(e){if(!e)return[""];var t=[],n=Rn("{","}",e);if(!n)return e.split(",");var a=n.pre,r=n.body,s=n.post,o=a.split(",");o[o.length-1]+="{"+r+"}";var l=_n(s);return s.length&&(o[o.length-1]+=l.shift(),o.push.apply(o,l)),t.push.apply(t,o),t}function no(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),ze(eo(e),!0).map(to)):[]}function ao(e){return"{"+e+"}"}function oo(e){return/^-?0\d/.test(e)}function ro(e,t){return e<=t}function lo(e,t){return e>=t}function ze(e,t){var n=[],a=Rn("{","}",e);if(!a)return[e];var r=a.pre,s=a.post.length?ze(a.post,!1):[""];if(/\$$/.test(a.pre))for(var o=0;o<s.length;o++){var l=r+"{"+a.body+"}"+s[o];n.push(l)}else{var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(a.body),d=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(a.body),g=i||d,c=a.body.indexOf(",")>=0;if(!g&&!c)return a.post.match(/,.*\}/)?(e=a.pre+"{"+a.body+Ot+a.post,ze(e)):[e];var p;if(g)p=a.body.split(/\.\./);else if(p=_n(a.body),p.length===1&&(p=ze(p[0],!1).map(ao),p.length===1))return s.map(function(x){return a.pre+p[0]+x});var f;if(g){var m=gt(p[0]),w=gt(p[1]),E=Math.max(p[0].length,p[1].length),P=p.length==3?Math.abs(gt(p[2])):1,$=ro,k=w<m;k&&(P*=-1,$=lo);var S=p.some(oo);f=[];for(var u=m;$(u,w);u+=P){var h;if(d)h=String.fromCharCode(u),h==="\\"&&(h="");else if(h=String(u),S){var v=E-h.length;if(v>0){var b=new Array(v+1).join("0");u<0?h="-"+b+h.slice(1):h=b+h}}f.push(h)}}else{f=[];for(var C=0;C<p.length;C++)f.push.apply(f,ze(p[C],!1))}for(var C=0;C<f.length;C++)for(var o=0;o<s.length;o++){var l=r+f[C]+s[o];(!t||g||l)&&n.push(l)}}return n}const K=$n=(e,t,n={})=>(lt(t),!n.nocomment&&t.charAt(0)==="#"?!1:new ct(t,n).match(e));var $n=K;const Lt=Qa;K.sep=Lt.sep;const W=Symbol("globstar **");K.GLOBSTAR=W;const io=Ja,Qt={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Pt="[^/]",pt=Pt+"*?",so="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",co="(?:(?!(?:\\/|^)\\.).)*?",jn=e=>e.split("").reduce((t,n)=>(t[n]=!0,t),{}),Xt=jn("().*{}+?[]^$\\!"),uo=jn("[.("),Jt=/\/+/;K.filter=(e,t={})=>(n,a,r)=>K(n,e,t);const oe=(e,t={})=>{const n={};return Object.keys(e).forEach(a=>n[a]=e[a]),Object.keys(t).forEach(a=>n[a]=t[a]),n};K.defaults=e=>{if(!e||typeof e!="object"||!Object.keys(e).length)return K;const t=K,n=(a,r,s)=>t(a,r,oe(e,s));return n.Minimatch=class extends t.Minimatch{constructor(r,s){super(r,oe(e,s))}},n.Minimatch.defaults=a=>t.defaults(oe(e,a)).Minimatch,n.filter=(a,r)=>t.filter(a,oe(e,r)),n.defaults=a=>t.defaults(oe(e,a)),n.makeRe=(a,r)=>t.makeRe(a,oe(e,r)),n.braceExpand=(a,r)=>t.braceExpand(a,oe(e,r)),n.match=(a,r,s)=>t.match(a,r,oe(e,s)),n};K.braceExpand=(e,t)=>Un(e,t);const Un=(e,t={})=>(lt(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:io(e)),fo=1024*64,lt=e=>{if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>fo)throw new TypeError("pattern is too long")},We=Symbol("subparse");K.makeRe=(e,t)=>new ct(e,t||{}).makeRe();K.match=(e,t,n={})=>{const a=new ct(t,n);return e=e.filter(r=>a.match(r)),a.options.nonull&&!e.length&&e.push(t),e};const go=e=>e.replace(/\\(.)/g,"$1"),po=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class ct{constructor(t,n){lt(t),n||(n={}),this.options=n,this.set=[],this.pattern=t,this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.make()}debug(){}make(){const t=this.pattern,n=this.options;if(!n.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();let a=this.globSet=this.braceExpand();n.debug&&(this.debug=(...r)=>console.error(...r)),this.debug(this.pattern,a),a=this.globParts=a.map(r=>r.split(Jt)),this.debug(this.pattern,a),a=a.map((r,s,o)=>r.map(this.parse,this)),this.debug(this.pattern,a),a=a.filter(r=>r.indexOf(!1)===-1),this.debug(this.pattern,a),this.set=a}parseNegate(){if(this.options.nonegate)return;const t=this.pattern;let n=!1,a=0;for(let r=0;r<t.length&&t.charAt(r)==="!";r++)n=!n,a++;a&&(this.pattern=t.substr(a)),this.negate=n}matchOne(t,n,a){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:n}),this.debug("matchOne",t.length,n.length);for(var s=0,o=0,l=t.length,i=n.length;s<l&&o<i;s++,o++){this.debug("matchOne loop");var d=n[o],g=t[s];if(this.debug(n,d,g),d===!1)return!1;if(d===W){this.debug("GLOBSTAR",[n,d,g]);var c=s,p=o+1;if(p===i){for(this.debug("** at the end");s<l;s++)if(t[s]==="."||t[s]===".."||!r.dot&&t[s].charAt(0)===".")return!1;return!0}for(;c<l;){var f=t[c];if(this.debug(`
globstar while`,t,c,n,p,f),this.matchOne(t.slice(c),n.slice(p),a))return this.debug("globstar found match!",c,l,f),!0;if(f==="."||f===".."||!r.dot&&f.charAt(0)==="."){this.debug("dot detected!",t,c,n,p);break}this.debug("globstar swallow a segment, and continue"),c++}return!!(a&&(this.debug(`
>>> no match, partial?`,t,c,n,p),c===l))}var m;if(typeof d=="string"?(m=g===d,this.debug("string match",d,g,m)):(m=g.match(d),this.debug("pattern match",d,g,m)),!m)return!1}if(s===l&&o===i)return!0;if(s===l)return a;if(o===i)return s===l-1&&t[s]==="";throw new Error("wtf?")}braceExpand(){return Un(this.pattern,this.options)}parse(t,n){lt(t);const a=this.options;if(t==="**")if(a.noglobstar)t="*";else return W;if(t==="")return"";let r="",s=!!a.nocase,o=!1;const l=[],i=[];let d,g=!1,c=-1,p=-1,f,m,w;const E=t.charAt(0)==="."?"":a.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",P=()=>{if(d){switch(d){case"*":r+=pt,s=!0;break;case"?":r+=Pt,s=!0;break;default:r+="\\"+d;break}this.debug("clearStateChar %j %j",d,r),d=!1}};for(let S=0,u;S<t.length&&(u=t.charAt(S));S++){if(this.debug("%s	%s %s %j",t,S,r,u),o){if(u==="/")return!1;Xt[u]&&(r+="\\"),r+=u,o=!1;continue}switch(u){case"/":return!1;case"\\":P(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,S,r,u),g){this.debug("  in class"),u==="!"&&S===p+1&&(u="^"),r+=u;continue}this.debug("call clearStateChar %j",d),P(),d=u,a.noext&&P();continue;case"(":if(g){r+="(";continue}if(!d){r+="\\(";continue}l.push({type:d,start:S-1,reStart:r.length,open:Qt[d].open,close:Qt[d].close}),r+=d==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",d,r),d=!1;continue;case")":if(g||!l.length){r+="\\)";continue}P(),s=!0,m=l.pop(),r+=m.close,m.type==="!"&&i.push(m),m.reEnd=r.length;continue;case"|":if(g||!l.length){r+="\\|";continue}P(),r+="|";continue;case"[":if(P(),g){r+="\\"+u;continue}g=!0,p=S,c=r.length,r+=u;continue;case"]":if(S===p+1||!g){r+="\\"+u;continue}f=t.substring(p+1,S);try{RegExp("["+f+"]")}catch{w=this.parse(f,We),r=r.substr(0,c)+"\\["+w[0]+"\\]",s=s||w[1],g=!1;continue}s=!0,g=!1,r+=u;continue;default:P(),Xt[u]&&!(u==="^"&&g)&&(r+="\\"),r+=u;break}}for(g&&(f=t.substr(p+1),w=this.parse(f,We),r=r.substr(0,c)+"\\["+w[0],s=s||w[1]),m=l.pop();m;m=l.pop()){let S;S=r.slice(m.reStart+m.open.length),this.debug("setting tail",r,m),S=S.replace(/((?:\\{2}){0,64})(\\?)\|/g,(h,v,b)=>(b||(b="\\"),v+v+b+"|")),this.debug(`tail=%j
   %s`,S,S,m,r);const u=m.type==="*"?pt:m.type==="?"?Pt:"\\"+m.type;s=!0,r=r.slice(0,m.reStart)+u+"\\("+S}P(),o&&(r+="\\\\");const $=uo[r.charAt(0)];for(let S=i.length-1;S>-1;S--){const u=i[S],h=r.slice(0,u.reStart),v=r.slice(u.reStart,u.reEnd-8);let b=r.slice(u.reEnd);const C=r.slice(u.reEnd-8,u.reEnd)+b,x=h.split("(").length-1;let B=b;for(let A=0;A<x;A++)B=B.replace(/\)[+*?]?/,"");b=B;const z=b===""&&n!==We?"$":"";r=h+v+b+z+C}if(r!==""&&s&&(r="(?=.)"+r),$&&(r=E+r),n===We)return[r,s];if(!s)return go(t);const k=a.nocase?"i":"";try{return Object.assign(new RegExp("^"+r+"$",k),{_glob:t,_src:r})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const n=this.options,a=n.noglobstar?pt:n.dot?so:co,r=n.nocase?"i":"";let s=t.map(o=>(o=o.map(l=>typeof l=="string"?po(l):l===W?W:l._src).reduce((l,i)=>(l[l.length-1]===W&&i===W||l.push(i),l),[]),o.forEach((l,i)=>{l!==W||o[i-1]===W||(i===0?o.length>1?o[i+1]="(?:\\/|"+a+"\\/)?"+o[i+1]:o[i]=a:i===o.length-1?o[i-1]+="(?:\\/|"+a+")?":(o[i-1]+="(?:\\/|\\/"+a+"\\/)"+o[i+1],o[i+1]=W))}),o.filter(l=>l!==W).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,r)}catch{this.regexp=!1}return this.regexp}match(t,n=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&n)return!0;const a=this.options;Lt.sep!=="/"&&(t=t.split(Lt.sep).join("/")),t=t.split(Jt),this.debug(this.pattern,"split",t);const r=this.set;this.debug(this.pattern,"set",r);let s;for(let o=t.length-1;o>=0&&(s=t[o],!s);o--);for(let o=0;o<r.length;o++){const l=r[o];let i=t;if(a.matchBase&&l.length===1&&(i=[s]),this.matchOne(i,l,n))return a.flipNegate?!0:!this.negate}return a.flipNegate?!1:this.negate}static defaults(t){return K.defaults(t).Minimatch}}K.Minimatch=ct;var ho=$n;let{storageKey:Ge,currentPath:mo}=Ue();const he=Zn("zfile-pwd-cache",{});function vo(){return{putPathPwd:(n,a)=>{n&&(he.value[Ge.value]||(he.value[Ge.value]={}),he.value[Ge.value][n]=a)},getPathPwd:()=>{for(let n of Object.keys(he.value))if(n===Ge.value){for(let a of Object.keys(he.value[n]))if(ho(mo.value,a))return he.value[n][a]}return""}}}const It=typeof window!="undefined",ht=()=>{};function bo(e,t=200,n={}){return function(a,r){return function(...s){a(()=>r.apply(this,s),{fn:r,thisArg:this,args:s})}}(function(a,r={}){let s,o;return l=>{const i=le(a),d=le(r.maxWait);if(s&&clearTimeout(s),i<=0||d!==void 0&&d<=0)return o&&(clearTimeout(o),o=null),l();d&&!o&&(o=setTimeout(()=>{s&&clearTimeout(s),o=null,l()},d)),s=setTimeout(()=>{o&&clearTimeout(o),o=null,l()},i)}}(t,n),e)}var yo=Object.defineProperty,wo=Object.defineProperties,So=Object.getOwnPropertyDescriptors,en=Object.getOwnPropertySymbols,Co=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,tn=(e,t,n)=>t in e?yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xo=(e,t)=>{for(var n in t||(t={}))Co.call(t,n)&&tn(e,n,t[n]);if(en)for(var n of en(t))ko.call(t,n)&&tn(e,n,t[n]);return e};const _t=It?window:void 0;function _e(...e){let t,n,a,r;if(typeof e[0]=="string"?([n,a,r]=e,t=_t):[t,n,a,r]=e,!t)return ht;let s=ht;const o=$e(()=>function(d){var g;const c=le(d);return(g=c==null?void 0:c.$el)!=null?g:c}(t),d=>{s(),d&&(d.addEventListener(n,a,r),s=()=>{d.removeEventListener(n,a,r),s=ht})},{immediate:!0,flush:"post"}),l=()=>{o(),s()};var i;return i=l,sa()&&ca(i),l}function Ao(e,t,n={}){const{target:a=_t,eventName:r="keydown",passive:s=!1}=n,o=typeof(l=e)=="function"?l:typeof l=="string"?i=>i.key===l:Array.isArray(l)?i=>l.includes(i.key):l?()=>!0:()=>!1;var l;return _e(a,r,i=>{o(i)&&t(i)},s)}const mt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},vt="__vueuse_ssr_handlers__";mt[vt]=mt[vt]||{},mt[vt];var nn,an,Eo=Object.defineProperty,To=Object.defineProperties,Lo=Object.getOwnPropertyDescriptors,on=Object.getOwnPropertySymbols,Po=Object.prototype.hasOwnProperty,Fo=Object.prototype.propertyIsEnumerable,rn=(e,t,n)=>t in e?Eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function Mo(e,t={}){var n,a;const r=(n=t.draggingElement)!=null?n:_t,s=M((a=t.initialValue)!=null?a:{x:0,y:0}),o=M(),l=f=>!t.pointerTypes||t.pointerTypes.includes(f.pointerType),i=f=>{le(t.preventDefault)&&f.preventDefault(),le(t.stopPropagation)&&f.stopPropagation()},d=f=>{var m;l(f)&&o.value&&(s.value={x:f.pageX-o.value.x,y:f.pageY-o.value.y},(m=t.onMove)==null||m.call(t,s.value,f),i(f))},g=f=>{var m;l(f)&&o.value&&(o.value=void 0,(m=t.onEnd)==null||m.call(t,s.value,f),i(f))};return It&&(_e(e,"pointerdown",f=>{var m;if(!l(f)||le(t.exact)&&f.target!==le(e))return;const w=le(e).getBoundingClientRect(),E={x:f.pageX-w.left,y:f.pageY-w.top};((m=t.onStart)==null?void 0:m.call(t,E,f))!==!1&&(o.value=E,i(f))},!0),_e(r,"pointermove",d,!0),_e(r,"pointerup",g,!0)),c=((f,m)=>{for(var w in m||(m={}))Po.call(m,w)&&rn(f,w,m[w]);if(on)for(var w of on(m))Fo.call(m,w)&&rn(f,w,m[w]);return f})({},function(f){if(!la(f))return Et(f);const m=Array.isArray(f.value)?new Array(f.value.length):{};for(const w in f.value)m[w]=ia(()=>({get:()=>f.value[w],set(E){if(Array.isArray(f.value)){const $=[...f.value];$[w]=E,f.value=$}else f.value=(P=xo({},f.value),wo(P,So({[w]:E})));var P}}));return m}(s)),p={position:s,isDragging:L(()=>!!o.value),style:L(()=>`left:${s.value.x}px;top:${s.value.y}px;`)},To(c,Lo(p));var c,p}It&&(window==null?void 0:window.navigator)&&((nn=window==null?void 0:window.navigator)==null?void 0:nn.platform)&&/iP(ad|hone|od)/.test((an=window==null?void 0:window.navigator)==null?void 0:an.platform);const zo=["a","s","d","w","q","e","A","S","D","W","Q","E","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Escape"," "];var it=kn({name:"V3ImgPreview",props:{showToolbar:{type:Boolean,default:!0},showArrowBtn:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},url:{type:String,default:void 0},escClose:{type:Boolean,default:!0},images:{type:Array,default:()=>[]},showCloseBtn:{type:Boolean,default:!0},index:{type:Number,default:0},on_unmount_v3_ima_preview_app:{type:Function}},setup(e,t){let{emit:n}=t;const a=M(null),r=M(null),{style:s}=Mo(r),o=we({visible:!0,imgState:"loading",src:"",imgIndex:e.index}),l=L(()=>{var k;return((k=e.images)===null||k===void 0?void 0:k.length)>1&&e.showArrowBtn}),i=we({imgScale:1,imgRotate:0}),d=L(()=>{var k;return((k=e.images)===null||k===void 0?void 0:k.length)>1}),g=bo(k=>{if(!e.keyboard)return!1;k.preventDefault();const{key:S}=k;return["s","S","ArrowDown"].includes(S)?f(-.1,!1):["w","W","ArrowUp"].includes(S)?f(.1,!1):S===" "?c():S==="Escape"&&e.escClose?P():["E","e"].includes(S)?p(!0):["Q","q"].includes(S)?p(!1):["a","A","ArrowLeft"].includes(S)?$(!1):["d","D","ArrowRight"].includes(S)?$(!0):void 0},200);Ao(zo,g);const c=()=>{i.imgScale=1,i.imgRotate=0,r.value.style.top="0",r.value.style.left="0"};function p(k){i.imgRotate+=90*(k?1:-1)}function f(k){let S=arguments.length>1&&arguments[1]!==void 0&&arguments[1];i.imgScale<=.2&&k<0||(S?i.imgScale=k:i.imgScale+=k)}function m(k){k.preventDefault(),f(k.deltaY<0?.05:-.05)}function w(k){o.imgState="loading",(S=>{const u=new Image;return u.src=S,new Promise((h,v)=>{u.onload=()=>{h(S)},u.onerror=()=>{v(S)}})})(k).then(()=>{o.imgState="success",o.src=k,c()}).catch(()=>{o.imgState="error"})}function E(){at(()=>{_e(a.value,"mousewheel",m,!1),c(),at(()=>e.url!==void 0?w(e.url):Array.isArray(e.images)&&e.images.length>0?w(e.images[o.imgIndex]):console.error("images is not Array or Array length is 0"))})}function P(){var k;o.visible=!1,n("close"),(k=e.on_unmount_v3_ima_preview_app)===null||k===void 0||k.call(e)}function $(k){d.value&&(k?(o.imgIndex++,o.imgIndex>e.images.length-1&&(o.imgIndex=0)):(o.imgIndex--,o.imgIndex<0&&(o.imgIndex=e.images.length-1)),w(e.images[o.imgIndex]))}return xn(()=>{window.__V3__IMG__PREVIEW__LOAD__ICON__SVG__||function(k){k.__V3__IMG__PREVIEW__LOAD__ICON__SVG__=!0;var S,u,h,v,b,C='<svg><symbol id="v3-img-close" viewBox="0 0 1045 1024"><path d="M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z"  ></path></symbol><symbol id="v3-img-img-error" viewBox="0 0 1024 1024"><path d="M704 328a72 72 0 1 0 144 0 72 72 0 1 0-144 0z"  ></path><path d="M999.904 116.608a32 32 0 0 0-21.952-10.912L521.76 73.792a31.552 31.552 0 0 0-27.2 11.904l-92.192 114.848a32 32 0 0 0 0.672 40.896l146.144 169.952-147.456 194.656 36.48-173.376a32 32 0 0 0-11.136-31.424L235.616 245.504l79.616-125.696a32 32 0 0 0-29.28-49.024L45.76 87.552a32 32 0 0 0-29.696 34.176l55.808 798.016a32.064 32.064 0 0 0 34.304 29.696l176.512-13.184c17.632-1.312 30.848-16.672 29.504-34.272s-16.576-31.04-34.304-29.536L133.44 883.232l-6.432-92.512 125.312-12.576a32 32 0 0 0 28.672-35.04 32.16 32.16 0 0 0-35.04-28.672L122.56 726.848 82.144 149.184l145.152-10.144-60.96 96.224a32 32 0 0 0 6.848 41.952l198.4 161.344-58.752 279.296a30.912 30.912 0 0 0 0.736 14.752 31.68 31.68 0 0 0 1.408 11.04l51.52 154.56a31.968 31.968 0 0 0 27.456 21.76l523.104 47.552a32.064 32.064 0 0 0 34.848-29.632l55.776-798.048a32.064 32.064 0 0 0-7.776-23.232z m-98.912 630.848l-412.576-39.648a31.52 31.52 0 0 0-34.912 28.768 32 32 0 0 0 28.8 34.912l414.24 39.808-6.272 89.536-469.728-42.72-39.584-118.72 234.816-310.016a31.936 31.936 0 0 0-1.248-40.192L468.896 219.84l65.088-81.056 407.584 28.48-40.576 580.192z"  ></path></symbol><symbol id="v3-img-loading" viewBox="0 0 1024 1024"><path d="M834.7648 736.3584a5.632 5.632 0 1 0 11.264 0 5.632 5.632 0 0 0-11.264 0z m-124.16 128.1024a11.1616 11.1616 0 1 0 22.3744 0 11.1616 11.1616 0 0 0-22.3744 0z m-167.3216 65.8944a16.7936 16.7936 0 1 0 33.6384 0 16.7936 16.7936 0 0 0-33.6384 0zM363.1616 921.6a22.3744 22.3744 0 1 0 44.7488 0 22.3744 22.3744 0 0 0-44.7488 0z m-159.744-82.0224a28.0064 28.0064 0 1 0 55.9616 0 28.0064 28.0064 0 0 0-56.0128 0zM92.672 700.16a33.6384 33.6384 0 1 0 67.2256 0 33.6384 33.6384 0 0 0-67.2256 0zM51.2 528.9984a39.168 39.168 0 1 0 78.336 0 39.168 39.168 0 0 0-78.336 0z m34.1504-170.0864a44.8 44.8 0 1 0 89.6 0 44.8 44.8 0 0 0-89.6 0zM187.904 221.7984a50.432 50.432 0 1 0 100.864 0 50.432 50.432 0 0 0-100.864 0zM338.432 143.36a55.9616 55.9616 0 1 0 111.9232 0 55.9616 55.9616 0 0 0-111.9744 0z m169.0112-4.9152a61.5936 61.5936 0 1 0 123.2384 0 61.5936 61.5936 0 0 0-123.2384 0z m154.7776 69.632a67.1744 67.1744 0 1 0 134.3488 0 67.1744 67.1744 0 0 0-134.3488 0z m110.0288 130.816a72.8064 72.8064 0 1 0 145.5616 0 72.8064 72.8064 0 0 0-145.5616 0z m43.7248 169.472a78.3872 78.3872 0 1 0 156.8256 0 78.3872 78.3872 0 0 0-156.8256 0z" fill="" ></path></symbol><symbol id="v3-img-right" viewBox="0 0 1024 1024"><path d="M884.808356 96.170317c0-17.780969-16.723893-32.209586-37.309744-32.209586-20.586874 0-37.310767 14.428617-37.310767 32.209586V927.20035c0 17.780969 16.723893 32.209586 37.310767 32.209586 20.585851 0 37.309744-14.428617 37.309744-32.209586V96.170317zM263.249101 159.859871c-27.619034-21.278629-50.027393-11.659551-50.027393 22.116717v659.490146c0 33.44881 22.481014 43.322691 50.027393 22.116716l407.352615-313.385476c27.65485-21.242813 27.618011-55.784514 0-76.989465L263.249101 159.859871z m449.327612 260.298398c60.265572 48.751331 60.301388 134.302799 0 183.090968L297.061185 939.297876c-70.976518 57.422827-158.459988-25.322735-158.459989-116.158556V200.267163c0-91.12644 87.445608-173.6172 158.459989-116.158557l415.515528 336.049663zM297.061185 84.10963"  ></path></symbol><symbol id="v3-img-left" viewBox="0 0 1024 1024"><path d="M138.60222 96.170317V927.20035c0 17.780969 16.723893 32.209586 37.309744 32.209586 20.586874 0 37.310767-14.428617 37.310767-32.209586V96.170317c0-17.780969-16.723893-32.209586-37.310767-32.209586-20.585851 0-37.309744 14.428617-37.309744 32.209586z m621.560278 63.689554L352.80886 473.208509c-27.618011 21.205974-27.65485 55.747675 0 76.989465l407.353638 313.385476c27.54638 21.205974 50.027393 11.33107 50.027393-22.116716v-659.490146c-0.001023-33.776268-22.408359-43.395346-50.027393-22.116717z m-33.812084-75.750241c71.013357-57.459666 158.458965 25.032116 158.458965 116.157533v622.872157c0 90.835821-87.482447 173.581384-158.459988 116.158556L310.834886 603.249237c-60.301388-48.78817-60.265572-134.339638 0-183.090968L726.350414 84.10963z m0 0"  ></path></symbol><symbol id="v3-img-zoom-out" viewBox="0 0 1024 1024"><path d="M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z"  ></path><path d="M625.792 448H336a32 32 0 0 0 0 64h289.792a32 32 0 1 0 0-64z"  ></path></symbol><symbol id="v3-img-zoom-big" viewBox="0 0 1024 1024"><path d="M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z"  ></path><path d="M625.792 448H512v-112a32 32 0 0 0-64 0V448h-112a32 32 0 0 0 0 64H448v112a32 32 0 1 0 64 0V512h113.792a32 32 0 1 0 0-64z"  ></path></symbol><symbol id="v3-img-rotate-left" viewBox="0 0 1024 1024"><path d="M884.565333 431.914667c-3.114667 36.266667-22.784 55.893333-59.008 59.008-35.2-3.114667-54.357333-22.741333-57.472-59.008 3.114667-35.157333 22.272-54.314667 57.472-57.429334 36.224 3.114667 55.893333 22.272 59.008 57.429334z m-97.834666 0c3.114667 24.874667 16.042667 38.826667 38.826666 41.941333 22.741333-2.048 35.712-16.042667 38.826667-41.941333-3.114667-24.832-16.085333-38.272-38.826667-40.362667-22.784 3.114667-35.712 16.597333-38.826666 40.362667z m-59.008 82.346666c-1.024 103.466667-34.688 156.245333-100.906667 158.293334-69.376-1.024-104.021333-53.76-104.021333-158.293334 0.981333-104.576 35.157333-158.421333 102.442666-161.536 67.285333 2.133333 101.461333 55.893333 102.485334 161.493334z m-169.216 0c0 89.002667 22.229333 132.992 66.730666 131.925334 44.501333 1.066667 66.773333-42.922667 66.773334-131.968 0-90.026667-22.784-134.528-68.309334-133.546667-42.453333 3.114667-64.213333 47.658667-65.194666 133.546667z m-184.746667 49.664c-58.026667-5.205333-89.6-39.338667-94.72-102.485333 4.096-67.285333 37.76-103.509333 100.906667-108.714667 72.448-0.981333 108.16 50.218667 107.093333 153.728 0 109.738667-37.76 165.12-113.322667 166.144-45.568-2.090667-74.538667-24.32-86.954666-66.773333l32.597333-10.88c7.253333 36.266667 26.453333 53.845333 57.472 52.821333 48.64-2.090667 73.472-45.056 74.538667-128.853333-15.530667 29.994667-41.429333 45.013333-77.653334 45.013333z m3.072-181.674666c-39.338667 3.114667-60.586667 28.458667-63.658667 76.074666 2.048 47.616 23.296 72.96 63.658667 76.074667 40.362667 0 65.194667-18.645333 74.538667-55.893333 0-65.194667-24.874667-97.28-74.538667-96.256z m135.594667 641.578666C230.186667 1023.829333 0.597333 794.24 0.597333 512v-0.981333h53.973334v0.981333c0 252.501333 205.354667 457.898667 457.813333 457.898667 252.501333 0 457.898667-205.397333 457.898667-457.898667 0-252.458667-205.397333-457.813333-457.856-457.813333A457.088 457.088 0 0 0 159.530667 220.586667l120.533333-0.938667h8.106667l-47.061334 47.786667-167.936 1.365333-1.109333-167.936 47.189333-47.872v131.626667A510.933333 510.933333 0 0 1 512.426667 0.128C794.624 0.128 1024.256 229.76 1024.256 512c0 282.282667-229.632 511.872-511.829333 511.872z"  ></path></symbol><symbol id="v3-img-antetype" viewBox="0 0 1024 1024"><path d="M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zM512 622c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zM512 482c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"  ></path><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"  ></path><path d="M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"  ></path></symbol><symbol id="v3-img-rotate-right" viewBox="0 0 1024 1024"><path d="M375.381 562.517c-57.898-5.162-89.472-39.296-94.634-102.4 4.138-67.2 37.76-103.381 100.864-108.586 72.362-1.024 108.032 50.176 107.008 153.6 0 109.61-37.76 164.906-113.238 165.973-45.525-2.133-74.453-24.32-86.869-66.73l32.597-10.838c7.211 36.181 26.368 53.76 57.387 52.736 48.597-2.048 73.387-44.97 74.453-128.768-15.488 29.995-41.386 45.013-77.568 45.013z m3.115-181.504c-39.296 3.072-60.501 28.459-63.573 75.99 2.048 47.573 23.253 72.96 63.573 76.032 40.32 0 65.152-18.603 74.453-55.851 0-65.152-24.832-97.195-74.453-96.17z m145.835 131.84c0.981-104.448 35.114-158.208 102.4-161.322 67.157 2.09 101.29 55.85 102.357 161.322-1.067 103.424-34.688 156.16-100.821 158.251-69.334-1.067-103.936-53.76-103.936-158.25z m169.088 0c0-89.984-22.784-134.4-68.267-133.418-42.41 3.114-64.128 47.616-65.152 133.418 0 88.96 22.187 132.907 66.688 131.84 44.459 1.067 66.73-42.88 66.73-131.84z m75.989-82.218c3.115-35.158 22.23-54.272 57.387-57.387 36.181 3.115 55.893 22.23 58.965 57.387-3.115 36.224-22.784 55.893-58.965 58.965-35.158-3.115-54.272-22.741-57.387-58.965z m96.17 0c-3.071-24.832-16.042-38.23-38.783-40.32-22.742 3.114-35.67 16.554-38.784 40.32 3.114 24.832 16.042 38.826 38.826 41.898 22.699-2.048 35.67-16.042 38.742-41.898z m-354.175 592.64c-281.984 0-511.36-229.376-511.36-511.403C0 229.973 229.419 0.512 511.403 0.512c157.696 0 298.922 71.765 392.789 184.32V54.613l47.147 47.872-1.11 167.766-167.765-1.366-47.061-47.744h8.106l121.558 0.982a456.704 456.704 0 0 0-353.664-167.68c-252.246 0-457.43 205.226-457.43 457.429 0 252.288 205.184 457.515 457.43 457.515S968.875 764.16 968.875 511.872v-0.981h53.888v0.981c0 282.027-229.376 511.403-511.36 511.403z"  ></path></symbol></svg>',x=(x=document.getElementsByTagName("script"))[x.length-1].getAttribute("data-injectcss");if(x&&!k.__iconfont__svg__cssinject__){k.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(z){console&&console.log(z)}}function B(){b||(b=!0,h())}S=function(){var z,A=document.createElement("div");A.innerHTML=C,C=null,(A=A.getElementsByTagName("svg")[0])&&(A.setAttribute("aria-hidden","true"),A.style.position="absolute",A.style.width=0,A.style.height=0,A.style.overflow="hidden",A=A,(z=document.body).firstChild?function(G,y){y.parentNode.insertBefore(G,y)}(A,z.firstChild):z.appendChild(A))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(S,0):(u=function(){document.removeEventListener("DOMContentLoaded",u,!1),S()},document.addEventListener("DOMContentLoaded",u,!1)):document.attachEvent&&(h=S,v=k.document,b=!1,function z(){try{v.documentElement.doScroll("left")}catch{return void setTimeout(z,50)}B()}(),v.onreadystatechange=function(){v.readyState=="complete"&&(v.onreadystatechange=null,B())})}(typeof window!="undefined"?window:global),E()}),Object.assign(Object.assign(Object.assign({vImagesWrap:a,imgContainer:r},Et(o)),Et(i)),{handleClose:P,toggleImg:$,initImgSize:c,dragStyle:s,handleScale:f,handleRotate:p,visibleArrowBtn:l,isMultiple:d})}});const X=e=>(aa("data-v-15ccadb3"),e=e(),oa(),e),Ro={key:0,class:"v-images-wrap",ref:"vImagesWrap"},Do={class:"icon img-loading rotate-animation","aria-hidden":"true"},Bo=[X(()=>R("use",{"xlink:href":"#v3-img-loading"},null,-1))],Oo=["src"],Io=[X(()=>R("use",{"xlink:href":"#v3-img-img-error"},null,-1))],_o=[X(()=>R("use",{"xlink:href":"#v3-img-close"},null,-1))],$o=[X(()=>R("svg",{class:"icon","aria-hidden":"true"},[R("use",{"xlink:href":"#v3-img-left"})],-1))],jo=[X(()=>R("svg",{class:"icon","aria-hidden":"true"},[R("use",{"xlink:href":"#v3-img-right"})],-1))],Uo={key:3,class:"v3-img-preview-toolbar"},No=[X(()=>R("use",{"xlink:href":"#v3-img-zoom-out"},null,-1))],Vo=[X(()=>R("use",{"xlink:href":"#v3-img-zoom-big"},null,-1))],Ko=[X(()=>R("use",{"xlink:href":"#v3-img-antetype"},null,-1))],qo=[X(()=>R("use",{"xlink:href":"#v3-img-rotate-left"},null,-1))],Ho=[X(()=>R("use",{"xlink:href":"#v3-img-rotate-right"},null,-1))];(function(e,t){t===void 0&&(t={});var n=t.insertAt;if(e&&typeof document!="undefined"){var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}})(`.icon[data-v-15ccadb3] {
  width: 1em;
  height: 1em;
  vertical-align: -0.15em;
  fill: currentColor;
  overflow: hidden;
}
.v-images-wrap[data-v-15ccadb3] {
  z-index: 200;
  user-select: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(3px);
  color: #fff;
}
.v-images-wrap[data-v-15ccadb3] .img-loading[data-v-15ccadb3],
.v-images-wrap[data-v-15ccadb3] .img-content[data-v-15ccadb3] {
  font-size: 50px;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: auto;
  transition: all 0.2s;
}
.v-images-wrap[data-v-15ccadb3] .img-container[data-v-15ccadb3] {
  z-index: 201;
  position: absolute;
  height: 100vh;
  width: 100vw;
  top: 0;
  left: 0;
  text-align: center;
}
.v-images-wrap[data-v-15ccadb3] .img-container[data-v-15ccadb3] .img-content[data-v-15ccadb3] {
  max-width: 100%;
  max-height: 100%;
}
.v-images-wrap[data-v-15ccadb3] .img-container[data-v-15ccadb3] .img-error[data-v-15ccadb3] {
  font-size: 300px;
  color: #d8d8d8;
}
.v-images-wrap[data-v-15ccadb3] .rotate-animation[data-v-15ccadb3] {
  animation: rotate-15ccadb3 1.5s linear infinite;
}
.v-images-wrap[data-v-15ccadb3] .arrow[data-v-15ccadb3] {
  width: 42px;
  height: 42px;
  text-align: center;
  line-height: 42px;
  position: absolute;
  top: 50%;
  border-radius: 50%;
  transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  font-size: 24px;
  cursor: pointer;
  transition: all 0.2s;
  z-index: 280;
  background: rgba(0, 0, 0, 0.3);
}
.v-images-wrap[data-v-15ccadb3] .arrow[data-v-15ccadb3][data-v-15ccadb3]:hover {
  opacity: 0.8;
  transform: translateY(-50%) scale(1.2);
}
.v-images-wrap[data-v-15ccadb3] .arrow-left[data-v-15ccadb3] {
  left: 50px;
}
.v-images-wrap[data-v-15ccadb3] .arrow-right[data-v-15ccadb3] {
  right: 50px;
}
.v-images-wrap[data-v-15ccadb3] .close-btn[data-v-15ccadb3] {
  z-index: 205;
  position: absolute;
  right: 50px;
  top: 50px;
  width: 36px;
  height: 36px;
  font-size: 22px;
  line-height: 36px;
  text-align: center;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s;
  color: #e7e5e5;
  background: rgba(0, 0, 0, 0.3);
}
.v-images-wrap[data-v-15ccadb3] .close-btn[data-v-15ccadb3][data-v-15ccadb3]:hover {
  opacity: 0.8;
  transform: scale(1.2);
}
.v-images-wrap[data-v-15ccadb3] .v3-img-preview-toolbar[data-v-15ccadb3] {
  z-index: 205;
  position: absolute;
  bottom: 10%;
  font-size: 26px;
  width: 100%;
  display: flex;
  justify-content: center;
  cursor: pointer;
}
.v-images-wrap[data-v-15ccadb3] .v3-img-preview-toolbar[data-v-15ccadb3] section[data-v-15ccadb3] {
  height: 44px;
  bottom: 10%;
  padding: 0 22px;
  display: flex;
  align-items: center;
  border-radius: 22px;
  background: rgba(0, 0, 0, 0.3);
  color: #c3c3c3;
}
.v-images-wrap[data-v-15ccadb3] .v3-img-preview-toolbar[data-v-15ccadb3] section[data-v-15ccadb3] svg[data-v-15ccadb3] {
  box-sizing: content-box;
  padding: 0 10px;
  transition: all 0.2s;
}
.v-images-wrap[data-v-15ccadb3] .v3-img-preview-toolbar[data-v-15ccadb3] section[data-v-15ccadb3] svg[data-v-15ccadb3][data-v-15ccadb3]:hover {
  transform: scale(1.2);
}
@keyframes rotate-15ccadb3 {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
`),it.render=function(e,t,n,a,r,s){return D(),Me(En,{name:"fade"},{default:et(()=>[e.visible?(D(),j("div",Ro,[Be((D(),j("svg",Do,Bo,512)),[[Oe,e.imgState==="loading"]]),R("div",{ref:"imgContainer",style:Ie(e.dragStyle),class:"img-container"},[Be(R("img",{class:"img-content",onDragstart:t[0]||(t[0]=tt(()=>{},["prevent"])),src:e.src,style:Ie(`transform: scale(${e.imgScale}) rotate(${e.imgRotate}deg);`),alt:""},null,44,Oo),[[Oe,e.imgState==="success"]]),Be((D(),j("svg",{class:"icon img-content img-error",onDragstart:t[1]||(t[1]=tt(()=>{},["prevent"])),"aria-hidden":"true",style:Ie(`transform: scale(${e.imgScale}) rotate(${e.imgRotate}deg);`)},Io,36)),[[Oe,e.imgState==="error"]])],4),e.showCloseBtn?(D(),j("svg",{key:0,class:"icon close-btn","aria-hidden":"true",onClick:t[2]||(t[2]=tt(function(){return e.handleClose&&e.handleClose(...arguments)},["stop"]))},_o)):te("",!0),e.visibleArrowBtn?(D(),j("div",{key:1,class:"arrow arrow-left",onClick:t[3]||(t[3]=o=>e.toggleImg(!1))},$o)):te("",!0),e.visibleArrowBtn?(D(),j("div",{key:2,class:"arrow arrow-right",onClick:t[4]||(t[4]=o=>e.toggleImg(!0))},jo)):te("",!0),e.showToolbar?(D(),j("div",Uo,[R("section",null,[(D(),j("svg",{class:"icon","aria-hidden":"true",onClick:t[5]||(t[5]=o=>e.handleScale(-.1,!1))},No)),(D(),j("svg",{class:"icon","aria-hidden":"true",onClick:t[6]||(t[6]=o=>e.handleScale(.1,!1))},Vo)),(D(),j("svg",{class:"icon","aria-hidden":"true",onClick:t[7]||(t[7]=function(){return e.initImgSize&&e.initImgSize(...arguments)})},Ko)),(D(),j("svg",{class:"icon","aria-hidden":"true",onClick:t[8]||(t[8]=o=>e.handleRotate(!1))},qo)),(D(),j("svg",{class:"icon","aria-hidden":"true",onClick:t[9]||(t[9]=o=>e.handleRotate(!0))},Ho))])])):te("",!0)],512)):te("",!0)]),_:1})},it.__scopeId="data-v-15ccadb3";let Nn={};const ln="v3-img-preview-container-id";let Ae={};function Vn(e){if(Ae._instance)return!1;Array.isArray(e)&&(e={images:e}),typeof e=="string"&&(e={url:e}),e=Object.assign(Object.assign({},Nn),e);let t=document.getElementById(ln);return t||(t=document.createElement("div"),t.id=ln,document.body.appendChild(t)),Ae=ra(it,Object.assign(Object.assign({},e),{on_unmount_v3_ima_preview_app:()=>Ae.unmount()})),Ae.mount(t),Ae}(()=>{const e=it;return e.install=(t,n)=>{Nn=n,t.config.globalProperties.$v3ImgPreviewFn=Vn},e})();let sn=Bt(),bt=Ce(),cn=M(!1),un=M(!1),Wo=M(!1),dn=M(!1);function Go(){return{openVideo:()=>{cn.value=!0},dialogVideoVisible:cn,openText:()=>{un.value=!0},dialogTextVisible:un,openOffice:o=>{let l=sn.zfileConfig.officePreview.previewUrl(o.url);window.open(l)},dialogOfficeVisible:Wo,openImage:o=>{let l=[],i=0;sn.zfileConfig.imagePreview.mode==="only"?l.push(o.url):bt.filterFileByType("image").forEach((g,c)=>{o.name===g.name&&(i=c),l.push(g.url)}),Vn({images:l,index:i})},openAudio:()=>{bt.updateAudioList(bt.filterFileByType("audio"))},openPdf:()=>{dn.value=!0},dialogPdfVisible:dn}}const{encodeAllIgnoreSlashes:fn}=Ba();let{routerRef:Ee,fullpath:yt,storageKey:Z,currentPath:Ye}=Ue(),{getPathPwd:Yo,putPathPwd:Zo}=vo();const{storageListAsFileList:Qo}=_a();let Te=Ce(),be=Ne();const wt=Qn(be.globalConfig.siteName);let Ft=Bt();const{openAudio:Xo,openImage:Jo,openOffice:Tr,openPdf:er,openText:tr,openVideo:nr}=Go(),me=M(!1),gn=M(!1);let Mt=we([]);if(Mt.length===0)for(let e=0;e<Ft.zfileConfig.skeleton.size;e++)Mt.push({});let Q=we({path:"",password:"",orderBy:"",orderDirection:""});const pn=M(!1);let{selectRows:ar,clearSelection:or}=st();function Kn(){const e=({prop:l,order:i})=>{Q.orderBy=l,Q.orderDirection=i==="descending"?"desc":"asc",t()},t=l=>{if(!Z.value)return;me.value=!0,Q.path=Ye.value;let i=l||{};i.storageKey=Z.value,i.path=Ye.value,i.password=i.password||Yo(),i.orderBy=Q.orderBy,i.orderDirection=Q.orderDirection;let d=Z.value;Ga(i).then(g=>{let c=g.data.passwordPattern;if(Zo(c,i.password),d!==Z.value)return;let p=g.data.files,f=Q.path;if(f!==""&&f!=="/"){let m=He.basename(He.resolve(Ye.value,"../"));p.unshift({name:m||"/",path:He.resolve(f,"../"),type:"BACK"})}Te.updateFileList(p),me.value=!1,gn.value=!0,ar.value=[],yt.value?wt.value=be.globalConfig.siteName+" | "+yt.value[yt.value.length-1]:wt.value=be.globalConfig.siteName+" | \u9996\u9875"}).catch(g=>{let c=g.response.data;c.code===se.responseCode.INVALID_PASSWORD?(H.warning("\u5BC6\u7801\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165\uFF01"),o()):c.code===se.responseCode.REQUIRED_PASSWORD?(H.warning("\u6B64\u6587\u4EF6\u5939\u9700\u8981\u5BC6\u7801\uFF0C\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"),o()):H.error(c.msg)})},n=()=>{let l={storageKey:Z.value,path:Ye.value};Ya(l).then(i=>{be.updateFolderConfig(i.data),Z.value!==Te.oldStorageKey&&Te.updateOldStorageKey(Z.value)}).finally(()=>{pn.value=!0})},a=l=>{if(!!l.name)if(Te.updateCurrentClickRow(l),l.type==="FILE"){const{batchDownloadFile:i}=qn();switch(l.fileType){case"video":nr();break;case"image":Jo(l);break;case"text":tr();break;case"audio":Xo(l);break;case"pdf":er(l);break;default:i(l)}or()}else if(l.type==="ROOT")Ee.value.push(l.path);else if(l.type==="BACK"){let i=rt("/"+Z.value+"/"+l.path);i=fn(i),Ee.value.push(i)}else{let i=rt("/"+Z.value+"/"+l.path+"/"+l.name);i=fn(i),Ee.value.push(i)}};let r=L(()=>{let l=Ft.zfileConfig.skeleton.enable,i=Ft.zfileConfig.skeleton.show;return l?i==="always"?me.value:gn.value?!1:me.value:!1}),s=L(()=>r.value?!1:me.value),o=()=>{ne.prompt("\u6B64\u6587\u4EF6\u5939\u5DF2\u52A0\u5BC6\uFF0C\u8BF7\u8F93\u5165\u5BC6\u7801","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",inputType:"password",inputValidator(l){return!!l},inputErrorMessage:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A."}).then(({value:l})=>{t({password:l})}).catch(()=>{if((Q.path==="/"||Q.path==="")&&be.globalConfig.rootShowStorage===!0)Te.updateFileList(Qo.value),Ee.value.push("/"),wt.value=be.globalConfig.siteName+" | \u9996\u9875",me.value=!1;else{let l=He.resolve(Q.path,"../");Ee.value.push("/"+Z.value+l)}})};return{loadFile:t,openRow:a,searchParam:Q,sortChangeMethod:e,skeletonLoading:r,skeletonData:Mt,basicLoading:s,initStorageConfig:pn,loadFileConfig:n}}let rr=Ce(),lr=Ne(),{storageKey:St,currentPath:Ze}=Ue();const ve=M([]),hn=M(!1);let{selectRows:N,selectRow:mn,selectFolders:Qe,selectFiles:Ct}=st();const vn=ua();function qn(){const{loadFile:e}=Kn(),t=c=>{if(!N.value&&N.value.length===0){H.warning("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u6587\u4EF6");return}let p;const m=(()=>{let w={isChrome:!1,tips:""},E=vn.browser,P=vn.version;return E==="Chrome"?w.isChrome=!0:w.tips=`<br><span class="text-gray-500 text-xs">\u68C0\u6D4B\u5230\u5F53\u524D\u6D4F\u89C8\u5668\u4E3A <b>${E}-${P}</b>, \u53EF\u80FD\u4E0D\u652F\u6301\u6B64\u529F\u80FD\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u8C37\u6B4C\u6D4F\u89C8\u5668!</span>`,w})();c!=null&&c.name?p=`\u662F\u5426\u786E\u8BA4\u4E0B\u8F7D\u6587\u4EF6 <span class="text-blue-500">${c.name}</span> \uFF1F`:N.value.length===1?(p=`\u662F\u5426\u786E\u8BA4\u4E0B\u8F7D\u6587\u4EF6 <span class="text-blue-500">${N.value[0].name}</span> \uFF1F`,c=N.value[0]):N.value.length>1&&(p=`\u662F\u5426\u786E\u8BA4\u6279\u91CF\u4E0B\u8F7D ${N.value.length} \u4E2A\u6587\u4EF6\uFF1F`,m.isChrome||(p+=m.tips)),ne.confirm(p,"\u63D0\u793A",{dangerouslyUseHTMLString:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"info",callback:w=>{w==="confirm"&&(c!=null&&c.name?(console.log("\u8FDB\u884C\u6307\u5B9A\u6587\u4EF6\u4E0B\u8F7D, \u6587\u4EF6:",c),n(c.url)):N.value.forEach(E=>{E.type==="FILE"&&(console.log("\u6279\u91CF\u9009\u4E2D\u6587\u4EF6\u4E0B\u8F7D, \u6587\u4EF6:",E),a(E.url))}))}})},n=c=>{window.open(c)},a=c=>{const p=document.createElement("iframe");p.style.display="none",p.style.height=0,p.src=c,document.body.appendChild(p),setTimeout(()=>{p.remove()},5*60*1e3)},r=()=>{ne.prompt(`\u5728 <b>${Ze.value}</b> \u4E0B\u521B\u5EFA\u6587\u4EF6\u5939\uFF0C\u8BF7\u8F93\u5165\u8981\u521B\u5EFA\u7684\u6587\u4EF6\u5939\u540D\u79F0`,"\u63D0\u793A",{dangerouslyUseHTMLString:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",draggable:!0,inputValidator(c){return c?c.includes("/")?"\u6587\u4EF6\u5939\u540D\u79F0\u4E0D\u80FD\u5305\u542B /":!0:"\u6587\u4EF6\u5939\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}}).then(({value:c})=>{let p={storageKey:St.value,path:Ze.value,name:c};Ua(p).then(()=>{H.success("\u521B\u5EFA\u6210\u529F")}).finally(()=>{e()})})},s=()=>{let c=mn.value;if(c===null){H.warning("\u8BF7\u5148\u9009\u4E2D\u4E00\u4E2A\u6587\u4EF6\u6216\u6587\u4EF6\u5939\uFF01");return}ne.prompt(`\u5C06 <b>${c.name}</b> \u4FEE\u6539\u4E3A\uFF1A`,"\u63D0\u793A",{dangerouslyUseHTMLString:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",inputValue:c.name,inputValidator(p){return!!p},inputErrorMessage:"\u6A21\u677F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A."}).then(({value:p})=>{let f={storageKey:St.value,path:Ze.value,name:c.name,newName:p},m;c.type==="FILE"?m=Ka:c.type==="FOLDER"&&(m=qa),m(f).then(()=>{H.success("\u91CD\u547D\u540D\u6210\u529F")}).finally(()=>{e()})})},o=()=>{H.warning("\u6682\u672A\u5B9E\u73B0")},l=()=>{H.warning("\u6682\u672A\u5B9E\u73B0")},i=()=>{if(!lr.permission.delete)return;if(N.value.length===0){H.warning("\u8BF7\u5148\u81F3\u5C11\u9009\u4E2D\u4E00\u4E2A\u6587\u4EF6\u6216\u6587\u4EF6\u5939\uFF01");return}let c=N.value.length===1?"\u662F\u5426\u786E\u8BA4\u5220\u9664 ":"\u662F\u5426\u786E\u8BA4\u6279\u91CF\u5220\u9664 ",p=["s3","tencent","aliyun","qiniu","minio","huawei","upyun"];Qe.value.length>0&&(c+=" "+Qe.value.length+" \u4E2A\u6587\u4EF6\u5939"),Qe.value.length>0&&Ct.value.length>0&&(c+="\uFF0C"),Ct.value.length>0&&(c+=Ct.value.length+" \u4E2A\u6587\u4EF6"),Qe.value.length>0&&p.includes(rr.currentStorageSource.type.key)&&(c+=" (\u4E0D\u652F\u6301\u5220\u9664\u975E\u7A7A\u6587\u4EF6\u5939)"),c+="?",ve.value=[],ne.confirm(c,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",draggable:!0,callback:m=>{m==="confirm"&&(N.value.length>1?(hn.value=!0,N.value.forEach(w=>{f(w).then(()=>{ve.value.push({name:w.name,status:!0})}).catch(()=>{ve.value.push({name:w.name,status:!1})})})):f(mn.value).then(w=>{H.success("\u5220\u9664\u6210\u529F"),e()}))}});const f=m=>{let w={storageKey:St.value,path:Ze.value,name:m.name};return m.type==="FOLDER"?Va(w):Na(w)}},d=()=>{ve.value=[],e()},g=L(()=>Math.floor(ve.value.length/N.value.length*100));return{batchDownloadFile:t,rename:s,newFolder:r,moveTo:o,copyTo:l,batchDelete:i,batchDeleteResult:ve,batchDeleteDialogShow:hn,batchDeleteCloseAction:d,batchDeletePercentage:g}}Bt();let ir=Ne(),ie=Ce();const sr=Dt("Meta"),cr=Dt("Control"),ur=Dt("Shift");let dr=L(()=>sr.value||cr.value),{batchDelete:bn}=qn();const{skeletonLoading:yn,openRow:kt}=Kn(),{selectRows:nt,selectRow:wn,clearSelection:zt,toggleRowSelection:Xe,toggleAllSelection:fr}=st();window.addEventListener("keydown",function(e){var t;e.key==="Escape"&&Je()?zt():e.key==="a"&&(e.metaKey||e.ctrlKey)&&Je()?(e.preventDefault(),fr()):e.key==="Delete"&&Je()?bn&&((t=nt==null?void 0:nt.value)==null?void 0:t.length)>0&&(e.preventDefault(),bn()):e.key==="Backspace"&&Je()&&ie.fileList.length>0&&ie.fileList[0].type==="BACK"&&Rt(ie.fileList[0])},!1);const Je=()=>gr()&&Hn()===!1,gr=()=>document.querySelector(".zfile-index-body:hover"),Hn=()=>!!document.querySelector(".el-popup-parent--hidden"),Re=M(-1),De=M(-1),{pressed:pr}=Xn();$e(()=>pr.value,(e,t)=>{e===!1&&t===!0&&(Re.value=-1,De.value=-1)});let Rt;function Lr(){return Rt=(a,r)=>{var l;if(r===void 0){kt(a);return}let s=r.type==="selection";if(!s&&ir.globalConfig.fileClickMode==="click"){kt(a);return}if(yn.value)return;let o=nt.value.length===1&&((l=wn.value)==null?void 0:l.name)===a.name;if(ur.value){let i=ie.fileList.findIndex(d=>d.name===wn.value.name);if(i!==null){let d=ie.fileList.findIndex(p=>p.name===a.name),g=Math.min(d,i),c=Math.max(d,i);for(let p=g+1;p<c;p++){let f=ie.fileList[p];Xe(f,!0)}}}else!dr.value&&!o&&!s&&zt();Xe(a)},{tableClickRow:Rt,tableDbClickRow:a=>{yn.value||kt(a)},tableHoverRow:(a,r,s,o)=>{if(o.buttons===1&&Re.value!==-1){if(De.value===-1){zt();let c=ie.fileList[Re.value];Xe(c,!0)}let l=a.index,i=De.value>=0?De.value:l-1,d=Math.min(i,l),g=Math.max(i,l);for(let c=d;c<=g;c++){let p=ie.fileList[c];Xe(p,!0)}De.value=l}},tableLeaveRow:(a,r,s,o)=>{o.buttons===1&&Re.value===-1&&(Re.value=a.index)}}}let Le=Ce(),Pe=Ne(),Fe=M(!1),Sn=!1;const re=M(!1),xt=M(""),V=we([]),de=we([]),ee=new Map,fe=new Map;let hr=0;const Cn={error:1,uploading:2,waiting:3,finished:4};function Pr(){let{storageKey:e,currentPath:t}=Ue();const n=Pe.globalConfig.maxFileUploads,a=u=>{u=document.querySelector("body");const h=y=>{var I,U;if(x(),Fe.value=!1,Hn()||!e.value||re.value||!Pe.permission.upload)return;y.stopPropagation(),y.preventDefault();const F=wa.service({text:"\u6587\u4EF6\u8BFB\u53D6\u4E2D...",background:"rgba(0, 0, 0, .3)"}),T=((I=y.clipboardData)==null?void 0:I.items)||((U=y.dataTransfer)==null?void 0:U.items);b(T).then(O=>{if(at(()=>{F.close()}),O.length===0)return;let _=[];O.forEach((ce,ke)=>{ce.name===".DS_Store"&&_.push(ke)});const ut=()=>{re.value=!0,O.forEach(ce=>{o({file:ce})})};_.length>0?ne.confirm(`\u68C0\u6D4B\u5230\u6709 ${_.length} \u4E2A .DS_Store \u6587\u4EF6\uFF0C\u662F\u5426\u4E0A\u4F20\u65F6\u8DF3\u8FC7\u8FD9\u4E9B\u6587\u4EF6`,"\u63D0\u793A",{confirmButtonText:"\u8DF3\u8FC7\u8FD9\u4E9B\u6587\u4EF6",cancelButtonText:"\u4F9D\u65E7\u4E0A\u4F20",type:"success",callback:ce=>{if(ce==="confirm")for(let ke=_.length-1;ke>=0;ke--){let Wn=_[ke];O.splice(Wn,1)}ut()}}):O.length>100?ne.confirm(`\u6587\u4EF6\u6570\u91CF\u4E3A ${O.length} \u4E2A\uFF0C\u662F\u5426\u786E\u8BA4\u4E0A\u4F20\uFF1F`,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"success",callback:ce=>{ce==="confirm"&&ut()}}):ut()})};let v=null;u.addEventListener("dragenter",y=>{!e.value||re.value||!Pe.permission.upload||(v=y.target,C(),y.stopPropagation(),y.preventDefault(),Fe.value=!0)},!1),u.addEventListener("dragover",function(y){!e.value||re.value||!Pe.permission.upload||(y.stopPropagation(),y.preventDefault(),Fe.value=!0)},!1),u.addEventListener("dragleave",function(y){!e.value||re.value||!Pe.permission.upload||(v===y.target&&(x(),Fe.value=!1),y.stopPropagation(),y.preventDefault())},!1),u.addEventListener("drop",h,!1),u.addEventListener("paste",h,!1);const b=async y=>{let F=[],T=[];if(y){let I=new Array(...y);for(let U=0;U<I.length;U++){let O=I[U],_=null;if(O.webkitGetAsEntry)_=O.webkitGetAsEntry();else if(O.getAsEntry)_=O.getAsEntry();else{H.warning("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u62D6\u62FD\u4E0A\u4F20");return}T.push(_)}if(T.length>0)for(let U=0;U<T.length;U++){let O=T[U];if(O){let _=await G(O);Array.isArray(_)?A(_,F):F.push(_)}}}return F},C=()=>{u.classList.add("dragging-over")},x=()=>{u.classList.remove("dragging-over")};function B(y){return new Promise((F,T)=>{y.file(I=>{F(I)})})}function z(y){return new Promise((F,T)=>{y.readEntries(I=>{F(I)})})}function A(y,F){for(let T=0;T<y.length;T++)Array.isArray(y[T])?A(y[T],F):F.push(y[T])}async function G(y){let F=y.fullPath||"",T=[];if(y.isFile){let I=await B(y);return I.dropUploadPath=F,I}else if(y.isDirectory){let I=y.createReader(),U=await z(I);for(let O=0;O<U.length;O++){let _=await G(U[O]);T.push(_)}return T}}},r=()=>{re.value=!0,xt.value="file"},s=()=>{re.value=!0,xt.value="folder",at(()=>{document.getElementsByClassName("el-upload__input")[0].webkitdirectory=!0})},o=u=>{let h=Le.fileList.find(v=>{if(v.name===u.file.name)return v});if(h){Ra({zIndex:9999,title:"\u63D0\u793A",message:`\u5F53\u524D\u76EE\u5F55\u5DF2\u5B58\u5728\u6587\u4EF6 ${h.name}, \u8DF3\u8FC7\u4E0A\u4F20.`,type:"warning"});return}l(u.file)},l=u=>{const h=hr++;let v=t.value;if(u.webkitRelativePath||u.dropUploadPath){let x=u.webkitRelativePath||u.dropUploadPath;x.startsWith("/")||(x="/"+x);let B=x.split("/");B.forEach((z,A)=>{let G=A===0,y=B.length-1===A;G||y||z&&(v+="/"+z)})}let b={storageKey:e.value,path:rt(v),name:u.name,size:u.size};if(console.log("\u5F53\u524D\u4E0A\u4F20\u4FE1\u606F:",b,", \u5F53\u524D\u540C\u65F6\u4E0A\u4F20\u6587\u4EF6\u6570:",E.value.totalUploading,"\u9650\u5236\u540C\u65F6\u4E0A\u4F20\u6587\u4EF6\u6570:",n),E.value.totalUploading>=n){console.log(`\u4E0A\u4F20\u6587\u4EF6\u6570\u8D85\u51FA ${n}, \u7B49\u5F85\u4E0A\u4F20`),de.push({index:h,file:u});return}let C={name:u.name,size:u.size,speed:"-",progress:0,loaded:0,status:"uploading",startTime:Date.now(),file:u,index:h};V.push(C),ee.set(h,pe.CancelToken.source()),fe.set(h,V[V.length-1]),Ha(b).then(x=>{const{on:B}=$t(`cancel-upload-${h}`);B(()=>{let y=ee.get(h);y&&(y.cancel(),V.find((F,T)=>{let I=F.name===u.name;return I&&V.splice(T,1),I}))});let z=["local","webdav","ftp","sftp"],A=["s3","tencent","aliyun","qiniu","minio","huawei"],G=["sharepoint","sharepoint-china","onedrive","onedrive-china"];z.includes(Le.currentStorageSource.type.key)?i(u,x.data,h):A.includes(Le.currentStorageSource.type.key)?d(u,x.data,h):G.includes(Le.currentStorageSource.type.key)?g(u,x.data,h):Le.currentStorageSource.type.key==="upyun"&&c(u,x.data,h)})},i=(u,h,v)=>{let b=new FormData;b.append("file",u),pe.post(h,b,{cancelToken:ee.get(v).token,onUploadProgress:C=>{m(C,v,!0)}}).then(()=>{f(v)}).catch(C=>{p(v,C)})},d=(u,h,v)=>{pe.put(h,u,{withCredentials:!1,cancelToken:ee.get(v).token,onUploadProgress:b=>{m(b,v)}}).then(()=>{f(v)}).catch(b=>{p(v,b)})},g=(u,h,v)=>{let b=1,C=0,x=0,B=u.size;const z=104857599,A=()=>{C+z>=B?x=B:x=C+z,b>1&&ee.set(v,pe.CancelToken.source());let G=u.slice(C,x);pe.put(`${h}`,G,{cancelToken:ee.get(v).token,timeout:1e7,headers:{"Content-Type":"application/octet-stream","Content-Range":`bytes ${C}-${x-1}/${u.size}`},type:"sync",withCredentials:!1,onUploadProgress:y=>{if(y.lengthComputable){let F=fe.get(v);const T=y.loaded+C;F.size=B,F.loaded=T,F.progress=Math.round(T/B*100),F.speed=se.fileSizeFormat(Math.round(T/(Date.now()-F.startTime)*1e3))}}}).then(y=>{y.status===202?(C+=z,b+=1,A()):y.status===201&&f(v)}).catch(y=>{p(v,y)})};A()},c=(u,h,v)=>{let b=JSON.parse(h),C=new FormData;C.append("name",u.name),C.append("authorization",b.signature),C.append("policy",b.policy),C.append("file",u),pe.post(b.url,C,{withCredentials:!1,cancelToken:ee.get(v).token,onUploadProgress:x=>{m(x,v)}}).then(()=>{f(v)}).catch(x=>{p(v,x)})},p=(u,h)=>{var b;let v=fe.get(u);v.status="error",v.endTime=Date.now(),v.msg=((b=h==null?void 0:h.response)==null?void 0:b.data)||h},f=u=>{let h=fe.get(u);h.progress=100,h.status="finished",h.endTime=Date.now(),h.msg="\u4E0A\u4F20\u6210\u529F"},m=(u,h,v)=>{let b=fe.get(h);b.size=u.total,b.loaded=u.loaded,b.progress=Math.round(u.loaded/u.total*100),b.speed=se.fileSizeFormat(Math.round(u.loaded/(Date.now()-b.startTime)*1e3)),console.log("uploadFileInfo",b,v),v&&b.progress===100&&(b.msg="\u4E0A\u4F20\u5B8C\u6210, \u670D\u52A1\u5668\u4E2D\u8F6C\u4E2D...")},w=u=>{ne.confirm(`\u662F\u5426\u786E\u5B9A\u53D6\u6D88\u6587\u4EF6 ${u.name} \u4E0A\u4F20\uFF1F`,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u8FD4\u56DE",type:"warning",callback:h=>{h==="confirm"&&$t(`cancel-upload-${u.index}`).emit()}})},E=L(()=>{let u=V.length,h=0,v=0;V.forEach(C=>{C.status==="uploading"?h++:C.status==="finished"&&v++});let b=h+de.length;return{totalSize:u,totalUploading:h,totalFinish:v,totalUploadingAndWaiting:b}}),P=L(()=>{let u=[];return u.push(...V),de.forEach(h=>{u.push({name:h.file.name,size:h.file.size,status:"waiting",msg:"\u6392\u961F\u4E2D...",index:h.index})}),u.sort((h,v)=>{let b=h.status,C=v.status;return b!==C?Cn[b]-Cn[C]:h.startTime!==v.startTime?h.startTime-v.startTime:h.endTime-v.endTime}),console.log("uploadProgressInfoSorted",u),u});Sn||($e(()=>E.value.totalUploading,u=>{if(u<n)if(console.log("\u68C0\u6D4B\u5230\u4E0A\u4F20\u4E2D\u7684\u6587\u4EF6\u4E2A\u6570\u5C0F\u4E8E\u6700\u5927\u4E0A\u4F20\u9650\u5236."),de.length===0)console.log("\u7B49\u5F85\u4E0A\u4F20\u7684\u6587\u4EF6\u6570\u4E3A 0, \u65E0\u9700\u7EE7\u7EED\u4E0A\u4F20.");else{let v=de.splice(0,1)[0];o({file:v.file}),console.log("\u5F00\u59CB\u4ECE\u7B49\u5F85\u961F\u5217\u4E2D\u83B7\u53D6\u4E0A\u4F20\u6587\u4EF6: ",v.file.name)}}),Sn=!0);const $=u=>{if(u==null)return;let h=V.findIndex((v,b)=>{if(v.index===u)return V.splice(b,1),!0});h===-1&&(h=de.findIndex((v,b)=>{if(v.index===u)return de.splice(b,1),!0})),h!==-1&&(fe.delete(u),ee.delete(u))};return{visible:re,uploadMode:xt,openUploadDialog:r,openUploadFolderDialog:s,cancelUpload:w,dropState:Fe,listenDropFile:a,beforeUpload:o,uploadFile:l,uploadProgressInfoSorted:P,uploadProgressInfoStatistics:E,clearALlFinishedUploadFile:()=>{for(let u=V.length-1;u>=0;u--){let h=V[u];h.status==="finished"&&(V.splice(u,1),fe.delete(h.index),ee.delete(h.index))}},removeUploadFileByIndex:$,retryUpload:u=>{console.log("\u91CD\u65B0\u4E0A\u4F20\u6587\u4EF6",u),$(u.index),l(u.file)}}}export{Ba as a,Ne as b,st as c,Pr as d,Kn as e,Lr as f,qn as g,Go as h,_a as i,rt as j,kr as k,xr as l,vo as m,Cr as r,Ar as s,Ce as u};
