import{u as jn,d as Nn,e as _,f as Un,g as Vn,E as j,h as Tt,i as Kn,j as Dt}from"./request.3708b2c4.js";import{d as hn,r as z,c as R,o as mn,ae as Mt,a as F,b as Se,e as qe,Q as Ae,R as Ee,p as M,n as oe,q as qn,k as W,t as Ft,i as Te,g as Hn,f as O,F as Wn,j as He,h as vn,T as bn,Y as bt,m as Gn,ao as It,ap as yn,M as ze,w as Ge,W as Pe,ad as yt,U as Yn,V as Zn,aq as Qn,u as J,S as Xn,ar as Jn,Z as Ye,a3 as ea,a4 as ta,$ as Lt,as as le}from"./index.552205f5.js";import{c as te}from"./common.0f75f163.js";import{E as G}from"./index.11692625.js";import{b as na,d as Me,E as aa,a8 as ra,u as oa,a7 as Ot,_ as la,R as ia,I as at,B as sa,H as ca,F as Bt,a9 as ua}from"./base.d698891e.js";import{v as _t,L as $t}from"./directive.e250a256.js";const da={install(e){e.directive("loading",_t),e.config.globalProperties.$loading=$t},directive:_t,service:$t},wn=["success","info","warning","error"],fa=na({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Me([String,Object]),default:""},id:{type:String,default:""},message:{type:Me([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Me(Function),default:()=>{}},onClose:{type:Me(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...wn,""],default:""},zIndex:{type:Number,default:0}}),ga={destroy:()=>!0},pa=hn({name:"ElNotification",components:{ElIcon:aa,...ra},props:fa,emits:ga,setup(e){const t=oa("notification"),n=z(!1);let a;const o=R(()=>{const f=e.type;return f&&Ot[e.type]?t.m(f):""}),s=R(()=>Ot[e.type]||e.icon||""),r=R(()=>e.position.endsWith("right")?"right":"left"),l=R(()=>e.position.startsWith("top")?"top":"bottom"),i=R(()=>({[l.value]:`${e.offset}px`,zIndex:e.zIndex}));function d(){e.duration>0&&({stop:a}=ia(()=>{n.value&&c()},e.duration))}function u(){a==null||a()}function c(){n.value=!1}function p({code:f}){f===at.delete||f===at.backspace?u():f===at.esc?n.value&&c():d()}return mn(()=>{d(),n.value=!0}),jn(document,"keydown",p),{ns:t,horizontalClass:r,typeClass:o,iconComponent:s,positionStyle:i,visible:n,close:c,clearTimer:u,startTimer:d}}}),ha=["id"],ma=["textContent"],va={key:0},ba=["innerHTML"];function ya(e,t,n,a,o,s){const r=Mt("el-icon"),l=Mt("close");return F(),Se(bn,{name:e.ns.b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[3]||(t[3]=i=>e.$emit("destroy")),persisted:""},{default:qe(()=>[Ae(M("div",{id:e.id,class:oe([e.ns.b(),e.customClass,e.horizontalClass]),style:Te(e.positionStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...i)=>e.clearTimer&&e.clearTimer(...i)),onMouseleave:t[1]||(t[1]=(...i)=>e.startTimer&&e.startTimer(...i)),onClick:t[2]||(t[2]=(...i)=>e.onClick&&e.onClick(...i))},[e.iconComponent?(F(),Se(r,{key:0,class:oe([e.ns.e("icon"),e.typeClass])},{default:qe(()=>[(F(),Se(qn(e.iconComponent)))]),_:1},8,["class"])):W("v-if",!0),M("div",{class:oe(e.ns.e("group"))},[M("h2",{class:oe(e.ns.e("title")),textContent:Ft(e.title)},null,10,ma),Ae(M("div",{class:oe(e.ns.e("content")),style:Te(e.title?void 0:{margin:0})},[Hn(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(F(),O(Wn,{key:1},[W(" Caution here, message could've been compromized, nerver use user's input as message "),W(" eslint-disable-next-line "),M("p",{innerHTML:e.message},null,8,ba)],2112)):(F(),O("p",va,Ft(e.message),1))])],6),[[Ee,e.message]]),e.showClose?(F(),Se(r,{key:0,class:oe(e.ns.e("closeBtn")),onClick:He(e.close,["stop"])},{default:qe(()=>[vn(l)]),_:1},8,["class","onClick"])):W("v-if",!0)],2)],46,ha),[[Ee,e.visible]])]),_:3},8,["name","onBeforeLeave"])}var wa=la(pa,[["render",ya],["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const Ze={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},wt=16;let Sa=1;const fe=function(e={},t=null){if(!sa)return{close:()=>{}};(typeof e=="string"||bt(e))&&(e={message:e});const n=e.position||"top-right";let a=e.offset||0;Ze[n].forEach(({vm:c})=>{var p;a+=(((p=c.el)==null?void 0:p.offsetHeight)||0)+wt}),a+=wt;const{nextZIndex:o}=ca(),s=`notification_${Sa++}`,r=e.onClose,l={zIndex:o(),offset:a,...e,id:s,onClose:()=>{Ca(s,n,r)}};let i=document.body;Bt(e.appendTo)?i=e.appendTo:Gn(e.appendTo)&&(i=document.querySelector(e.appendTo)),Bt(i)||(i=document.body);const d=document.createElement("div"),u=vn(wa,l,bt(l.message)?{default:()=>l.message}:null);return u.appContext=t!=null?t:fe._context,u.props.onDestroy=()=>{It(null,d)},It(u,d),Ze[n].push({vm:u}),i.appendChild(d.firstElementChild),{close:()=>{u.component.proxy.visible=!1}}};wn.forEach(e=>{fe[e]=(t={})=>((typeof t=="string"||bt(t))&&(t={message:t}),fe({...t,type:e}))});function Ca(e,t,n){const a=Ze[t],o=a.findIndex(({vm:d})=>{var u;return((u=d.component)==null?void 0:u.props.id)===e});if(o===-1)return;const{vm:s}=a[o];if(!s)return;n==null||n(s);const r=s.el.offsetHeight,l=t.split("-")[0];a.splice(o,1);const i=a.length;if(!(i<1))for(let d=o;d<i;d++){const{el:u,component:c}=a[d].vm,p=Number.parseInt(u.style[l],10)-r-wt;c.props.offset=p}}function ka(){for(const e of Object.values(Ze))e.forEach(({vm:t})=>{t.component.proxy.visible=!1})}fe.closeAll=ka;fe._context=null;const xa=ua(fe,"$notify"),{width:jt,height:Aa}=Nn();function Ea(){const e=R(()=>jt.value<768),t=R(()=>jt.value>=768),n=r=>{if(a(r))return"";let l="",i=-1;for(let d=0;d<r.length;d++){const u=r.charAt(d);if(u==="/"){if(i<d){let c=r.substring(i+1,d);l+=encodeURIComponent(c),i=d}l+=u}if(d===r.length-1&&i<d){let c=r.substring(i+1,d+1);l+=encodeURIComponent(c)}}return l},a=r=>r==null||r==="";return{isMobile:e,isNotMobile:t,height:Aa,encodeAllIgnoreSlashes:n,strIsEmpty:a,strIsNotEmpty:r=>!a(r),removeDuplicateSeparator:r=>{let l="";r.indexOf("http://")===0?l="http://":r.indexOf("https://")===0&&(l="https://");for(let i=l.length;i<r.length-1;i++){let d=r.charAt(i),u=r.charAt(i+1);d==="/"&&u==="/"||(l+=d)}return l+=r.charAt(r.length-1),l}}}const H=z([]);let Sn=null,Fe=R(()=>Sn.proxy.$refs.fileTableRef);function et(e){e&&(Sn=e);const t=()=>{Fe.value.clearSelection()},n=(c,p)=>{(c==null?void 0:c.type)!=="BACK"&&Fe.value.toggleRowSelection(c,p)},a=()=>{Fe.value.toggleAllSelection()},o=c=>c.type==="FILE"||c.type==="FOLDER",s=R(()=>H.value.length>0?H.value[H.value.length-1]:null),r=R(()=>H.value.filter(c=>c.type==="FILE")),l=R(()=>H.value.filter(c=>c.type==="FOLDER")),i=c=>{H.value=c},d=({row:c,rowIndex:p})=>(c.index=p,H.value.indexOf(c)!==-1?"select-row":""),u=R(()=>{let c=H.value.length,p=r.value.length,f=l.value.length,h=c===1,g=c>1;return{isSingleSelect:h,isMultiSelect:g,isAllFile:p===c,isAllFolder:f===c}});return{checkSelectable:o,tableRowClassName:d,selectRowsChange:i,selectRow:s,selectRows:H,selectFiles:r,selectFolders:l,selectStatistics:u,tableRef:Fe,clearSelection:t,toggleRowSelection:n,toggleAllSelection:a}}let{selectStatistics:ae}=et();const De=yn("storageConfigStore",{state:()=>({globalConfig:{siteName:"",directLinkPrefix:"",infoEnable:!1,showLinkBtn:!1,recordDownloadLog:!1,showShortLink:!1,showPathLink:!1,tableSize:"small",rootShowStorage:!0,fileClickMode:"dbclick",showDocument:!1,debugMode:!1,domain:"",icp:"123",avatar:"",announcement:"",layout:"full",showAnnouncement:!1,searchEnable:!1,showLogin:!1},folderConfig:{readmeText:null,readmeDisplayMode:null,defaultSwitchToImgMode:!1,enableFileOperator:!1}}),getters:{permission:e=>({open:ae.value.isSingleSelect&&ae.value.isAllFolder,preview:ae.value.isAllFile&&ae.value.isSingleSelect,download:ae.value.isAllFile,link:ae.value.isAllFile&&e.globalConfig.showLinkBtn&&(e.globalConfig.showShortLink||e.globalConfig.showPathLink),rename:e.folderConfig.enableFileOperator&&ae.value.isSingleSelect,delete:e.folderConfig.enableFileOperator,newFolder:e.folderConfig.enableFileOperator,upload:e.folderConfig.enableFileOperator,pathLink:e.globalConfig.showPathLink,shortLink:e.globalConfig.showShortLink})},actions:{updateGlobalConfig(e){this.globalConfig=e},updateFolderConfig(e){this.folderConfig=e}}}),go=e=>_({url:"/api/site/reset-password",method:"get",data:e}),Ta=e=>_({url:"/api/storage/list",method:"get",data:e}),ge=yn("fileDataStore",{state:()=>({currentClickRow:{},currentRightClickRow:{},currentStorageSource:{id:null,type:{description:"",key:""}},imgMode:!1,newImgMode:!1,oldStorageKey:null,searchParam:"",fileListSource:[],audioArray:[],audioIndex:0}),getters:{filterFileByType:e=>t=>e.fileListSource.filter(function(n){if(n.type==="BACK")return!1;let a=n.name,o=a.substr(a.lastIndexOf(".")+1).toLowerCase();return te.constant.fileTypeMap[t].indexOf(o)!==-1}),fileList:e=>{let t=e.fileListSource;return t.forEach(n=>{if(n.icon||(n.icon=te.getFileIconName(n)),n.preview!==null){var a=te.getFileType(n.name);a?(n.fileType=a,n.preview=te.constant.previewFileType.indexOf(a)!==-1):n.preview=!1}}),t}},actions:{updateCurrentStorageSource(e){this.currentStorageSource=e},updateAudioIndex(e){this.audioIndex=e},updateAudioList(e){this.audioArray=e},updateCurrentClickRow(e){this.currentClickRow=e},updateCurrentRightClickRow(e){this.currentRightClickRow=e},updateFileList(e){this.fileListSource=e},updateOldStorageKey(e){this.oldStorageKey=e}}});let Nt=ge(),Ut=De(),{routerRef:rt,fullpath:La,storageKey:Ie}=ze(),Y=z([]),he=z(),Vt=!1;function Pa(){let e=Ut.globalConfig.rootShowStorage,t=()=>new Promise(l=>{Ta().then(i=>{if(Y.value=i.data,Y.value.length===0){G.confirm("\u5F53\u524D\u65E0\u53EF\u7528\u5B58\u50A8\u6E90\uFF0C\u662F\u5426\u8DF3\u8F6C\u81F3\u7BA1\u7406\u5458\u9875\u9762\u6DFB\u52A0\u5B58\u50A8\u6E90\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"info",callback:d=>{d==="confirm"&&rt.value.push("/login")}});return}n(e),l(i)})});const n=l=>{Ie.value?r(Ie.value)?he.value=Ie.value:s():l?(Nt.updateFileList(a.value),document.title=Ut.globalConfig.siteName+" | \u9996\u9875"):s(),o()},a=R(()=>{let l=[];return Y.value.forEach(i=>{l.push({name:i.name,path:i.key,size:0,time:"-",type:"ROOT"})}),l}),o=()=>{Y.value.some(l=>{l.key===he.value&&Nt.updateCurrentStorageSource(l)})};Vt||(Ge(()=>he.value,(l,i)=>{(l&&!La.value||i!==void 0)&&(rt.value.push("/"+l),o())}),Ge(()=>Ie.value,l=>{n(!0)}),Vt=!0);const s=()=>{if(Y.value.length>0){let l=Y.value[0].key;he.value=l,rt.value.push("/"+l)}},r=l=>Y.value.find(i=>{if(i.key==l)return i});return{loadStorageSourceList:t,storageList:Y,findStorageByKey:r,currentStorageKey:he,storageListAsFileList:a}}var Re={};Object.defineProperty(Re,"__esModule",{value:!0});var Qe=Re.removeDuplicateSlashes=Re.transform=void 0;const Ra=/(?!^)\/{2,}/g;function za(e){return e.map(t=>Cn(t))}Re.transform=za;function Cn(e){return e.replace(Ra,"/")}Qe=Re.removeDuplicateSlashes=Cn;const Da=e=>_({url:"/api/file/operator/mkdir",method:"post",data:e}),Ma=e=>_({url:"/api/file/operator/delete/file",method:"post",data:e}),Fa=e=>_({url:"/api/file/operator/delete/folder",method:"post",data:e}),Ia=e=>_({url:"/api/file/operator/rename/file",method:"post",data:e}),Oa=e=>_({url:"/api/file/operator/rename/folder",method:"post",data:e}),Ba=e=>_({url:"/api/file/operator/upload/file",method:"post",data:e});function U(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Kt(e,t){for(var n="",a=0,o=-1,s=0,r,l=0;l<=e.length;++l){if(l<e.length)r=e.charCodeAt(l);else{if(r===47)break;r=47}if(r===47){if(!(o===l-1||s===1))if(o!==l-1&&s===2){if(n.length<2||a!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var i=n.lastIndexOf("/");if(i!==n.length-1){i===-1?(n="",a=0):(n=n.slice(0,i),a=n.length-1-n.lastIndexOf("/")),o=l,s=0;continue}}else if(n.length===2||n.length===1){n="",a=0,o=l,s=0;continue}}t&&(n.length>0?n+="/..":n="..",a=2)}else n.length>0?n+="/"+e.slice(o+1,l):n=e.slice(o+1,l),a=l-o-1;o=l,s=0}else r===46&&s!==-1?++s:s=-1}return n}function _a(e,t){var n=t.dir||t.root,a=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+a:n+e+a:a}var de={resolve:function(){for(var t="",n=!1,a,o=arguments.length-1;o>=-1&&!n;o--){var s;o>=0?s=arguments[o]:(a===void 0&&(a=process.cwd()),s=a),U(s),s.length!==0&&(t=s+"/"+t,n=s.charCodeAt(0)===47)}return t=Kt(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(U(t),t.length===0)return".";var n=t.charCodeAt(0)===47,a=t.charCodeAt(t.length-1)===47;return t=Kt(t,!n),t.length===0&&!n&&(t="."),t.length>0&&a&&(t+="/"),n?"/"+t:t},isAbsolute:function(t){return U(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,n=0;n<arguments.length;++n){var a=arguments[n];U(a),a.length>0&&(t===void 0?t=a:t+="/"+a)}return t===void 0?".":de.normalize(t)},relative:function(t,n){if(U(t),U(n),t===n||(t=de.resolve(t),n=de.resolve(n),t===n))return"";for(var a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var o=t.length,s=o-a,r=1;r<n.length&&n.charCodeAt(r)===47;++r);for(var l=n.length,i=l-r,d=s<i?s:i,u=-1,c=0;c<=d;++c){if(c===d){if(i>d){if(n.charCodeAt(r+c)===47)return n.slice(r+c+1);if(c===0)return n.slice(r+c)}else s>d&&(t.charCodeAt(a+c)===47?u=c:c===0&&(u=0));break}var p=t.charCodeAt(a+c),f=n.charCodeAt(r+c);if(p!==f)break;p===47&&(u=c)}var h="";for(c=a+u+1;c<=o;++c)(c===o||t.charCodeAt(c)===47)&&(h.length===0?h+="..":h+="/..");return h.length>0?h+n.slice(r+u):(r+=u,n.charCodeAt(r)===47&&++r,n.slice(r))},_makeLong:function(t){return t},dirname:function(t){if(U(t),t.length===0)return".";for(var n=t.charCodeAt(0),a=n===47,o=-1,s=!0,r=t.length-1;r>=1;--r)if(n=t.charCodeAt(r),n===47){if(!s){o=r;break}}else s=!1;return o===-1?a?"/":".":a&&o===1?"//":t.slice(0,o)},basename:function(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');U(t);var a=0,o=-1,s=!0,r;if(n!==void 0&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var l=n.length-1,i=-1;for(r=t.length-1;r>=0;--r){var d=t.charCodeAt(r);if(d===47){if(!s){a=r+1;break}}else i===-1&&(s=!1,i=r+1),l>=0&&(d===n.charCodeAt(l)?--l===-1&&(o=r):(l=-1,o=i))}return a===o?o=i:o===-1&&(o=t.length),t.slice(a,o)}else{for(r=t.length-1;r>=0;--r)if(t.charCodeAt(r)===47){if(!s){a=r+1;break}}else o===-1&&(s=!1,o=r+1);return o===-1?"":t.slice(a,o)}},extname:function(t){U(t);for(var n=-1,a=0,o=-1,s=!0,r=0,l=t.length-1;l>=0;--l){var i=t.charCodeAt(l);if(i===47){if(!s){a=l+1;break}continue}o===-1&&(s=!1,o=l+1),i===46?n===-1?n=l:r!==1&&(r=1):n!==-1&&(r=-1)}return n===-1||o===-1||r===0||r===1&&n===o-1&&n===a+1?"":t.slice(n,o)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return _a("/",t)},parse:function(t){U(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var a=t.charCodeAt(0),o=a===47,s;o?(n.root="/",s=1):s=0;for(var r=-1,l=0,i=-1,d=!0,u=t.length-1,c=0;u>=s;--u){if(a=t.charCodeAt(u),a===47){if(!d){l=u+1;break}continue}i===-1&&(d=!1,i=u+1),a===46?r===-1?r=u:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||i===-1||c===0||c===1&&r===i-1&&r===l+1?i!==-1&&(l===0&&o?n.base=n.name=t.slice(1,i):n.base=n.name=t.slice(l,i)):(l===0&&o?(n.name=t.slice(1,r),n.base=t.slice(1,i)):(n.name=t.slice(l,r),n.base=t.slice(l,i)),n.ext=t.slice(r,i)),l>0?n.dir=t.slice(0,l-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};de.posix=de;var Oe=de;const $a=e=>_({url:"/api/storage/files",method:"post",data:e,config:{showDefaultMsg:!1}}),po=e=>_({url:"/api/storage/file/item",method:"post",data:e,config:{responseIntercept:!1,showDefaultMsg:!1}}),ho=()=>_({url:"/api/site/config/global",method:"get"}),ja=e=>_({url:"/api/site/config/storage",method:"post",data:e}),mo=e=>_({url:"/api/short-link",method:"get",data:e}),Na=typeof process=="object"&&process&&process.platform==="win32";var Ua=Na?{sep:"\\"}:{sep:"/"},Va=kn;function kn(e,t,n){e instanceof RegExp&&(e=qt(e,n)),t instanceof RegExp&&(t=qt(t,n));var a=xn(e,t,n);return a&&{start:a[0],end:a[1],pre:n.slice(0,a[0]),body:n.slice(a[0]+e.length,a[1]),post:n.slice(a[1]+t.length)}}function qt(e,t){var n=t.match(e);return n?n[0]:null}kn.range=xn;function xn(e,t,n){var a,o,s,r,l,i=n.indexOf(e),d=n.indexOf(t,i+1),u=i;if(i>=0&&d>0){if(e===t)return[i,d];for(a=[],s=n.length;u>=0&&!l;)u==i?(a.push(u),i=n.indexOf(e,u+1)):a.length==1?l=[a.pop(),d]:(o=a.pop(),o<s&&(s=o,r=d),d=n.indexOf(t,u+1)),u=i<d&&i>=0?i:d;a.length&&(l=[s,r])}return l}var An=Va,Ka=Wa,En="\0SLASH"+Math.random()+"\0",Tn="\0OPEN"+Math.random()+"\0",Pt="\0CLOSE"+Math.random()+"\0",Ln="\0COMMA"+Math.random()+"\0",Pn="\0PERIOD"+Math.random()+"\0";function ot(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function qa(e){return e.split("\\\\").join(En).split("\\{").join(Tn).split("\\}").join(Pt).split("\\,").join(Ln).split("\\.").join(Pn)}function Ha(e){return e.split(En).join("\\").split(Tn).join("{").split(Pt).join("}").split(Ln).join(",").split(Pn).join(".")}function Rn(e){if(!e)return[""];var t=[],n=An("{","}",e);if(!n)return e.split(",");var a=n.pre,o=n.body,s=n.post,r=a.split(",");r[r.length-1]+="{"+o+"}";var l=Rn(s);return s.length&&(r[r.length-1]+=l.shift(),r.push.apply(r,l)),t.push.apply(t,r),t}function Wa(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Ce(qa(e),!0).map(Ha)):[]}function Ga(e){return"{"+e+"}"}function Ya(e){return/^-?0\d/.test(e)}function Za(e,t){return e<=t}function Qa(e,t){return e>=t}function Ce(e,t){var n=[],a=An("{","}",e);if(!a)return[e];var o=a.pre,s=a.post.length?Ce(a.post,!1):[""];if(/\$$/.test(a.pre))for(var r=0;r<s.length;r++){var l=o+"{"+a.body+"}"+s[r];n.push(l)}else{var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(a.body),d=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(a.body),u=i||d,c=a.body.indexOf(",")>=0;if(!u&&!c)return a.post.match(/,.*\}/)?(e=a.pre+"{"+a.body+Pt+a.post,Ce(e)):[e];var p;if(u)p=a.body.split(/\.\./);else if(p=Rn(a.body),p.length===1&&(p=Ce(p[0],!1).map(Ga),p.length===1))return s.map(function(k){return a.pre+p[0]+k});var f;if(u){var h=ot(p[0]),g=ot(p[1]),C=Math.max(p[0].length,p[1].length),b=p.length==3?Math.abs(ot(p[2])):1,S=Za,m=g<h;m&&(b*=-1,S=Qa);var v=p.some(Ya);f=[];for(var w=h;S(w,g);w+=b){var x;if(d)x=String.fromCharCode(w),x==="\\"&&(x="");else if(x=String(w),v){var L=C-x.length;if(L>0){var P=new Array(L+1).join("0");w<0?x="-"+P+x.slice(1):x=P+x}}f.push(x)}}else{f=[];for(var y=0;y<p.length;y++)f.push.apply(f,Ce(p[y],!1))}for(var y=0;y<f.length;y++)for(var r=0;r<s.length;r++){var l=o+f[y]+s[r];(!t||u||l)&&n.push(l)}}return n}const B=zn=(e,t,n={})=>(Xe(t),!n.nocomment&&t.charAt(0)==="#"?!1:new tt(t,n).match(e));var zn=B;const St=Ua;B.sep=St.sep;const N=Symbol("globstar **");B.GLOBSTAR=N;const Xa=Ka,Ht={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Ct="[^/]",lt=Ct+"*?",Ja="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",er="(?:(?!(?:\\/|^)\\.).)*?",Dn=e=>e.split("").reduce((t,n)=>(t[n]=!0,t),{}),Wt=Dn("().*{}+?[]^$\\!"),tr=Dn("[.("),Gt=/\/+/;B.filter=(e,t={})=>(n,a,o)=>B(n,e,t);const Z=(e,t={})=>{const n={};return Object.keys(e).forEach(a=>n[a]=e[a]),Object.keys(t).forEach(a=>n[a]=t[a]),n};B.defaults=e=>{if(!e||typeof e!="object"||!Object.keys(e).length)return B;const t=B,n=(a,o,s)=>t(a,o,Z(e,s));return n.Minimatch=class extends t.Minimatch{constructor(o,s){super(o,Z(e,s))}},n.Minimatch.defaults=a=>t.defaults(Z(e,a)).Minimatch,n.filter=(a,o)=>t.filter(a,Z(e,o)),n.defaults=a=>t.defaults(Z(e,a)),n.makeRe=(a,o)=>t.makeRe(a,Z(e,o)),n.braceExpand=(a,o)=>t.braceExpand(a,Z(e,o)),n.match=(a,o,s)=>t.match(a,o,Z(e,s)),n};B.braceExpand=(e,t)=>Mn(e,t);const Mn=(e,t={})=>(Xe(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Xa(e)),nr=1024*64,Xe=e=>{if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>nr)throw new TypeError("pattern is too long")},Be=Symbol("subparse");B.makeRe=(e,t)=>new tt(e,t||{}).makeRe();B.match=(e,t,n={})=>{const a=new tt(t,n);return e=e.filter(o=>a.match(o)),a.options.nonull&&!e.length&&e.push(t),e};const ar=e=>e.replace(/\\(.)/g,"$1"),rr=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class tt{constructor(t,n){Xe(t),n||(n={}),this.options=n,this.set=[],this.pattern=t,this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.make()}debug(){}make(){const t=this.pattern,n=this.options;if(!n.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();let a=this.globSet=this.braceExpand();n.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,a),a=this.globParts=a.map(o=>o.split(Gt)),this.debug(this.pattern,a),a=a.map((o,s,r)=>o.map(this.parse,this)),this.debug(this.pattern,a),a=a.filter(o=>o.indexOf(!1)===-1),this.debug(this.pattern,a),this.set=a}parseNegate(){if(this.options.nonegate)return;const t=this.pattern;let n=!1,a=0;for(let o=0;o<t.length&&t.charAt(o)==="!";o++)n=!n,a++;a&&(this.pattern=t.substr(a)),this.negate=n}matchOne(t,n,a){var o=this.options;this.debug("matchOne",{this:this,file:t,pattern:n}),this.debug("matchOne",t.length,n.length);for(var s=0,r=0,l=t.length,i=n.length;s<l&&r<i;s++,r++){this.debug("matchOne loop");var d=n[r],u=t[s];if(this.debug(n,d,u),d===!1)return!1;if(d===N){this.debug("GLOBSTAR",[n,d,u]);var c=s,p=r+1;if(p===i){for(this.debug("** at the end");s<l;s++)if(t[s]==="."||t[s]===".."||!o.dot&&t[s].charAt(0)===".")return!1;return!0}for(;c<l;){var f=t[c];if(this.debug(`
globstar while`,t,c,n,p,f),this.matchOne(t.slice(c),n.slice(p),a))return this.debug("globstar found match!",c,l,f),!0;if(f==="."||f===".."||!o.dot&&f.charAt(0)==="."){this.debug("dot detected!",t,c,n,p);break}this.debug("globstar swallow a segment, and continue"),c++}return!!(a&&(this.debug(`
>>> no match, partial?`,t,c,n,p),c===l))}var h;if(typeof d=="string"?(h=u===d,this.debug("string match",d,u,h)):(h=u.match(d),this.debug("pattern match",d,u,h)),!h)return!1}if(s===l&&r===i)return!0;if(s===l)return a;if(r===i)return s===l-1&&t[s]==="";throw new Error("wtf?")}braceExpand(){return Mn(this.pattern,this.options)}parse(t,n){Xe(t);const a=this.options;if(t==="**")if(a.noglobstar)t="*";else return N;if(t==="")return"";let o="",s=!!a.nocase,r=!1;const l=[],i=[];let d,u=!1,c=-1,p=-1,f,h,g;const C=t.charAt(0)==="."?"":a.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=()=>{if(d){switch(d){case"*":o+=lt,s=!0;break;case"?":o+=Ct,s=!0;break;default:o+="\\"+d;break}this.debug("clearStateChar %j %j",d,o),d=!1}};for(let v=0,w;v<t.length&&(w=t.charAt(v));v++){if(this.debug("%s	%s %s %j",t,v,o,w),r){if(w==="/")return!1;Wt[w]&&(o+="\\"),o+=w,r=!1;continue}switch(w){case"/":return!1;case"\\":b(),r=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,v,o,w),u){this.debug("  in class"),w==="!"&&v===p+1&&(w="^"),o+=w;continue}this.debug("call clearStateChar %j",d),b(),d=w,a.noext&&b();continue;case"(":if(u){o+="(";continue}if(!d){o+="\\(";continue}l.push({type:d,start:v-1,reStart:o.length,open:Ht[d].open,close:Ht[d].close}),o+=d==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",d,o),d=!1;continue;case")":if(u||!l.length){o+="\\)";continue}b(),s=!0,h=l.pop(),o+=h.close,h.type==="!"&&i.push(h),h.reEnd=o.length;continue;case"|":if(u||!l.length){o+="\\|";continue}b(),o+="|";continue;case"[":if(b(),u){o+="\\"+w;continue}u=!0,p=v,c=o.length,o+=w;continue;case"]":if(v===p+1||!u){o+="\\"+w;continue}f=t.substring(p+1,v);try{RegExp("["+f+"]")}catch{g=this.parse(f,Be),o=o.substr(0,c)+"\\["+g[0]+"\\]",s=s||g[1],u=!1;continue}s=!0,u=!1,o+=w;continue;default:b(),Wt[w]&&!(w==="^"&&u)&&(o+="\\"),o+=w;break}}for(u&&(f=t.substr(p+1),g=this.parse(f,Be),o=o.substr(0,c)+"\\["+g[0],s=s||g[1]),h=l.pop();h;h=l.pop()){let v;v=o.slice(h.reStart+h.open.length),this.debug("setting tail",o,h),v=v.replace(/((?:\\{2}){0,64})(\\?)\|/g,(x,L,P)=>(P||(P="\\"),L+L+P+"|")),this.debug(`tail=%j
   %s`,v,v,h,o);const w=h.type==="*"?lt:h.type==="?"?Ct:"\\"+h.type;s=!0,o=o.slice(0,h.reStart)+w+"\\("+v}b(),r&&(o+="\\\\");const S=tr[o.charAt(0)];for(let v=i.length-1;v>-1;v--){const w=i[v],x=o.slice(0,w.reStart),L=o.slice(w.reStart,w.reEnd-8);let P=o.slice(w.reEnd);const y=o.slice(w.reEnd-8,w.reEnd)+P,k=x.split("(").length-1;let A=P;for(let E=0;E<k;E++)A=A.replace(/\)[+*?]?/,"");P=A;const T=P===""&&n!==Be?"$":"";o=x+L+P+T+y}if(o!==""&&s&&(o="(?=.)"+o),S&&(o=C+o),n===Be)return[o,s];if(!s)return ar(t);const m=a.nocase?"i":"";try{return Object.assign(new RegExp("^"+o+"$",m),{_glob:t,_src:o})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const n=this.options,a=n.noglobstar?lt:n.dot?Ja:er,o=n.nocase?"i":"";let s=t.map(r=>(r=r.map(l=>typeof l=="string"?rr(l):l===N?N:l._src).reduce((l,i)=>(l[l.length-1]===N&&i===N||l.push(i),l),[]),r.forEach((l,i)=>{l!==N||r[i-1]===N||(i===0?r.length>1?r[i+1]="(?:\\/|"+a+"\\/)?"+r[i+1]:r[i]=a:i===r.length-1?r[i-1]+="(?:\\/|"+a+")?":(r[i-1]+="(?:\\/|\\/"+a+"\\/)"+r[i+1],r[i+1]=N))}),r.filter(l=>l!==N).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,o)}catch{this.regexp=!1}return this.regexp}match(t,n=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&n)return!0;const a=this.options;St.sep!=="/"&&(t=t.split(St.sep).join("/")),t=t.split(Gt),this.debug(this.pattern,"split",t);const o=this.set;this.debug(this.pattern,"set",o);let s;for(let r=t.length-1;r>=0&&(s=t[r],!s);r--);for(let r=0;r<o.length;r++){const l=o[r];let i=t;if(a.matchBase&&l.length===1&&(i=[s]),this.matchOne(i,l,n))return a.flipNegate?!0:!this.negate}return a.flipNegate?!1:this.negate}static defaults(t){return B.defaults(t).Minimatch}}B.Minimatch=tt;var or=zn;let{storageKey:_e,currentPath:lr}=ze();const ie=Un("zfile-pwd-cache",{});function ir(){return{putPathPwd:(n,a)=>{n&&(ie.value[_e.value]||(ie.value[_e.value]={}),ie.value[_e.value][n]=a)},getPathPwd:()=>{for(let n of Object.keys(ie.value))if(n===_e.value){for(let a of Object.keys(ie.value[n]))if(or(lr.value,a))return ie.value[n][a]}return""}}}const Rt=typeof window!="undefined",it=()=>{};function sr(e,t=200,n={}){return function(a,o){return function(...s){a(()=>o.apply(this,s),{fn:o,thisArg:this,args:s})}}(function(a,o={}){let s,r;return l=>{const i=J(a),d=J(o.maxWait);if(s&&clearTimeout(s),i<=0||d!==void 0&&d<=0)return r&&(clearTimeout(r),r=null),l();d&&!r&&(r=setTimeout(()=>{s&&clearTimeout(s),r=null,l()},d)),s=setTimeout(()=>{r&&clearTimeout(r),r=null,l()},i)}}(t,n),e)}var cr=Object.defineProperty,ur=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,Yt=Object.getOwnPropertySymbols,fr=Object.prototype.hasOwnProperty,gr=Object.prototype.propertyIsEnumerable,Zt=(e,t,n)=>t in e?cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pr=(e,t)=>{for(var n in t||(t={}))fr.call(t,n)&&Zt(e,n,t[n]);if(Yt)for(var n of Yt(t))gr.call(t,n)&&Zt(e,n,t[n]);return e};const zt=Rt?window:void 0;function Le(...e){let t,n,a,o;if(typeof e[0]=="string"?([n,a,o]=e,t=zt):[t,n,a,o]=e,!t)return it;let s=it;const r=Ge(()=>function(d){var u;const c=J(d);return(u=c==null?void 0:c.$el)!=null?u:c}(t),d=>{s(),d&&(d.addEventListener(n,a,o),s=()=>{d.removeEventListener(n,a,o),s=it})},{immediate:!0,flush:"post"}),l=()=>{r(),s()};var i;return i=l,ea()&&ta(i),l}function hr(e,t,n={}){const{target:a=zt,eventName:o="keydown",passive:s=!1}=n,r=typeof(l=e)=="function"?l:typeof l=="string"?i=>i.key===l:Array.isArray(l)?i=>l.includes(i.key):l?()=>!0:()=>!1;var l;return Le(a,o,i=>{r(i)&&t(i)},s)}const st=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ct="__vueuse_ssr_handlers__";st[ct]=st[ct]||{},st[ct];var Qt,Xt,mr=Object.defineProperty,vr=Object.defineProperties,br=Object.getOwnPropertyDescriptors,Jt=Object.getOwnPropertySymbols,yr=Object.prototype.hasOwnProperty,wr=Object.prototype.propertyIsEnumerable,en=(e,t,n)=>t in e?mr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function Sr(e,t={}){var n,a;const o=(n=t.draggingElement)!=null?n:zt,s=z((a=t.initialValue)!=null?a:{x:0,y:0}),r=z(),l=f=>!t.pointerTypes||t.pointerTypes.includes(f.pointerType),i=f=>{J(t.preventDefault)&&f.preventDefault(),J(t.stopPropagation)&&f.stopPropagation()},d=f=>{var h;l(f)&&r.value&&(s.value={x:f.pageX-r.value.x,y:f.pageY-r.value.y},(h=t.onMove)==null||h.call(t,s.value,f),i(f))},u=f=>{var h;l(f)&&r.value&&(r.value=void 0,(h=t.onEnd)==null||h.call(t,s.value,f),i(f))};return Rt&&(Le(e,"pointerdown",f=>{var h;if(!l(f)||J(t.exact)&&f.target!==J(e))return;const g=J(e).getBoundingClientRect(),C={x:f.pageX-g.left,y:f.pageY-g.top};((h=t.onStart)==null?void 0:h.call(t,C,f))!==!1&&(r.value=C,i(f))},!0),Le(o,"pointermove",d,!0),Le(o,"pointerup",u,!0)),c=((f,h)=>{for(var g in h||(h={}))yr.call(h,g)&&en(f,g,h[g]);if(Jt)for(var g of Jt(h))wr.call(h,g)&&en(f,g,h[g]);return f})({},function(f){if(!Xn(f))return yt(f);const h=Array.isArray(f.value)?new Array(f.value.length):{};for(const g in f.value)h[g]=Jn(()=>({get:()=>f.value[g],set(C){if(Array.isArray(f.value)){const S=[...f.value];S[g]=C,f.value=S}else f.value=(b=pr({},f.value),ur(b,dr({[g]:C})));var b}}));return h}(s)),p={position:s,isDragging:R(()=>!!r.value),style:R(()=>`left:${s.value.x}px;top:${s.value.y}px;`)},vr(c,br(p));var c,p}Rt&&(window==null?void 0:window.navigator)&&((Qt=window==null?void 0:window.navigator)==null?void 0:Qt.platform)&&/iP(ad|hone|od)/.test((Xt=window==null?void 0:window.navigator)==null?void 0:Xt.platform);const Cr=["a","s","d","w","q","e","A","S","D","W","Q","E","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Escape"," "];var Je=hn({name:"V3ImgPreview",props:{showToolbar:{type:Boolean,default:!0},showArrowBtn:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},url:{type:String,default:void 0},escClose:{type:Boolean,default:!0},images:{type:Array,default:()=>[]},showCloseBtn:{type:Boolean,default:!0},index:{type:Number,default:0},on_unmount_v3_ima_preview_app:{type:Function}},setup(e,t){let{emit:n}=t;const a=z(null),o=z(null),{style:s}=Sr(o),r=Pe({visible:!0,imgState:"loading",src:"",imgIndex:e.index}),l=R(()=>{var m;return((m=e.images)===null||m===void 0?void 0:m.length)>1&&e.showArrowBtn}),i=Pe({imgScale:1,imgRotate:0}),d=R(()=>{var m;return((m=e.images)===null||m===void 0?void 0:m.length)>1}),u=sr(m=>{if(!e.keyboard)return!1;m.preventDefault();const{key:v}=m;return["s","S","ArrowDown"].includes(v)?f(-.1,!1):["w","W","ArrowUp"].includes(v)?f(.1,!1):v===" "?c():v==="Escape"&&e.escClose?b():["E","e"].includes(v)?p(!0):["Q","q"].includes(v)?p(!1):["a","A","ArrowLeft"].includes(v)?S(!1):["d","D","ArrowRight"].includes(v)?S(!0):void 0},200);hr(Cr,u);const c=()=>{i.imgScale=1,i.imgRotate=0,o.value.style.top="0",o.value.style.left="0"};function p(m){i.imgRotate+=90*(m?1:-1)}function f(m){let v=arguments.length>1&&arguments[1]!==void 0&&arguments[1];i.imgScale<=.2&&m<0||(v?i.imgScale=m:i.imgScale+=m)}function h(m){m.preventDefault(),f(m.deltaY<0?.05:-.05)}function g(m){r.imgState="loading",(v=>{const w=new Image;return w.src=v,new Promise((x,L)=>{w.onload=()=>{x(v)},w.onerror=()=>{L(v)}})})(m).then(()=>{r.imgState="success",r.src=m,c()}).catch(()=>{r.imgState="error"})}function C(){Ye(()=>{Le(a.value,"mousewheel",h,!1),c(),Ye(()=>e.url!==void 0?g(e.url):Array.isArray(e.images)&&e.images.length>0?g(e.images[r.imgIndex]):console.error("images is not Array or Array length is 0"))})}function b(){var m;r.visible=!1,n("close"),(m=e.on_unmount_v3_ima_preview_app)===null||m===void 0||m.call(e)}function S(m){d.value&&(m?(r.imgIndex++,r.imgIndex>e.images.length-1&&(r.imgIndex=0)):(r.imgIndex--,r.imgIndex<0&&(r.imgIndex=e.images.length-1)),g(e.images[r.imgIndex]))}return mn(()=>{window.__V3__IMG__PREVIEW__LOAD__ICON__SVG__||function(m){m.__V3__IMG__PREVIEW__LOAD__ICON__SVG__=!0;var v,w,x,L,P,y='<svg><symbol id="v3-img-close" viewBox="0 0 1045 1024"><path d="M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z"  ></path></symbol><symbol id="v3-img-img-error" viewBox="0 0 1024 1024"><path d="M704 328a72 72 0 1 0 144 0 72 72 0 1 0-144 0z"  ></path><path d="M999.904 116.608a32 32 0 0 0-21.952-10.912L521.76 73.792a31.552 31.552 0 0 0-27.2 11.904l-92.192 114.848a32 32 0 0 0 0.672 40.896l146.144 169.952-147.456 194.656 36.48-173.376a32 32 0 0 0-11.136-31.424L235.616 245.504l79.616-125.696a32 32 0 0 0-29.28-49.024L45.76 87.552a32 32 0 0 0-29.696 34.176l55.808 798.016a32.064 32.064 0 0 0 34.304 29.696l176.512-13.184c17.632-1.312 30.848-16.672 29.504-34.272s-16.576-31.04-34.304-29.536L133.44 883.232l-6.432-92.512 125.312-12.576a32 32 0 0 0 28.672-35.04 32.16 32.16 0 0 0-35.04-28.672L122.56 726.848 82.144 149.184l145.152-10.144-60.96 96.224a32 32 0 0 0 6.848 41.952l198.4 161.344-58.752 279.296a30.912 30.912 0 0 0 0.736 14.752 31.68 31.68 0 0 0 1.408 11.04l51.52 154.56a31.968 31.968 0 0 0 27.456 21.76l523.104 47.552a32.064 32.064 0 0 0 34.848-29.632l55.776-798.048a32.064 32.064 0 0 0-7.776-23.232z m-98.912 630.848l-412.576-39.648a31.52 31.52 0 0 0-34.912 28.768 32 32 0 0 0 28.8 34.912l414.24 39.808-6.272 89.536-469.728-42.72-39.584-118.72 234.816-310.016a31.936 31.936 0 0 0-1.248-40.192L468.896 219.84l65.088-81.056 407.584 28.48-40.576 580.192z"  ></path></symbol><symbol id="v3-img-loading" viewBox="0 0 1024 1024"><path d="M834.7648 736.3584a5.632 5.632 0 1 0 11.264 0 5.632 5.632 0 0 0-11.264 0z m-124.16 128.1024a11.1616 11.1616 0 1 0 22.3744 0 11.1616 11.1616 0 0 0-22.3744 0z m-167.3216 65.8944a16.7936 16.7936 0 1 0 33.6384 0 16.7936 16.7936 0 0 0-33.6384 0zM363.1616 921.6a22.3744 22.3744 0 1 0 44.7488 0 22.3744 22.3744 0 0 0-44.7488 0z m-159.744-82.0224a28.0064 28.0064 0 1 0 55.9616 0 28.0064 28.0064 0 0 0-56.0128 0zM92.672 700.16a33.6384 33.6384 0 1 0 67.2256 0 33.6384 33.6384 0 0 0-67.2256 0zM51.2 528.9984a39.168 39.168 0 1 0 78.336 0 39.168 39.168 0 0 0-78.336 0z m34.1504-170.0864a44.8 44.8 0 1 0 89.6 0 44.8 44.8 0 0 0-89.6 0zM187.904 221.7984a50.432 50.432 0 1 0 100.864 0 50.432 50.432 0 0 0-100.864 0zM338.432 143.36a55.9616 55.9616 0 1 0 111.9232 0 55.9616 55.9616 0 0 0-111.9744 0z m169.0112-4.9152a61.5936 61.5936 0 1 0 123.2384 0 61.5936 61.5936 0 0 0-123.2384 0z m154.7776 69.632a67.1744 67.1744 0 1 0 134.3488 0 67.1744 67.1744 0 0 0-134.3488 0z m110.0288 130.816a72.8064 72.8064 0 1 0 145.5616 0 72.8064 72.8064 0 0 0-145.5616 0z m43.7248 169.472a78.3872 78.3872 0 1 0 156.8256 0 78.3872 78.3872 0 0 0-156.8256 0z" fill="" ></path></symbol><symbol id="v3-img-right" viewBox="0 0 1024 1024"><path d="M884.808356 96.170317c0-17.780969-16.723893-32.209586-37.309744-32.209586-20.586874 0-37.310767 14.428617-37.310767 32.209586V927.20035c0 17.780969 16.723893 32.209586 37.310767 32.209586 20.585851 0 37.309744-14.428617 37.309744-32.209586V96.170317zM263.249101 159.859871c-27.619034-21.278629-50.027393-11.659551-50.027393 22.116717v659.490146c0 33.44881 22.481014 43.322691 50.027393 22.116716l407.352615-313.385476c27.65485-21.242813 27.618011-55.784514 0-76.989465L263.249101 159.859871z m449.327612 260.298398c60.265572 48.751331 60.301388 134.302799 0 183.090968L297.061185 939.297876c-70.976518 57.422827-158.459988-25.322735-158.459989-116.158556V200.267163c0-91.12644 87.445608-173.6172 158.459989-116.158557l415.515528 336.049663zM297.061185 84.10963"  ></path></symbol><symbol id="v3-img-left" viewBox="0 0 1024 1024"><path d="M138.60222 96.170317V927.20035c0 17.780969 16.723893 32.209586 37.309744 32.209586 20.586874 0 37.310767-14.428617 37.310767-32.209586V96.170317c0-17.780969-16.723893-32.209586-37.310767-32.209586-20.585851 0-37.309744 14.428617-37.309744 32.209586z m621.560278 63.689554L352.80886 473.208509c-27.618011 21.205974-27.65485 55.747675 0 76.989465l407.353638 313.385476c27.54638 21.205974 50.027393 11.33107 50.027393-22.116716v-659.490146c-0.001023-33.776268-22.408359-43.395346-50.027393-22.116717z m-33.812084-75.750241c71.013357-57.459666 158.458965 25.032116 158.458965 116.157533v622.872157c0 90.835821-87.482447 173.581384-158.459988 116.158556L310.834886 603.249237c-60.301388-48.78817-60.265572-134.339638 0-183.090968L726.350414 84.10963z m0 0"  ></path></symbol><symbol id="v3-img-zoom-out" viewBox="0 0 1024 1024"><path d="M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z"  ></path><path d="M625.792 448H336a32 32 0 0 0 0 64h289.792a32 32 0 1 0 0-64z"  ></path></symbol><symbol id="v3-img-zoom-big" viewBox="0 0 1024 1024"><path d="M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z"  ></path><path d="M625.792 448H512v-112a32 32 0 0 0-64 0V448h-112a32 32 0 0 0 0 64H448v112a32 32 0 1 0 64 0V512h113.792a32 32 0 1 0 0-64z"  ></path></symbol><symbol id="v3-img-rotate-left" viewBox="0 0 1024 1024"><path d="M884.565333 431.914667c-3.114667 36.266667-22.784 55.893333-59.008 59.008-35.2-3.114667-54.357333-22.741333-57.472-59.008 3.114667-35.157333 22.272-54.314667 57.472-57.429334 36.224 3.114667 55.893333 22.272 59.008 57.429334z m-97.834666 0c3.114667 24.874667 16.042667 38.826667 38.826666 41.941333 22.741333-2.048 35.712-16.042667 38.826667-41.941333-3.114667-24.832-16.085333-38.272-38.826667-40.362667-22.784 3.114667-35.712 16.597333-38.826666 40.362667z m-59.008 82.346666c-1.024 103.466667-34.688 156.245333-100.906667 158.293334-69.376-1.024-104.021333-53.76-104.021333-158.293334 0.981333-104.576 35.157333-158.421333 102.442666-161.536 67.285333 2.133333 101.461333 55.893333 102.485334 161.493334z m-169.216 0c0 89.002667 22.229333 132.992 66.730666 131.925334 44.501333 1.066667 66.773333-42.922667 66.773334-131.968 0-90.026667-22.784-134.528-68.309334-133.546667-42.453333 3.114667-64.213333 47.658667-65.194666 133.546667z m-184.746667 49.664c-58.026667-5.205333-89.6-39.338667-94.72-102.485333 4.096-67.285333 37.76-103.509333 100.906667-108.714667 72.448-0.981333 108.16 50.218667 107.093333 153.728 0 109.738667-37.76 165.12-113.322667 166.144-45.568-2.090667-74.538667-24.32-86.954666-66.773333l32.597333-10.88c7.253333 36.266667 26.453333 53.845333 57.472 52.821333 48.64-2.090667 73.472-45.056 74.538667-128.853333-15.530667 29.994667-41.429333 45.013333-77.653334 45.013333z m3.072-181.674666c-39.338667 3.114667-60.586667 28.458667-63.658667 76.074666 2.048 47.616 23.296 72.96 63.658667 76.074667 40.362667 0 65.194667-18.645333 74.538667-55.893333 0-65.194667-24.874667-97.28-74.538667-96.256z m135.594667 641.578666C230.186667 1023.829333 0.597333 794.24 0.597333 512v-0.981333h53.973334v0.981333c0 252.501333 205.354667 457.898667 457.813333 457.898667 252.501333 0 457.898667-205.397333 457.898667-457.898667 0-252.458667-205.397333-457.813333-457.856-457.813333A457.088 457.088 0 0 0 159.530667 220.586667l120.533333-0.938667h8.106667l-47.061334 47.786667-167.936 1.365333-1.109333-167.936 47.189333-47.872v131.626667A510.933333 510.933333 0 0 1 512.426667 0.128C794.624 0.128 1024.256 229.76 1024.256 512c0 282.282667-229.632 511.872-511.829333 511.872z"  ></path></symbol><symbol id="v3-img-antetype" viewBox="0 0 1024 1024"><path d="M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zM512 622c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zM512 482c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"  ></path><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"  ></path><path d="M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"  ></path></symbol><symbol id="v3-img-rotate-right" viewBox="0 0 1024 1024"><path d="M375.381 562.517c-57.898-5.162-89.472-39.296-94.634-102.4 4.138-67.2 37.76-103.381 100.864-108.586 72.362-1.024 108.032 50.176 107.008 153.6 0 109.61-37.76 164.906-113.238 165.973-45.525-2.133-74.453-24.32-86.869-66.73l32.597-10.838c7.211 36.181 26.368 53.76 57.387 52.736 48.597-2.048 73.387-44.97 74.453-128.768-15.488 29.995-41.386 45.013-77.568 45.013z m3.115-181.504c-39.296 3.072-60.501 28.459-63.573 75.99 2.048 47.573 23.253 72.96 63.573 76.032 40.32 0 65.152-18.603 74.453-55.851 0-65.152-24.832-97.195-74.453-96.17z m145.835 131.84c0.981-104.448 35.114-158.208 102.4-161.322 67.157 2.09 101.29 55.85 102.357 161.322-1.067 103.424-34.688 156.16-100.821 158.251-69.334-1.067-103.936-53.76-103.936-158.25z m169.088 0c0-89.984-22.784-134.4-68.267-133.418-42.41 3.114-64.128 47.616-65.152 133.418 0 88.96 22.187 132.907 66.688 131.84 44.459 1.067 66.73-42.88 66.73-131.84z m75.989-82.218c3.115-35.158 22.23-54.272 57.387-57.387 36.181 3.115 55.893 22.23 58.965 57.387-3.115 36.224-22.784 55.893-58.965 58.965-35.158-3.115-54.272-22.741-57.387-58.965z m96.17 0c-3.071-24.832-16.042-38.23-38.783-40.32-22.742 3.114-35.67 16.554-38.784 40.32 3.114 24.832 16.042 38.826 38.826 41.898 22.699-2.048 35.67-16.042 38.742-41.898z m-354.175 592.64c-281.984 0-511.36-229.376-511.36-511.403C0 229.973 229.419 0.512 511.403 0.512c157.696 0 298.922 71.765 392.789 184.32V54.613l47.147 47.872-1.11 167.766-167.765-1.366-47.061-47.744h8.106l121.558 0.982a456.704 456.704 0 0 0-353.664-167.68c-252.246 0-457.43 205.226-457.43 457.429 0 252.288 205.184 457.515 457.43 457.515S968.875 764.16 968.875 511.872v-0.981h53.888v0.981c0 282.027-229.376 511.403-511.36 511.403z"  ></path></symbol></svg>',k=(k=document.getElementsByTagName("script"))[k.length-1].getAttribute("data-injectcss");if(k&&!m.__iconfont__svg__cssinject__){m.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(T){console&&console.log(T)}}function A(){P||(P=!0,x())}v=function(){var T,E=document.createElement("div");E.innerHTML=y,y=null,(E=E.getElementsByTagName("svg")[0])&&(E.setAttribute("aria-hidden","true"),E.style.position="absolute",E.style.width=0,E.style.height=0,E.style.overflow="hidden",E=E,(T=document.body).firstChild?function(D,I){I.parentNode.insertBefore(D,I)}(E,T.firstChild):T.appendChild(E))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(v,0):(w=function(){document.removeEventListener("DOMContentLoaded",w,!1),v()},document.addEventListener("DOMContentLoaded",w,!1)):document.attachEvent&&(x=v,L=m.document,P=!1,function T(){try{L.documentElement.doScroll("left")}catch{return void setTimeout(T,50)}A()}(),L.onreadystatechange=function(){L.readyState=="complete"&&(L.onreadystatechange=null,A())})}(typeof window!="undefined"?window:global),C()}),Object.assign(Object.assign(Object.assign({vImagesWrap:a,imgContainer:o},yt(r)),yt(i)),{handleClose:b,toggleImg:S,initImgSize:c,dragStyle:s,handleScale:f,handleRotate:p,visibleArrowBtn:l,isMultiple:d})}});const q=e=>(Yn("data-v-15ccadb3"),e=e(),Zn(),e),kr={key:0,class:"v-images-wrap",ref:"vImagesWrap"},xr={class:"icon img-loading rotate-animation","aria-hidden":"true"},Ar=[q(()=>M("use",{"xlink:href":"#v3-img-loading"},null,-1))],Er=["src"],Tr=[q(()=>M("use",{"xlink:href":"#v3-img-img-error"},null,-1))],Lr=[q(()=>M("use",{"xlink:href":"#v3-img-close"},null,-1))],Pr=[q(()=>M("svg",{class:"icon","aria-hidden":"true"},[M("use",{"xlink:href":"#v3-img-left"})],-1))],Rr=[q(()=>M("svg",{class:"icon","aria-hidden":"true"},[M("use",{"xlink:href":"#v3-img-right"})],-1))],zr={key:3,class:"v3-img-preview-toolbar"},Dr=[q(()=>M("use",{"xlink:href":"#v3-img-zoom-out"},null,-1))],Mr=[q(()=>M("use",{"xlink:href":"#v3-img-zoom-big"},null,-1))],Fr=[q(()=>M("use",{"xlink:href":"#v3-img-antetype"},null,-1))],Ir=[q(()=>M("use",{"xlink:href":"#v3-img-rotate-left"},null,-1))],Or=[q(()=>M("use",{"xlink:href":"#v3-img-rotate-right"},null,-1))];(function(e,t){t===void 0&&(t={});var n=t.insertAt;if(e&&typeof document!="undefined"){var a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",n==="top"&&a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}})(`.icon[data-v-15ccadb3] {
  width: 1em;
  height: 1em;
  vertical-align: -0.15em;
  fill: currentColor;
  overflow: hidden;
}
.v-images-wrap[data-v-15ccadb3] {
  z-index: 200;
  user-select: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(3px);
  color: #fff;
}
.v-images-wrap[data-v-15ccadb3] .img-loading[data-v-15ccadb3],
.v-images-wrap[data-v-15ccadb3] .img-content[data-v-15ccadb3] {
  font-size: 50px;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: auto;
  transition: all 0.2s;
}
.v-images-wrap[data-v-15ccadb3] .img-container[data-v-15ccadb3] {
  z-index: 201;
  position: absolute;
  height: 100vh;
  width: 100vw;
  top: 0;
  left: 0;
  text-align: center;
}
.v-images-wrap[data-v-15ccadb3] .img-container[data-v-15ccadb3] .img-content[data-v-15ccadb3] {
  max-width: 100%;
  max-height: 100%;
}
.v-images-wrap[data-v-15ccadb3] .img-container[data-v-15ccadb3] .img-error[data-v-15ccadb3] {
  font-size: 300px;
  color: #d8d8d8;
}
.v-images-wrap[data-v-15ccadb3] .rotate-animation[data-v-15ccadb3] {
  animation: rotate-15ccadb3 1.5s linear infinite;
}
.v-images-wrap[data-v-15ccadb3] .arrow[data-v-15ccadb3] {
  width: 42px;
  height: 42px;
  text-align: center;
  line-height: 42px;
  position: absolute;
  top: 50%;
  border-radius: 50%;
  transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  font-size: 24px;
  cursor: pointer;
  transition: all 0.2s;
  z-index: 280;
  background: rgba(0, 0, 0, 0.3);
}
.v-images-wrap[data-v-15ccadb3] .arrow[data-v-15ccadb3][data-v-15ccadb3]:hover {
  opacity: 0.8;
  transform: translateY(-50%) scale(1.2);
}
.v-images-wrap[data-v-15ccadb3] .arrow-left[data-v-15ccadb3] {
  left: 50px;
}
.v-images-wrap[data-v-15ccadb3] .arrow-right[data-v-15ccadb3] {
  right: 50px;
}
.v-images-wrap[data-v-15ccadb3] .close-btn[data-v-15ccadb3] {
  z-index: 205;
  position: absolute;
  right: 50px;
  top: 50px;
  width: 36px;
  height: 36px;
  font-size: 22px;
  line-height: 36px;
  text-align: center;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s;
  color: #e7e5e5;
  background: rgba(0, 0, 0, 0.3);
}
.v-images-wrap[data-v-15ccadb3] .close-btn[data-v-15ccadb3][data-v-15ccadb3]:hover {
  opacity: 0.8;
  transform: scale(1.2);
}
.v-images-wrap[data-v-15ccadb3] .v3-img-preview-toolbar[data-v-15ccadb3] {
  z-index: 205;
  position: absolute;
  bottom: 10%;
  font-size: 26px;
  width: 100%;
  display: flex;
  justify-content: center;
  cursor: pointer;
}
.v-images-wrap[data-v-15ccadb3] .v3-img-preview-toolbar[data-v-15ccadb3] section[data-v-15ccadb3] {
  height: 44px;
  bottom: 10%;
  padding: 0 22px;
  display: flex;
  align-items: center;
  border-radius: 22px;
  background: rgba(0, 0, 0, 0.3);
  color: #c3c3c3;
}
.v-images-wrap[data-v-15ccadb3] .v3-img-preview-toolbar[data-v-15ccadb3] section[data-v-15ccadb3] svg[data-v-15ccadb3] {
  box-sizing: content-box;
  padding: 0 10px;
  transition: all 0.2s;
}
.v-images-wrap[data-v-15ccadb3] .v3-img-preview-toolbar[data-v-15ccadb3] section[data-v-15ccadb3] svg[data-v-15ccadb3][data-v-15ccadb3]:hover {
  transform: scale(1.2);
}
@keyframes rotate-15ccadb3 {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
`),Je.render=function(e,t,n,a,o,s){return F(),Se(bn,{name:"fade"},{default:qe(()=>[e.visible?(F(),O("div",kr,[Ae((F(),O("svg",xr,Ar,512)),[[Ee,e.imgState==="loading"]]),M("div",{ref:"imgContainer",style:Te(e.dragStyle),class:"img-container"},[Ae(M("img",{class:"img-content",onDragstart:t[0]||(t[0]=He(()=>{},["prevent"])),src:e.src,style:Te(`transform: scale(${e.imgScale}) rotate(${e.imgRotate}deg);`),alt:""},null,44,Er),[[Ee,e.imgState==="success"]]),Ae((F(),O("svg",{class:"icon img-content img-error",onDragstart:t[1]||(t[1]=He(()=>{},["prevent"])),"aria-hidden":"true",style:Te(`transform: scale(${e.imgScale}) rotate(${e.imgRotate}deg);`)},Tr,36)),[[Ee,e.imgState==="error"]])],4),e.showCloseBtn?(F(),O("svg",{key:0,class:"icon close-btn","aria-hidden":"true",onClick:t[2]||(t[2]=He(function(){return e.handleClose&&e.handleClose(...arguments)},["stop"]))},Lr)):W("",!0),e.visibleArrowBtn?(F(),O("div",{key:1,class:"arrow arrow-left",onClick:t[3]||(t[3]=r=>e.toggleImg(!1))},Pr)):W("",!0),e.visibleArrowBtn?(F(),O("div",{key:2,class:"arrow arrow-right",onClick:t[4]||(t[4]=r=>e.toggleImg(!0))},Rr)):W("",!0),e.showToolbar?(F(),O("div",zr,[M("section",null,[(F(),O("svg",{class:"icon","aria-hidden":"true",onClick:t[5]||(t[5]=r=>e.handleScale(-.1,!1))},Dr)),(F(),O("svg",{class:"icon","aria-hidden":"true",onClick:t[6]||(t[6]=r=>e.handleScale(.1,!1))},Mr)),(F(),O("svg",{class:"icon","aria-hidden":"true",onClick:t[7]||(t[7]=function(){return e.initImgSize&&e.initImgSize(...arguments)})},Fr)),(F(),O("svg",{class:"icon","aria-hidden":"true",onClick:t[8]||(t[8]=r=>e.handleRotate(!1))},Ir)),(F(),O("svg",{class:"icon","aria-hidden":"true",onClick:t[9]||(t[9]=r=>e.handleRotate(!0))},Or))])])):W("",!0)],512)):W("",!0)]),_:1})},Je.__scopeId="data-v-15ccadb3";let Fn={};const tn="v3-img-preview-container-id";let me={};function In(e){if(me._instance)return!1;Array.isArray(e)&&(e={images:e}),typeof e=="string"&&(e={url:e}),e=Object.assign(Object.assign({},Fn),e);let t=document.getElementById(tn);return t||(t=document.createElement("div"),t.id=tn,document.body.appendChild(t)),me=Qn(Je,Object.assign(Object.assign({},e),{on_unmount_v3_ima_preview_app:()=>me.unmount()})),me.mount(t),me}(()=>{const e=Je;return e.install=(t,n)=>{Fn=n,t.config.globalProperties.$v3ImgPreviewFn=In},e})();let nn=Lt(),ut=ge(),an=z(!1),rn=z(!1),Br=z(!1),on=z(!1);function _r(){return{openVideo:()=>{an.value=!0},dialogVideoVisible:an,openText:()=>{rn.value=!0},dialogTextVisible:rn,openOffice:r=>{let l=nn.zfileConfig.officePreview.previewUrl(r.url);window.open(l)},dialogOfficeVisible:Br,openImage:r=>{let l=[],i=0;nn.zfileConfig.imagePreview.mode==="only"?l.push(r.url):ut.filterFileByType("image").forEach((u,c)=>{r.name===u.name&&(i=c),l.push(u.url)}),In({images:l,index:i})},openAudio:()=>{ut.updateAudioList(ut.filterFileByType("audio"))},openPdf:()=>{on.value=!0},dialogPdfVisible:on}}const{encodeAllIgnoreSlashes:ln}=Ea();let{routerRef:ve,fullpath:dt,storageKey:V,currentPath:$e}=ze(),{getPathPwd:$r,putPathPwd:jr}=ir();const{storageListAsFileList:Nr}=Pa();let be=ge(),ue=De();const ft=Vn(ue.globalConfig.siteName);let kt=Lt();const{openAudio:Ur,openImage:Vr,openOffice:bo,openPdf:Kr,openText:qr,openVideo:Hr}=_r(),se=z(!1),sn=z(!1);let xt=Pe([]);if(xt.length===0)for(let e=0;e<kt.zfileConfig.skeleton.size;e++)xt.push({});let K=Pe({path:"",password:"",orderBy:"",orderDirection:""});const cn=z(!1);let{selectRows:Wr,clearSelection:Gr}=et();function On(){const e=({prop:l,order:i})=>{K.orderBy=l,K.orderDirection=i==="descending"?"desc":"asc",t()},t=l=>{if(!V.value)return;se.value=!0,K.path=$e.value;let i=l||{};i.storageKey=V.value,i.path=$e.value,i.password=i.password||$r(),i.orderBy=K.orderBy,i.orderDirection=K.orderDirection;let d=V.value;$a(i).then(u=>{let c=u.data.passwordPattern;if(jr(c,i.password),d!==V.value)return;let p=u.data.files,f=K.path;if(f!==""&&f!=="/"){let h=Oe.basename(Oe.resolve($e.value,"../"));p.unshift({name:h||"/",path:Oe.resolve(f,"../"),type:"BACK"})}be.updateFileList(p),se.value=!1,sn.value=!0,Wr.value=[],dt.value?ft.value=ue.globalConfig.siteName+" | "+dt.value[dt.value.length-1]:ft.value=ue.globalConfig.siteName+" | \u9996\u9875"}).catch(u=>{let c=u.response.data;c.code===te.responseCode.INVALID_PASSWORD?(j.warning("\u5BC6\u7801\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165\uFF01"),r()):c.code===te.responseCode.REQUIRED_PASSWORD?(j.warning("\u6B64\u6587\u4EF6\u5939\u9700\u8981\u5BC6\u7801\uFF0C\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"),r()):j.error(c.msg)})},n=()=>{let l={storageKey:V.value,path:$e.value};ja(l).then(i=>{ue.updateFolderConfig(i.data),V.value!==be.oldStorageKey&&be.updateOldStorageKey(V.value)}).finally(()=>{cn.value=!0})},a=l=>{if(!!l.name)if(be.updateCurrentClickRow(l),l.type==="FILE"){const{batchDownloadFile:i}=Bn();switch(l.fileType){case"video":Hr();break;case"image":Vr(l);break;case"text":qr();break;case"audio":Ur(l);break;case"pdf":Kr(l);break;default:i(l)}Gr()}else if(l.type==="ROOT")ve.value.push(l.path);else if(l.type==="BACK"){let i=Qe("/"+V.value+"/"+l.path);i=ln(i),ve.value.push(i)}else{let i=Qe("/"+V.value+"/"+l.path+"/"+l.name);i=ln(i),ve.value.push(i)}};let o=R(()=>{let l=kt.zfileConfig.skeleton.enable,i=kt.zfileConfig.skeleton.show;return l?i==="always"?se.value:sn.value?!1:se.value:!1}),s=R(()=>o.value?!1:se.value),r=()=>{G.prompt("\u6B64\u6587\u4EF6\u5939\u5DF2\u52A0\u5BC6\uFF0C\u8BF7\u8F93\u5165\u5BC6\u7801","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",inputType:"password",inputValidator(l){return!!l},inputErrorMessage:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A."}).then(({value:l})=>{t({password:l})}).catch(()=>{if((K.path==="/"||K.path==="")&&ue.globalConfig.rootShowStorage===!0)be.updateFileList(Nr.value),ve.value.push("/"),ft.value=ue.globalConfig.siteName+" | \u9996\u9875",se.value=!1;else{let l=Oe.resolve(K.path,"../");ve.value.push("/"+V.value+l)}})};return{loadFile:t,openRow:a,searchParam:K,sortChangeMethod:e,skeletonLoading:o,skeletonData:xt,basicLoading:s,initStorageConfig:cn,loadFileConfig:n}}let Yr=ge(),Zr=De(),{storageKey:gt,currentPath:je}=ze();const ce=z([]),un=z(!1);let{selectRows:$,selectRow:dn,selectFolders:Ne,selectFiles:pt}=et();function Bn(){const{loadFile:e}=On(),t=u=>{if(!$.value&&$.value.length===0){j.warning("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u6587\u4EF6");return}let c;u.name?c=`\u662F\u5426\u786E\u8BA4\u4E0B\u8F7D\u6587\u4EF6 ${u.name}\uFF1F`:$.value.length===1?c=`\u662F\u5426\u786E\u8BA4\u4E0B\u8F7D\u6587\u4EF6 ${$.value[0].name}\uFF1F`:$.value.length>1&&(c=`\u662F\u5426\u786E\u8BA4\u6279\u91CF\u4E0B\u8F7D ${$.value.length} \u4E2A\u6587\u4EF6\uFF1F`),G.confirm(c,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"info",callback:p=>{p==="confirm"&&(u.name?n(u.url):$.value.forEach(f=>{f.type==="FILE"&&n(f.url)}))}})},n=u=>{const c=document.createElement("iframe");c.style.display="none",c.style.height=0,c.src=u,document.body.appendChild(c),setTimeout(()=>{c.remove()},5*60*1e3)},a=()=>{G.prompt(`\u5728 <b>${je.value}</b> \u4E0B\u521B\u5EFA\u6587\u4EF6\u5939\uFF0C\u8BF7\u8F93\u5165\u8981\u521B\u5EFA\u7684\u6587\u4EF6\u5939\u540D\u79F0`,"\u63D0\u793A",{dangerouslyUseHTMLString:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",draggable:!0,inputValidator(u){return u?u.includes("/")?"\u6587\u4EF6\u5939\u540D\u79F0\u4E0D\u80FD\u5305\u542B /":!0:"\u6587\u4EF6\u5939\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}}).then(({value:u})=>{let c={storageKey:gt.value,path:je.value,name:u};Da(c).then(()=>{j.success("\u521B\u5EFA\u6210\u529F")}).finally(()=>{e()})})},o=()=>{let u=dn.value;if(u===null){j.warning("\u8BF7\u5148\u9009\u4E2D\u4E00\u4E2A\u6587\u4EF6\u6216\u6587\u4EF6\u5939\uFF01");return}G.prompt(`\u5C06 <b>${u.name}</b> \u4FEE\u6539\u4E3A\uFF1A`,"\u63D0\u793A",{dangerouslyUseHTMLString:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",inputValue:u.name,inputValidator(c){return!!c},inputErrorMessage:"\u6A21\u677F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A."}).then(({value:c})=>{let p={storageKey:gt.value,path:je.value,name:u.name,newName:c},f;u.type==="FILE"?f=Ia:u.type==="FOLDER"&&(f=Oa),f(p).then(()=>{j.success("\u91CD\u547D\u540D\u6210\u529F")}).finally(()=>{e()})})},s=()=>{j.warning("\u6682\u672A\u5B9E\u73B0")},r=()=>{j.warning("\u6682\u672A\u5B9E\u73B0")},l=()=>{if(!Zr.permission.delete)return;if($.value.length===0){j.warning("\u8BF7\u5148\u81F3\u5C11\u9009\u4E2D\u4E00\u4E2A\u6587\u4EF6\u6216\u6587\u4EF6\u5939\uFF01");return}let u=$.value.length===1?"\u662F\u5426\u786E\u8BA4\u5220\u9664 ":"\u662F\u5426\u786E\u8BA4\u6279\u91CF\u5220\u9664 ",c=["s3","tencent","aliyun","qiniu","minio","huawei","upyun"];Ne.value.length>0&&(u+=" "+Ne.value.length+" \u4E2A\u6587\u4EF6\u5939"),Ne.value.length>0&&pt.value.length>0&&(u+="\uFF0C"),pt.value.length>0&&(u+=pt.value.length+" \u4E2A\u6587\u4EF6"),Ne.value.length>0&&c.includes(Yr.currentStorageSource.type.key)&&(u+=" (\u4E0D\u652F\u6301\u5220\u9664\u975E\u7A7A\u6587\u4EF6\u5939)"),u+="?",ce.value=[],G.confirm(u,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",draggable:!0,callback:f=>{f==="confirm"&&($.value.length>1?(un.value=!0,$.value.forEach(h=>{p(h).then(()=>{ce.value.push({name:h.name,status:!0})}).catch(()=>{ce.value.push({name:h.name,status:!1})})})):p(dn.value).then(h=>{j.success("\u5220\u9664\u6210\u529F"),e()}))}});const p=f=>{let h={storageKey:gt.value,path:je.value,name:f.name};return f.type==="FOLDER"?Fa(h):Ma(h)}},i=()=>{ce.value=[],e()},d=R(()=>Math.floor(ce.value.length/$.value.length*100));return{batchDownloadFile:t,rename:o,newFolder:a,moveTo:s,copyTo:r,batchDelete:l,batchDeleteResult:ce,batchDeleteDialogShow:un,batchDeleteCloseAction:i,batchDeletePercentage:d}}Lt();let Qr=De(),ee=ge();const Xr=Tt("Meta"),Jr=Tt("Control"),eo=Tt("Shift");let to=R(()=>Xr.value||Jr.value),{batchDelete:fn}=Bn();const{skeletonLoading:gn,openRow:ht}=On(),{selectRows:We,selectRow:pn,clearSelection:At,toggleRowSelection:Ue,toggleAllSelection:no}=et();window.addEventListener("keydown",function(e){var t;e.key==="Escape"&&Ve()?At():e.key==="a"&&(e.metaKey||e.ctrlKey)&&Ve()?(e.preventDefault(),no()):e.key==="Delete"&&Ve()?fn&&((t=We==null?void 0:We.value)==null?void 0:t.length)>0&&(e.preventDefault(),fn()):e.key==="Backspace"&&Ve()&&ee.fileList.length>0&&ee.fileList[0].type==="BACK"&&Et(ee.fileList[0])},!1);const Ve=()=>ao()&&_n()===!1,ao=()=>document.querySelector(".zfile-index-body:hover"),_n=()=>!!document.querySelector(".el-popup-parent--hidden"),ke=z(-1),xe=z(-1),{pressed:ro}=Kn();Ge(()=>ro.value,(e,t)=>{e===!1&&t===!0&&(ke.value=-1,xe.value=-1)});let Et;function yo(){return Et=(a,o)=>{var l;if(o===void 0){ht(a);return}let s=o.type==="selection";if(!s&&Qr.globalConfig.fileClickMode==="click"){ht(a);return}if(gn.value)return;let r=We.value.length===1&&((l=pn.value)==null?void 0:l.name)===a.name;if(eo.value){let i=ee.fileList.findIndex(d=>d.name===pn.value.name);if(i!==null){let d=ee.fileList.findIndex(p=>p.name===a.name),u=Math.min(d,i),c=Math.max(d,i);for(let p=u+1;p<c;p++){let f=ee.fileList[p];Ue(f,!0)}}}else!to.value&&!r&&!s&&At();Ue(a)},{tableClickRow:Et,tableDbClickRow:a=>{gn.value||ht(a)},tableHoverRow:(a,o,s,r)=>{if(r.buttons===1&&ke.value!==-1){if(xe.value===-1){At();let c=ee.fileList[ke.value];Ue(c,!0)}let l=a.index,i=xe.value>=0?xe.value:l-1,d=Math.min(i,l),u=Math.max(i,l);for(let c=d;c<=u;c++){let p=ee.fileList[c];Ue(p,!0)}xe.value=l}},tableLeaveRow:(a,o,s,r)=>{r.buttons===1&&ke.value===-1&&(ke.value=a.index)}}}const Q=z(!1),mt=z(""),X=Pe([]),re=new Map,vt=new Map;let oo=0,ye=ge(),Ke=De(),we=z(!1);function wo(){let{storageKey:e,currentPath:t}=ze();const n=g=>{g=document.querySelector("body");const C=y=>{var T,E;if(v(),we.value=!1,_n()||!e.value||Q.value||!Ke.permission.upload)return;y.stopPropagation(),y.preventDefault();const k=da.service({text:"\u6587\u4EF6\u8BFB\u53D6\u4E2D...",background:"rgba(0, 0, 0, .3)"}),A=((T=y.clipboardData)==null?void 0:T.items)||((E=y.dataTransfer)==null?void 0:E.items);S(A).then(D=>{if(Ye(()=>{k.close()}),D.length===0)return;let I=[];D.forEach((ne,pe)=>{ne.name===".DS_Store"&&I.push(pe)});const nt=()=>{Q.value=!0,D.forEach(ne=>{f({file:ne})})};I.length>0?G.confirm(`\u68C0\u6D4B\u5230\u6709 ${I.length} \u4E2A .DS_Store \u6587\u4EF6\uFF0C\u662F\u5426\u4E0A\u4F20\u65F6\u8DF3\u8FC7\u8FD9\u4E9B\u6587\u4EF6`,"\u63D0\u793A",{confirmButtonText:"\u8DF3\u8FC7\u8FD9\u4E9B\u6587\u4EF6",cancelButtonText:"\u4F9D\u65E7\u4E0A\u4F20",type:"success",callback:ne=>{if(ne==="confirm")for(let pe=I.length-1;pe>=0;pe--){let $n=I[pe];D.splice($n,1)}nt()}}):D.length>100?G.confirm(`\u6587\u4EF6\u6570\u91CF\u4E3A ${D.length} \u4E2A\uFF0C\u662F\u5426\u786E\u8BA4\u4E0A\u4F20\uFF1F`,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"success",callback:ne=>{ne==="confirm"&&nt()}}):nt()})};let b=null;g.addEventListener("dragenter",y=>{!e.value||Q.value||!Ke.permission.upload||(b=y.target,m(),y.stopPropagation(),y.preventDefault(),we.value=!0)},!1),g.addEventListener("dragover",function(y){!e.value||Q.value||!Ke.permission.upload||(y.stopPropagation(),y.preventDefault(),we.value=!0)},!1),g.addEventListener("dragleave",function(y){!e.value||Q.value||!Ke.permission.upload||(b===y.target&&(v(),we.value=!1),y.stopPropagation(),y.preventDefault())},!1),g.addEventListener("drop",C,!1),g.addEventListener("paste",C,!1);const S=async y=>{let k=[],A=[];if(y){let T=new Array(...y);for(let E=0;E<T.length;E++){let D=T[E],I=null;if(D.webkitGetAsEntry)I=D.webkitGetAsEntry();else if(D.getAsEntry)I=D.getAsEntry();else{j.warning("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u62D6\u62FD\u4E0A\u4F20");return}A.push(I)}if(A.length>0)for(let E=0;E<A.length;E++){let D=A[E];if(D){let I=await P(D);Array.isArray(I)?L(I,k):k.push(I)}}}return k},m=()=>{g.classList.add("dragging-over")},v=()=>{g.classList.remove("dragging-over")};function w(y){return new Promise((k,A)=>{y.file(T=>{k(T)})})}function x(y){return new Promise((k,A)=>{y.readEntries(T=>{k(T)})})}function L(y,k){for(let A=0;A<y.length;A++)Array.isArray(y[A])?L(y[A],k):k.push(y[A])}async function P(y){let k=y.fullPath||"",A=[];if(y.isFile){let T=await w(y);return T.dropUploadPath=k,T}else if(y.isDirectory){let T=y.createReader(),E=await x(T);for(let D=0;D<E.length;D++){let I=await P(E[D]);A.push(I)}return A}}},a=()=>{Q.value=!0,mt.value="file"},o=()=>{Q.value=!0,mt.value="folder",Ye(()=>{document.getElementsByClassName("el-upload__input")[0].webkitdirectory=!0})},s=g=>{let C=t.value;if(g.webkitRelativePath||g.dropUploadPath){let S=(g.webkitRelativePath||g.dropUploadPath).split("/");S.forEach((m,v)=>{let w=v===0,x=S.length-1===v;w||x||m&&(C+="/"+m)})}let b={storageKey:e.value,path:Qe(C),name:g.name,size:g.size};Ba(b).then(S=>{const m=oo++;let v={name:g.name,size:g.size,speed:"-",progress:0,loaded:0,status:"uploading",startTime:Date.now(),index:m};X.push(v),re.set(m,le.CancelToken.source()),vt.set(m,X[X.length-1]);const{on:w}=Dt(`cancel-upload-${m}`);w(()=>{let y=re.get(m);y&&(y.cancel(),X.find((k,A)=>{let T=k.name===g.name;return T&&X.splice(A,1),T}))});let x=["local","webdav","ftp","sftp"],L=["s3","tencent","aliyun","qiniu","minio","huawei"],P=["sharepoint","sharepoint-china","onedrive","onedrive-china"];x.includes(ye.currentStorageSource.type.key)?r(g,S.data,m):L.includes(ye.currentStorageSource.type.key)?l(g,S.data,m):P.includes(ye.currentStorageSource.type.key)?d(g,S.data,m):ye.currentStorageSource.type.key==="upyun"&&u(g,S.data,m)})},r=(g,C,b)=>{let S=new FormData;S.append("file",g),le.post(C,S,{cancelToken:re.get(b).token,onUploadProgress:m=>{i(m,b)}})},l=(g,C,b)=>{le.put(C,g,{withCredentials:!1,cancelToken:re.get(b).token,onUploadProgress:S=>{i(S,b)}})},i=(g,C)=>{let b=vt.get(C);b.size=g.total,b.loaded=g.loaded,b.progress=Math.round(g.loaded/g.total*100),b.speed=te.fileSizeFormat(Math.round(g.loaded/(Date.now()-b.startTime)*1e3)),b.progress===100&&(b.status="finished",b.endTime=Date.now())},d=(g,C,b)=>{let S=1,m=0,v=0,w=g.size;const x=104857599,L=()=>{m+x>=w?v=w:v=m+x,S>1&&re.set(b,le.CancelToken.source());let P=g.slice(m,v);le.put(`${C}`,P,{cancelToken:re.get(b).token,timeout:1e7,headers:{"Content-Type":"application/octet-stream","Content-Range":`bytes ${m}-${v-1}/${g.size}`},type:"sync",withCredentials:!1,onUploadProgress:y=>{if(y.lengthComputable){let k=vt.get(b);const A=y.loaded+m;k.size=w,k.loaded=A,k.progress=Math.round(A/w*100),k.speed=te.fileSizeFormat(Math.round(A/(Date.now()-k.startTime)*1e3)),k.progress===100&&(k.status="finished",k.endTime=Date.now())}}}).then(y=>{y.status===202?(m+=x,S+=1,L()):y.status}).catch(y=>{})};L()},u=(g,C,b)=>{let S=JSON.parse(C),m=new FormData;m.append("name",g.name),m.append("authorization",S.signature),m.append("policy",S.policy),m.append("file",g),le.post(S.url,m,{withCredentials:!1,cancelToken:re.get(b).token,onUploadProgress:v=>{i(v,b)}})},c=R(()=>{let g=X.length,C=0,b=0;return X.forEach(S=>{S.status==="uploading"?C++:S.status==="finished"&&b++}),{totalSize:g,totalUploading:C,totalFinish:b}}),p=R(()=>X.sort((g,C)=>{let b=g.status==="uploading",S=C.status==="uploading";if(!b&&!S)return g.startTime-C.startTime;if(b&&!S)return-1;if(!b&&S)return 1;if(b&&S)return g.endTime-C.endTime})),f=g=>{let C=ye.fileList.find(b=>{if(b.name===g.file.name)return b});if(C){xa({zIndex:9999,title:"\u63D0\u793A",message:`\u5F53\u524D\u76EE\u5F55\u5DF2\u5B58\u5728\u6587\u4EF6 ${C.name}, \u8DF3\u8FC7\u4E0A\u4F20.`,type:"warning"});return}s(g.file)};return{visible:Q,uploadMode:mt,openUploadDialog:a,openUploadFolderDialog:o,cancelUpload:g=>{G.confirm(`\u662F\u5426\u786E\u5B9A\u53D6\u6D88\u6587\u4EF6 ${g.name} \u4E0A\u4F20\uFF1F`,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u8FD4\u56DE",type:"warning",callback:C=>{C==="confirm"&&Dt(`cancel-upload-${g.index}`).emit()}})},dropState:we,listenDropFile:n,beforeUpload:f,uploadFile:s,uploadProgressInfoSorted:p,uploadProgressInfoStatistics:c}}export{Ea as a,De as b,et as c,wo as d,On as e,yo as f,Bn as g,_r as h,Pa as i,Qe as j,po as k,ho as l,ir as m,go as r,mo as s,ge as u};
