import{a as w,b as E,h as s,r as z,L as q,P as M,o as T,ae as H,Q as N,u as o,e as r,p as t,f as Z,y as $,F as j,U as A,V as G,J as d}from"./index.43c9e4f9.js";import{b3 as k,b4 as J,m as Q,aR as W,r as K}from"./base.2d43833d.js";/* empty css                *//* empty css               */import"./tooltip.f118fcb0.js";import{E as O}from"./popper.2f8c3069.js";/* empty css              */import{E as X}from"./alert.fa776c83.js";import{S as Y}from"./SvgIcon.b43ab57f.js";import{Z as P,a as ee}from"./ZFormItem.63417a0f.js";import{m as te,n as oe}from"./admin-storage.6b41ebe2.js";import{u as y,r as se}from"./common.b879e1e2.js";import{S as ae}from"./sortable.esm.a99254e8.js";import{E as re}from"./request.16d78231.js";import{E as ie}from"./index.1d4e268d.js";import{b as S}from"./route-block.9b0645f8.js";import{_ as le}from"./plugin-vue_export-helper.21dcd24c.js";import{r as ne}from"./BadgeCheckIcon.8ef712a4.js";import{E as de}from"./index.ae61237b.js";import{v as pe}from"./directive.6e8d0a30.js";import"./focus-trap.868ba1a1.js";import"./event.3ec63147.js";import"./index.5cf4e3bb.js";import"./index.aeb9def7.js";import"./scroll.177a5176.js";import"./validator.18236576.js";import"./index.e5bf6ee1.js";import"./event.776e7e11.js";function ce(l,u){return w(),E("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})])}let a=z([]),I=z(!1);function me(l,u){let m=u.params.storageId;const v=()=>{te(m).then(i=>{a.value=i.data,a.value.length===0&&f(),g()})},g=()=>{const i=document.querySelector(".z-form-body");ae.create(i,{draggable:".expression-item",onEnd:e=>{if(e.oldIndex===e.newIndex)return;const h=a.value.splice(e.oldIndex-1,1)[0];a.value.splice(e.newIndex-1,0,h)}})},_=()=>{if(!a.value.find(e=>{if(y.isEmpty(e.description)||y.isEmpty(e.expression)||y.isEmpty(e.password))return re.warning("\u8BF7\u68C0\u67E5\u6570\u636E\u586B\u5199\u662F\u5426\u5B8C\u6574"),!0})){I.value=!0;for(let e=0;e<a.value.length;e++){let h=a.value[e];h.id=e+1}oe(m,a.value).then(()=>{ie.confirm("\u4FDD\u5B58\u6210\u529F, \u662F\u5426\u8FD4\u56DE\u5B58\u50A8\u6E90\u5217\u8868\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"success",callback:e=>{e==="confirm"&&l.push("/admin/storage-list")}})}).finally(()=>{I.value=!1})}},f=()=>{a.value.push({description:"\u8868\u8FBE\u5F0F - "+(a.value.length+1),expression:"",password:"",storageId:m})};return{loading:I,loadPasswordData:v,passwordList:a,addPasswordItem:f,deletePasswordItem:i=>{a.value.splice(i,1)},savePasswordData:_}}const p=l=>(A("data-v-62a29772"),l=l(),G(),l),ue={class:"flex justify-items-center"},_e=p(()=>t("span",null,"\u5BC6\u7801\u6587\u4EF6\u5939",-1)),fe=p(()=>t("div",{class:"rules-tips"},"Glob \u8868\u8FBE\u5F0F\u89C4\u5219\uFF1A",-1)),he=p(()=>t("div",{class:"rules-tips"},[t("b",null,"/"),d(": \u5355\u5C42\u6839\u76EE\u5F55\u52A0\u5BC6, \u5982 /, \u8868\u793A\u6839\u8DEF\u5F84\u4E0B\u9700\u8981\u5BC6\u7801\u8BBF\u95EE.")],-1)),we=p(()=>t("div",{class:"rules-tips"},[t("b",null,"/music*"),d(": \u5355\u5C42\u5B50\u76EE\u5F55\u52A0\u5BC6, \u5982 /music*, \u8868\u793A\u6839\u76EE\u5F55\u4E0B\u7684 music \u6587\u4EF6\u5939\u9700\u8981\u5BC6\u7801\u8BBF\u95EE, \u5B50\u6587\u4EF6\u5939\u4E0D\u52A0\u5BC6.")],-1)),ve=p(()=>t("div",{class:"rules-tips"},[t("b",null,"/music**"),d(": \u5D4C\u5957\u5B50\u76EE\u5F55\u52A0\u5BC6, \u5982 /music**, \u8868\u793A\u6839\u76EE\u5F55\u4E0B\u7684 music \u6587\u4EF6\u5939\u53CA\u5176\u6240\u6709\u5B50\u6587\u4EF6\u5939\u90FD\u9700\u8981\u5BC6\u7801\u8BBF\u95EE.")],-1)),ge=p(()=>t("div",{class:"rules-tips"},"\u6CE8\uFF1A\u7CFB\u7EDF\u5339\u914D\u5230\u7B2C\u4E00\u4E2A\u7B26\u5408\u7684\u89C4\u5219\u5C31\u4F1A\u53D6\u5BC6\u7801\u8FDB\u884C\u6821\u9A8C\uFF0C\u5E76\u8FD4\u56DE\u7ED3\u679C\uFF0C\u6240\u4EE5\u8BF7\u8C03\u6574\u597D\u89C4\u5219\u987A\u5E8F\uFF0C\u4E0B\u65B9\u89C4\u5219\u53EF\u8FDB\u884C\u62D6\u62FD\u6392\u5E8F\u3002",-1)),xe={class:"rules-tips-link"},be={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},ke=p(()=>t("span",null,"\u53C2\u8003\u6587\u7AE0 (Wikipedia)",-1)),ye={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},Ie=d("\u53C2\u8003\u6587\u7AE0 (\u962E\u4E00\u5CF0)"),Ee={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},Ve=d("\u53C2\u8003\u6587\u7AE0 (Github)"),Pe={class:"sm:flex sm:space-x-2 sm:border-b-0 sm:pb-0 border-b pb-2"},Se=d("\u6DFB\u52A0\u66F4\u591A"),ze=d("\u4FDD\u5B58\u8BBE\u7F6E"),B={__name:"[storageId]",setup(l){let u=q(),m=M();const{loading:v,loadPasswordData:g,passwordList:_,addPasswordItem:f,deletePasswordItem:V,savePasswordData:i}=me(m,u);return T(()=>{g()}),(e,h)=>{const C=Y,U=H("router-link"),F=X,x=de,L=O,b=K,R=pe;return N((w(),E(ee,{model:o(_),class:"zfile-admin-password-form"},{"form-title":r(()=>[t("div",ue,[s(U,{to:"/admin/storage-list"},{default:r(()=>[s(C,{class:"inline mr-2 cursor-pointer",name:"file-type-back"})]),_:1}),_e])]),"form-sub-title":r(()=>[s(F,{closable:!1,type:"info"},{default:r(()=>[fe,he,we,ve,ge,t("div",xe,[t("a",be,[s(o(k),{class:"inline mr-1"}),ke]),t("a",ye,[s(o(k),{class:"inline mr-1"}),Ie]),t("a",Ee,[s(o(k),{class:"inline mr-1"}),Ve])])]),_:1})]),footer:r(()=>[s(b,{type:"primary",size:"default",icon:o(ne),onClick:o(i)},{default:r(()=>[ze]),_:1},8,["icon","onClick"])]),default:r(()=>[(w(!0),Z(j,null,$(o(_),(n,D)=>(w(),E(P,{required:!0,key:n,class:"expression-item"},{default:r(()=>[t("div",Pe,[s(L,{content:"\u6B64\u5904\u53EF\u586B\u5199\u8868\u8FBE\u4E66\u63CF\u8FF0\uFF0C\u7528\u4E8E\u8F85\u52A9\u8BB0\u5FC6\uFF0C\u9632\u6B62\u65F6\u95F4\u8FC7\u957F\u540E\u4E0D\u77E5\u9053\u8868\u8FBE\u5F0F\u542B\u4E49.",placement:"top"},{default:r(()=>[s(x,{"prefix-icon":o(J),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F\u63CF\u8FF0",modelValue:n.description,"onUpdate:modelValue":c=>n.description=c},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]),_:2},1024),s(x,{"prefix-icon":o(se),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F",modelValue:n.expression,"onUpdate:modelValue":c=>n.expression=c},null,8,["prefix-icon","modelValue","onUpdate:modelValue"]),s(x,{"prefix-icon":o(ce),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"password","show-password":"",modelValue:n.password,"onUpdate:modelValue":c=>n.password=c},null,8,["prefix-icon","modelValue","onUpdate:modelValue"]),s(b,{type:"danger",onClick:c=>o(V)(D),icon:o(Q)},null,8,["onClick","icon"])])]),_:2},1024))),128)),s(P,null,{default:r(()=>[s(b,{type:"primary",size:"default",icon:o(W),onClick:o(f)},{default:r(()=>[Se]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["model"])),[[R,o(v)]])}}};typeof S=="function"&&S(B);var at=le(B,[["__scopeId","data-v-62a29772"]]);export{at as default};
