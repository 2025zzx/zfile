import{d as ne,r as te,W as le,c as g,w as ie,o as ae,ak as ue,a as m,f as z,Q as W,u as n,n as C,B as V,h as F,e as Y,b as y,k as $,j as B,m as se}from"./index.13a41ddb.js";import{E as oe}from"./index.035ac3f6.js";import{b as pe,S as de,V as d,k as v,u as ce,aq as be,J as I,W as me,q as _e,Y as he,aQ as fe,E as j,Z as ge,aR as ve,_ as Ne,o as q,w as we}from"./base.5bbd9596.js";import{C as xe,I as Ve,U as ye}from"./event.776e7e11.js";import{u as Ie}from"./index.62076e8c.js";import{v as G}from"./index.7fa0be7b.js";const ke=pe({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:de,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:i=>i===null||d(i)||["min","max"].includes(i),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:i=>i>=0&&i===Number.parseInt(`${i}`,10)}}),Ee={[xe]:(i,k)=>i!==k,blur:i=>i instanceof FocusEvent,focus:i=>i instanceof FocusEvent,[Ve]:i=>d(i)||v(i),[ye]:i=>d(i)||v(i)},Se=["aria-label","onKeydown"],Pe=["aria-label","onKeydown"],Ae={name:"ElInputNumber"},ze=ne({...Ae,props:ke,emits:Ee,setup(i,{expose:k,emit:c}){const t=i,{t:T}=Ie(),p=ce("input-number"),h=te(),u=le({currentValue:t.modelValue,userInput:null}),{formItem:_}=be(),D=g(()=>d(t.modelValue)&&N(t.modelValue,-1)<t.min),K=g(()=>d(t.modelValue)&&N(t.modelValue)>t.max),L=g(()=>{const e=U(t.step);return I(t.precision)?Math.max(U(t.modelValue),e):(e>t.precision,t.precision)}),E=g(()=>t.controls&&t.controlsPosition==="right"),M=me(),f=_e(),Q=g(()=>{if(u.userInput!==null)return u.userInput;let e=u.currentValue;if(v(e))return"";if(d(e)){if(Number.isNaN(e))return"";I(t.precision)||(e=e.toFixed(t.precision))}return e}),O=(e,r)=>{if(I(r)&&(r=L.value),r===0)return Math.round(e);let l=String(e);const a=l.indexOf(".");if(a===-1||!l.replace(".","").split("")[a+r])return e;const w=l.length;return l.charAt(w-1)==="5"&&(l=`${l.slice(0,Math.max(0,w-1))}6`),Number.parseFloat(Number(l).toFixed(r))},U=e=>{if(v(e))return 0;const r=e.toString(),l=r.indexOf(".");let a=0;return l!==-1&&(a=r.length-l-1),a},N=(e,r=1)=>d(e)?O(e+t.step*r):u.currentValue,S=()=>{if(f.value||K.value)return;const e=t.modelValue||0,r=N(e);A(r)},P=()=>{if(f.value||D.value)return;const e=t.modelValue||0,r=N(e,-1);A(r)},R=(e,r)=>{const{max:l,min:a,step:s,precision:b,stepStrictly:w,valueOnClear:x}=t;let o=Number(e);if(v(e)||Number.isNaN(o))return null;if(e===""){if(x===null)return null;o=se(x)?{min:a,max:l}[x]:x}return w&&(o=Math.round(o/s)*s),I(b)||(o=O(o,b)),(o>l||o<a)&&(o=o>l?l:a,r&&c("update:modelValue",o)),o},A=e=>{var r;const l=u.currentValue,a=R(e);l!==a&&(u.userInput=null,c("update:modelValue",a),c("input",a),c("change",a,l),(r=_==null?void 0:_.validate)==null||r.call(_,"change").catch(s=>q()),u.currentValue=a)},H=e=>u.userInput=e,J=e=>{const r=e!==""?Number(e):"";(d(r)&&!Number.isNaN(r)||e==="")&&A(r),u.userInput=null},Z=()=>{var e,r;(r=(e=h.value)==null?void 0:e.focus)==null||r.call(e)},X=()=>{var e,r;(r=(e=h.value)==null?void 0:e.blur)==null||r.call(e)},ee=e=>{c("focus",e)},re=e=>{var r;c("blur",e),(r=_==null?void 0:_.validate)==null||r.call(_,"blur").catch(l=>q())};return ie(()=>t.modelValue,e=>{u.currentValue=R(e,!0),u.userInput=null},{immediate:!0}),ae(()=>{var e;const{min:r,max:l,modelValue:a}=t,s=(e=h.value)==null?void 0:e.input;if(s.setAttribute("role","spinbutton"),Number.isFinite(l)?s.setAttribute("aria-valuemax",String(l)):s.removeAttribute("aria-valuemax"),Number.isFinite(r)?s.setAttribute("aria-valuemin",String(r)):s.removeAttribute("aria-valuemin"),s.setAttribute("aria-valuenow",String(u.currentValue)),s.setAttribute("aria-disabled",String(f.value)),!d(a)&&a!=null){let b=Number(a);Number.isNaN(b)&&(b=null),c("update:modelValue",b)}}),ue(()=>{var e;const r=(e=h.value)==null?void 0:e.input;r==null||r.setAttribute("aria-valuenow",`${u.currentValue}`)}),k({focus:Z,blur:X}),(e,r)=>(m(),z("div",{class:C([n(p).b(),n(p).m(n(M)),n(p).is("disabled",n(f)),n(p).is("without-controls",!e.controls),n(p).is("controls-right",n(E))]),onDragstart:r[0]||(r[0]=B(()=>{},["prevent"]))},[e.controls?W((m(),z("span",{key:0,role:"button","aria-label":n(T)("el.inputNumber.decrease"),class:C([n(p).e("decrease"),n(p).is("disabled",n(D))]),onKeydown:V(P,["enter"])},[F(n(j),null,{default:Y(()=>[n(E)?(m(),y(n(he),{key:0})):(m(),y(n(fe),{key:1}))]),_:1})],42,Se)),[[n(G),P]]):$("v-if",!0),e.controls?W((m(),z("span",{key:1,role:"button","aria-label":n(T)("el.inputNumber.increase"),class:C([n(p).e("increase"),n(p).is("disabled",n(K))]),onKeydown:V(S,["enter"])},[F(n(j),null,{default:Y(()=>[n(E)?(m(),y(n(ge),{key:0})):(m(),y(n(ve),{key:1}))]),_:1})],42,Pe)),[[n(G),S]]):$("v-if",!0),F(n(oe),{id:e.id,ref_key:"input",ref:h,type:"number",step:e.step,"model-value":n(Q),placeholder:e.placeholder,disabled:n(f),size:n(M),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[V(B(S,["prevent"]),["up"]),V(B(P,["prevent"]),["down"])],onBlur:re,onFocus:ee,onInput:H,onChange:J},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}});var Ce=Ne(ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Oe=we(Ce);export{Oe as E};
