import{u as R,b as J}from"./request.19cbe8c5.js";import{d as O,E as Z,r,c as P,H as ee,x as X,a as H,b as $,e as K,Q as te,R as le,p as M,n as T,u as m,i as A,T as ae,f as q,h as D,F as se,w as j,Y as U,v as oe,V as re,o as ne,ag as ie,g as ce,q as ue,k as ve,a5 as fe}from"./index.bbf7818f.js";import{b as W,u as F,t as me,_ as Y,L as de,d as he,Q as E,I as V,w as pe}from"./base.197bc1e5.js";const Q=Symbol("scrollbarContextKey"),z=4,be={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},ye=({move:d,size:n,bar:h})=>({[h.size]:n,transform:`translate${h.axis}(${d}%)`}),ge=W({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),we=O({__name:"thumb",props:ge,setup(d){const n=d,h="Thumb",l=Z(Q),i=F("scrollbar");l||me(h,"can not inject scrollbar context");const c=r(),s=r(),p=r({}),a=r(!1);let g=!1,w=!1,S=de?document.onselectstart:null;const t=P(()=>be[n.vertical?"vertical":"horizontal"]),C=P(()=>ye({size:n.size,move:n.move,bar:t.value})),_=P(()=>c.value[t.value.offset]**2/l.wrapElement[t.value.scrollSize]/n.ratio/s.value[t.value.offset]),N=o=>{var u;if(o.stopPropagation(),o.ctrlKey||[1,2].includes(o.button))return;(u=window.getSelection())==null||u.removeAllRanges(),x(o);const v=o.currentTarget;!v||(p.value[t.value.axis]=v[t.value.offset]-(o[t.value.client]-v.getBoundingClientRect()[t.value.direction]))},B=o=>{if(!s.value||!c.value||!l.wrapElement)return;const u=Math.abs(o.target.getBoundingClientRect()[t.value.direction]-o[t.value.client]),v=s.value[t.value.offset]/2,y=(u-v)*100*_.value/c.value[t.value.offset];l.wrapElement[t.value.scroll]=y*l.wrapElement[t.value.scrollSize]/100},x=o=>{o.stopImmediatePropagation(),g=!0,document.addEventListener("mousemove",L),document.addEventListener("mouseup",k),S=document.onselectstart,document.onselectstart=()=>!1},L=o=>{if(!c.value||!s.value||g===!1)return;const u=p.value[t.value.axis];if(!u)return;const v=(c.value.getBoundingClientRect()[t.value.direction]-o[t.value.client])*-1,y=s.value[t.value.offset]-u,G=(v-y)*100*_.value/c.value[t.value.offset];l.wrapElement[t.value.scroll]=G*l.wrapElement[t.value.scrollSize]/100},k=()=>{g=!1,p.value[t.value.axis]=0,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",k),f(),w&&(a.value=!1)},b=()=>{w=!1,a.value=!!n.size},e=()=>{w=!0,a.value=g};ee(()=>{f(),document.removeEventListener("mouseup",k)});const f=()=>{document.onselectstart!==S&&(document.onselectstart=S)};return R(X(l,"scrollbarElement"),"mousemove",b),R(X(l,"scrollbarElement"),"mouseleave",e),(o,u)=>(H(),$(ae,{name:m(i).b("fade"),persisted:""},{default:K(()=>[te(M("div",{ref_key:"instance",ref:c,class:T([m(i).e("bar"),m(i).is(m(t).key)]),onMousedown:B},[M("div",{ref_key:"thumb",ref:s,class:T(m(i).e("thumb")),style:A(m(C)),onMousedown:N},null,38)],34),[[le,o.always||a.value]])]),_:1},8,["name"]))}});var I=Y(we,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Se=W({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),ze=O({__name:"bar",props:Se,setup(d,{expose:n}){const h=d,l=r(0),i=r(0);return n({handleScroll:s=>{if(s){const p=s.offsetHeight-z,a=s.offsetWidth-z;i.value=s.scrollTop*100/p*h.ratioY,l.value=s.scrollLeft*100/a*h.ratioX}}}),(s,p)=>(H(),q(se,null,[D(I,{move:l.value,ratio:s.ratioX,size:s.width,always:s.always},null,8,["move","ratio","size","always"]),D(I,{move:i.value,ratio:s.ratioY,size:s.height,vertical:"",always:s.always},null,8,["move","ratio","size","always"])],64))}});var _e=Y(ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const ke=W({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:he([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Ee={scroll:({scrollTop:d,scrollLeft:n})=>[d,n].every(E)},He={name:"ElScrollbar"},Te=O({...He,props:ke,emits:Ee,setup(d,{expose:n,emit:h}){const l=d,i=F("scrollbar");let c,s;const p=r(),a=r(),g=r(),w=r("0"),S=r("0"),t=r(),C=r(1),_=r(1),N=P(()=>{const e={};return l.height&&(e.height=V(l.height)),l.maxHeight&&(e.maxHeight=V(l.maxHeight)),[l.wrapStyle,e]}),B=()=>{var e;a.value&&((e=t.value)==null||e.handleScroll(a.value),h("scroll",{scrollTop:a.value.scrollTop,scrollLeft:a.value.scrollLeft}))};function x(e,f){fe(e)?a.value.scrollTo(e):E(e)&&E(f)&&a.value.scrollTo(e,f)}const L=e=>{!E(e)||(a.value.scrollTop=e)},k=e=>{!E(e)||(a.value.scrollLeft=e)},b=()=>{if(!a.value)return;const e=a.value.offsetHeight-z,f=a.value.offsetWidth-z,o=e**2/a.value.scrollHeight,u=f**2/a.value.scrollWidth,v=Math.max(o,l.minSize),y=Math.max(u,l.minSize);C.value=o/(e-o)/(v/(e-v)),_.value=u/(f-u)/(y/(f-y)),S.value=v+z<e?`${v}px`:"",w.value=y+z<f?`${y}px`:""};return j(()=>l.noresize,e=>{e?(c==null||c(),s==null||s()):({stop:c}=J(g,b),s=R("resize",b))},{immediate:!0}),j(()=>[l.maxHeight,l.height],()=>{l.native||U(()=>{var e;b(),a.value&&((e=t.value)==null||e.handleScroll(a.value))})}),oe(Q,re({scrollbarElement:p,wrapElement:a})),ne(()=>{l.native||U(()=>b())}),ie(()=>b()),n({wrap$:a,update:b,scrollTo:x,setScrollTop:L,setScrollLeft:k,handleScroll:B}),(e,f)=>(H(),q("div",{ref_key:"scrollbar$",ref:p,class:T(m(i).b())},[M("div",{ref_key:"wrap$",ref:a,class:T([e.wrapClass,m(i).e("wrap"),{[m(i).em("wrap","hidden-default")]:!e.native}]),style:A(m(N)),onScroll:B},[(H(),$(ue(e.tag),{ref_key:"resize$",ref:g,class:T([m(i).e("view"),e.viewClass]),style:A(e.viewStyle)},{default:K(()=>[ce(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?ve("v-if",!0):(H(),$(_e,{key:0,ref_key:"barRef",ref:t,height:S.value,width:w.value,always:e.always,"ratio-x":_.value,"ratio-y":C.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Ce=Y(Te,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Ne=pe(Ce);export{Ne as E};
