import{b as be,d as q,I as h,_ as B,K as se,r as de,E as ie,Y as _e,u as x,P as he,W as Ie,w as ye,j as pe}from"./base.2d43833d.js";import{E as Ee,O as Ce}from"./popper.2f8c3069.js";import{E as Te}from"./index.eb655516.js";import{c as Fe,E as ke,d as $e,a as ue,C as Re,b as Oe,e as Se,f as Pe,g as De,F as Ne,L as Ke}from"./dropdown.ca622e74.js";import{a as ze,o as Me,c as S,w as le}from"./event.3ec63147.js";import{d as G,r as E,E as y,c as T,v as V,af as Be,x as L,u as C,w as Ge,o as Ae,H as Le,g as D,ae as b,a as P,b as A,e as v,h as R,A as Ue,aB as Ye,Z as He,a0 as ce,f as J,I as Ve,z as U,n as Q,k as X,p as Je,q as We,F as je,i as qe}from"./index.43c9e4f9.js";import{u as Ze}from"./index.e5bf6ee1.js";import{c as me}from"./refs.5613fc2d.js";import{F as Qe}from"./focus-trap.868ba1a1.js";const Xe=be({style:{type:q([String,Array,Object])},currentTabId:{type:q(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:q(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:xe,ElCollectionItem:eo,COLLECTION_INJECTION_KEY:ee,COLLECTION_ITEM_INJECTION_KEY:oo}=Fe("RovingFocusGroup"),oe=Symbol("elRovingFocusGroup"),fe=Symbol("elRovingFocusGroupItem"),no={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},ro=(e,o)=>{if(o!=="rtl")return e;switch(e){case h.right:return h.left;case h.left:return h.right;default:return e}},to=(e,o,s)=>{const r=ro(e.key,s);if(!(o==="vertical"&&[h.left,h.right].includes(r))&&!(o==="horizontal"&&[h.up,h.down].includes(r)))return no[r]},lo=(e,o)=>e.map((s,r)=>e[(r+o)%e.length]),ne=e=>{const{activeElement:o}=document;for(const s of e)if(s===o||(s.focus(),o!==document.activeElement))return},ae="currentTabIdChange",Z="rovingFocusGroup.entryFocus",ao={bubbles:!1,cancelable:!0},so=G({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Xe,emits:[ae,"entryFocus"],setup(e,{emit:o}){var s;const r=E((s=e.currentTabId||e.defaultCurrentTabId)!=null?s:null),i=E(!1),u=E(!1),t=E(null),{getItems:l}=y(ee,void 0),c=T(()=>[{outline:"none"},e.style]),w=a=>{o(ae,a)},g=()=>{i.value=!0},_=S(a=>{var m;(m=e.onMousedown)==null||m.call(e,a)},()=>{u.value=!0}),I=S(a=>{var m;(m=e.onFocus)==null||m.call(e,a)},a=>{const m=!C(u),{target:N,currentTarget:F}=a;if(N===F&&m&&!C(i)){const K=new Event(Z,ao);if(F==null||F.dispatchEvent(K),!K.defaultPrevented){const f=l().filter($=>$.focusable),O=f.find($=>$.active),k=f.find($=>$.id===C(r)),M=[O,k,...f].filter(Boolean).map($=>$.ref);ne(M)}}u.value=!1}),n=S(a=>{var m;(m=e.onBlur)==null||m.call(e,a)},()=>{i.value=!1}),d=(...a)=>{o("entryFocus",...a)};V(oe,{currentTabbedId:Be(r),loop:L(e,"loop"),tabIndex:T(()=>C(i)?-1:0),rovingFocusGroupRef:t,rovingFocusGroupRootStyle:c,orientation:L(e,"orientation"),dir:L(e,"dir"),onItemFocus:w,onItemShiftTab:g,onBlur:n,onFocus:I,onMousedown:_}),Ge(()=>e.currentTabId,a=>{r.value=a!=null?a:null}),Ae(()=>{const a=C(t);ze(a,Z,d)}),Le(()=>{const a=C(t);Me(a,Z,d)})}});function io(e,o,s,r,i,u){return D(e.$slots,"default")}var po=B(so,[["render",io],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const uo=G({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:xe,ElRovingFocusGroupImpl:po}});function co(e,o,s,r,i,u){const t=b("el-roving-focus-group-impl"),l=b("el-focus-group-collection");return P(),A(l,null,{default:v(()=>[R(t,Ue(Ye(e.$attrs)),{default:v(()=>[D(e.$slots,"default")]),_:3},16)]),_:3})}var mo=B(uo,[["render",co],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const fo=G({components:{ElRovingFocusCollectionItem:eo},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:s,loop:r,onItemFocus:i,onItemShiftTab:u}=y(oe,void 0),{getItems:t}=y(ee,void 0),l=se(),c=E(null),w=S(n=>{o("mousedown",n)},n=>{e.focusable?i(C(l)):n.preventDefault()}),g=S(n=>{o("focus",n)},()=>{i(C(l))}),_=S(n=>{o("keydown",n)},n=>{const{key:d,shiftKey:a,target:m,currentTarget:N}=n;if(d===h.tab&&a){u();return}if(m!==N)return;const F=to(n);if(F){n.preventDefault();let f=t().filter(O=>O.focusable).map(O=>O.ref);switch(F){case"last":{f.reverse();break}case"prev":case"next":{F==="prev"&&f.reverse();const O=f.indexOf(N);f=r.value?lo(f,O+1):f.slice(O+1);break}}He(()=>{ne(f)})}}),I=T(()=>s.value===C(l));return V(fe,{rovingFocusGroupItemRef:c,tabIndex:T(()=>C(I)?0:-1),handleMousedown:w,handleFocus:g,handleKeydown:_}),{id:l,handleKeydown:_,handleFocus:g,handleMousedown:w}}});function vo(e,o,s,r,i,u){const t=b("el-roving-focus-collection-item");return P(),A(t,{id:e.id,focusable:e.focusable,active:e.active},{default:v(()=>[D(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var wo=B(fo,[["render",vo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const W=Symbol("elDropdown"),{ButtonGroup:go}=de,bo=G({name:"ElDropdown",components:{ElButton:de,ElButtonGroup:go,ElScrollbar:Te,ElDropdownCollection:ke,ElTooltip:Ee,ElRovingFocusGroup:mo,ElOnlyChild:Ce,ElIcon:ie,ArrowDown:_e},props:$e,emits:["visible-change","click","command"],setup(e,{emit:o}){const s=ce(),r=x("dropdown"),{t:i}=Ze(),u=E(),t=E(),l=E(null),c=E(null),w=E(null),g=E(null),_=E(!1),I=[h.enter,h.space,h.down],n=T(()=>({maxHeight:he(e.maxHeight)})),d=T(()=>[r.m(f.value)]),a=se().value,m=T(()=>e.id||a);function N(){F()}function F(){var p;(p=l.value)==null||p.onClose()}function K(){var p;(p=l.value)==null||p.onOpen()}const f=Ie();function O(...p){o("command",...p)}function k(){}function z(){const p=C(c);p==null||p.focus(),g.value=null}function M(p){g.value=p}function $(p){_.value||(p.preventDefault(),p.stopImmediatePropagation())}function re(p){(p==null?void 0:p.type)==="keydown"&&c.value.focus(),o("visible-change",!0)}function Y(){o("visible-change",!1)}return V(W,{contentRef:c,role:T(()=>e.role),triggerId:m,isUsingKeyboard:_,onItemEnter:k,onItemLeave:z}),V("elDropdown",{instance:s,dropdownSize:f,handleClick:N,commandHandler:O,trigger:L(e,"trigger"),hideOnClick:L(e,"hideOnClick")}),{t:i,ns:r,scrollbar:w,wrapStyle:n,dropdownTriggerKls:d,dropdownSize:f,triggerId:m,triggerKeys:I,currentTabId:g,handleCurrentTabIdChange:M,handlerMainButtonClick:p=>{o("click",p)},handleEntryFocus:$,handleClose:F,handleOpen:K,handleShowTooltip:re,handleHideTooltip:Y,onFocusAfterTrapped:p=>{var j,te;p.preventDefault(),(te=(j=c.value)==null?void 0:j.focus)==null||te.call(j,{preventScroll:!0})},popperRef:l,contentRef:c,triggeringElementRef:u,referenceElementRef:t}}});function _o(e,o,s,r,i,u){var t;const l=b("el-dropdown-collection"),c=b("el-roving-focus-group"),w=b("el-scrollbar"),g=b("el-only-child"),_=b("el-tooltip"),I=b("el-button"),n=b("arrow-down"),d=b("el-icon"),a=b("el-button-group");return P(),J("div",{class:Q([e.ns.b(),e.ns.is("disabled",e.disabled)])},[R(_,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(t=e.referenceElementRef)==null?void 0:t.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:"",pure:"",persistent:"",onShow:e.handleShowTooltip,onHide:e.handleHideTooltip},Ve({content:v(()=>[R(w,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:v(()=>[R(c,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:v(()=>[R(l,null,{default:v(()=>[D(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:v(()=>[R(g,{id:e.triggerId,role:"button",tabindex:e.tabindex},{default:v(()=>[D(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","onShow","onHide"]),e.splitButton?(P(),A(a,{key:0},{default:v(()=>[R(I,U({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:v(()=>[D(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),R(I,U({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:v(()=>[R(d,{class:Q(e.ns.e("icon"))},{default:v(()=>[R(n)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):X("v-if",!0)],2)}var ho=B(bo,[["render",_o],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const Io=G({name:"DropdownItemImpl",components:{ElIcon:ie},props:ue,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const s=x("dropdown"),{role:r}=y(W,void 0),{collectionItemRef:i}=y(Re,void 0),{collectionItemRef:u}=y(oo,void 0),{rovingFocusGroupItemRef:t,tabIndex:l,handleFocus:c,handleKeydown:w,handleMousedown:g}=y(fe,void 0),_=me(i,u,t),I=T(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),n=S(d=>{const{code:a}=d;if(a===h.enter||a===h.space)return d.preventDefault(),d.stopImmediatePropagation(),o("clickimpl",d),!0},w);return{ns:s,itemRef:_,dataset:{[Oe]:""},role:I,tabIndex:l,handleFocus:c,handleKeydown:n,handleMousedown:g}}}),yo=["aria-disabled","tabindex","role"];function Eo(e,o,s,r,i,u){const t=b("el-icon");return P(),J(je,null,[e.divided?(P(),J("li",U({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):X("v-if",!0),Je("li",U({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=l=>e.$emit("clickimpl",l)),onFocus:o[1]||(o[1]=(...l)=>e.handleFocus&&e.handleFocus(...l)),onKeydown:o[2]||(o[2]=(...l)=>e.handleKeydown&&e.handleKeydown(...l)),onMousedown:o[3]||(o[3]=(...l)=>e.handleMousedown&&e.handleMousedown(...l)),onPointermove:o[4]||(o[4]=l=>e.$emit("pointermove",l)),onPointerleave:o[5]||(o[5]=l=>e.$emit("pointerleave",l))}),[e.icon?(P(),A(t,{key:0},{default:v(()=>[(P(),A(We(e.icon)))]),_:1})):X("v-if",!0),D(e.$slots,"default")],16,yo)],64)}var Co=B(Io,[["render",Eo],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const ve=()=>{const e=y("elDropdown",{}),o=T(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},To=G({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Se,ElRovingFocusItem:wo,ElDropdownItemImpl:Co},inheritAttrs:!1,props:ue,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:s}){const{elDropdown:r}=ve(),i=ce(),u=E(null),t=T(()=>{var n,d;return(d=(n=C(u))==null?void 0:n.textContent)!=null?d:""}),{onItemEnter:l,onItemLeave:c}=y(W,void 0),w=S(n=>(o("pointermove",n),n.defaultPrevented),le(n=>{var d;e.disabled?c(n):(l(n),n.defaultPrevented||(d=n.currentTarget)==null||d.focus())})),g=S(n=>(o("pointerleave",n),n.defaultPrevented),le(n=>{c(n)})),_=S(n=>(o("click",n),n.type!=="keydown"&&n.defaultPrevented),n=>{var d,a,m;if(e.disabled){n.stopImmediatePropagation();return}(d=r==null?void 0:r.hideOnClick)!=null&&d.value&&((a=r.handleClick)==null||a.call(r)),(m=r.commandHandler)==null||m.call(r,e.command,i,n)}),I=T(()=>({...e,...s}));return{handleClick:_,handlePointerMove:w,handlePointerLeave:g,textContent:t,propsAndAttrs:I}}});function Fo(e,o,s,r,i,u){var t;const l=b("el-dropdown-item-impl"),c=b("el-roving-focus-item"),w=b("el-dropdown-collection-item");return P(),A(w,{disabled:e.disabled,"text-value":(t=e.textValue)!=null?t:e.textContent},{default:v(()=>[R(c,{focusable:!e.disabled},{default:v(()=>[R(l,U(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:v(()=>[D(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var we=B(To,[["render",Fo],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const ko=G({name:"ElDropdownMenu",props:Pe,setup(e){const o=x("dropdown"),{_elDropdownSize:s}=ve(),r=s.value,{focusTrapRef:i,onKeydown:u}=y(Qe,void 0),{contentRef:t,role:l,triggerId:c}=y(W,void 0),{collectionRef:w,getItems:g}=y(De,void 0),{rovingFocusGroupRef:_,rovingFocusGroupRootStyle:I,tabIndex:n,onBlur:d,onFocus:a,onMousedown:m}=y(oe,void 0),{collectionRef:N}=y(ee,void 0),F=T(()=>[o.b("menu"),o.bm("menu",r==null?void 0:r.value)]),K=me(t,w,i,_,N),f=S(k=>{var z;(z=e.onKeydown)==null||z.call(e,k)},k=>{const{currentTarget:z,code:M,target:$}=k;if(z.contains($),h.tab===M&&k.stopImmediatePropagation(),k.preventDefault(),$!==C(t)||!Ne.includes(M))return;const Y=g().filter(H=>!H.disabled).map(H=>H.ref);Ke.includes(M)&&Y.reverse(),ne(Y)});return{size:r,rovingFocusGroupRootStyle:I,tabIndex:n,dropdownKls:F,role:l,triggerId:c,dropdownListWrapperRef:K,handleKeydown:k=>{f(k),u(k)},onBlur:d,onFocus:a,onMousedown:m}}}),$o=["role","aria-labelledby"];function Ro(e,o,s,r,i,u){return P(),J("ul",{ref:e.dropdownListWrapperRef,class:Q(e.dropdownKls),style:qe(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...t)=>e.onBlur&&e.onBlur(...t)),onFocus:o[1]||(o[1]=(...t)=>e.onFocus&&e.onFocus(...t)),onKeydown:o[2]||(o[2]=(...t)=>e.handleKeydown&&e.handleKeydown(...t)),onMousedown:o[3]||(o[3]=(...t)=>e.onMousedown&&e.onMousedown(...t))},[D(e.$slots,"default")],46,$o)}var ge=B(ko,[["render",Ro],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const Ao=ye(ho,{DropdownItem:we,DropdownMenu:ge}),Lo=pe(we),Uo=pe(ge);export{Lo as E,Uo as a,Ao as b};
