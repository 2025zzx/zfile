import{aa as ee,ab as ct,ac as $e,ad as Oe,ae as mt,af as ce,ag as Ce,b as Ee,d as H,ah as Le,C as We,W as Me,u as te,o as pt,T as re,_ as Pe,G as J,t as gt,K as vt,ai as bt,P as me,a3 as k,w as ht,j as yt}from"./base.5bbd9596.js";import{D as _t,m as Z,r as O,c as v,d as oe,w as P,v as Be,W as ze,ad as Ne,a as Q,f as Ue,g as W,n as E,u as g,l as Re,E as B,o as Ve,H as qe,ak as xt,h as z,F as wt,Z as De,G as Tt,e as Y,b as St,J as At,t as pe,i as ge,q as jt,k as ve,p as be,T as It}from"./index.13a41ddb.js";import{S as Ft}from"./index.5cf4e3bb.js";import{c as $t}from"./request.a43d7f63.js";import{i as Ge,a as Ot,b as Ct,o as Et,k as Ke,g as ke,s as Lt,c as Wt,d as Mt,U as he,e as ne,n as N,f as Ye,h as Pt,S as Bt,j as zt,l as Nt}from"./isEqual.7a31bf9e.js";var ye=Object.create,Ut=function(){function e(){}return function(r){if(!ee(r))return{};if(ye)return ye(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}(),Rt=Ut;function Vt(e,r){var t=-1,l=e.length;for(r||(r=Array(l));++t<l;)r[t]=e[t];return r}function qt(e,r){for(var t=-1,l=e==null?0:e.length;++t<l&&r(e[t],t,e)!==!1;);return e}function U(e,r,t,l){var o=!t;t||(t={});for(var i=-1,a=r.length;++i<a;){var s=r[i],b=l?l(t[s],e[s],s,t,e):void 0;b===void 0&&(b=e[s]),o?ct(t,s,b):$e(t,s,b)}return t}function Dt(e){var r=[];if(e!=null)for(var t in Object(e))r.push(t);return r}var Gt=Object.prototype,Kt=Gt.hasOwnProperty;function kt(e){if(!ee(e))return Dt(e);var r=Ge(e),t=[];for(var l in e)l=="constructor"&&(r||!Kt.call(e,l))||t.push(l);return t}function le(e){return Ot(e)?Ct(e,!0):kt(e)}var Yt=Et(Object.getPrototypeOf,Object),He=Yt;function X(){if(!arguments.length)return[];var e=arguments[0];return Oe(e)?e:[e]}function Ht(e,r){return e&&U(r,Ke(r),e)}function Jt(e,r){return e&&U(r,le(r),e)}var Je=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_e=Je&&typeof module=="object"&&module&&!module.nodeType&&module,Zt=_e&&_e.exports===Je,xe=Zt?mt.Buffer:void 0,we=xe?xe.allocUnsafe:void 0;function Qt(e,r){if(r)return e.slice();var t=e.length,l=we?we(t):new e.constructor(t);return e.copy(l),l}function Xt(e,r){return U(e,ke(e),r)}var er=Object.getOwnPropertySymbols,tr=er?function(e){for(var r=[];e;)Wt(r,ke(e)),e=He(e);return r}:Lt,Ze=tr;function rr(e,r){return U(e,Ze(e),r)}function or(e){return Mt(e,le,Ze)}var nr=Object.prototype,lr=nr.hasOwnProperty;function ar(e){var r=e.length,t=new e.constructor(r);return r&&typeof e[0]=="string"&&lr.call(e,"index")&&(t.index=e.index,t.input=e.input),t}function ae(e){var r=new e.constructor(e.byteLength);return new he(r).set(new he(e)),r}function ir(e,r){var t=r?ae(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}var sr=/\w*$/;function ur(e){var r=new e.constructor(e.source,sr.exec(e));return r.lastIndex=e.lastIndex,r}var Te=ce?ce.prototype:void 0,Se=Te?Te.valueOf:void 0;function fr(e){return Se?Object(Se.call(e)):{}}function dr(e,r){var t=r?ae(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var cr="[object Boolean]",mr="[object Date]",pr="[object Map]",gr="[object Number]",vr="[object RegExp]",br="[object Set]",hr="[object String]",yr="[object Symbol]",_r="[object ArrayBuffer]",xr="[object DataView]",wr="[object Float32Array]",Tr="[object Float64Array]",Sr="[object Int8Array]",Ar="[object Int16Array]",jr="[object Int32Array]",Ir="[object Uint8Array]",Fr="[object Uint8ClampedArray]",$r="[object Uint16Array]",Or="[object Uint32Array]";function Cr(e,r,t){var l=e.constructor;switch(r){case _r:return ae(e);case cr:case mr:return new l(+e);case xr:return ir(e,t);case wr:case Tr:case Sr:case Ar:case jr:case Ir:case Fr:case $r:case Or:return dr(e,t);case pr:return new l;case gr:case hr:return new l(e);case vr:return ur(e);case br:return new l;case yr:return fr(e)}}function Er(e){return typeof e.constructor=="function"&&!Ge(e)?Rt(He(e)):{}}var Lr="[object Map]";function Wr(e){return Ce(e)&&ne(e)==Lr}var Ae=N&&N.isMap,Mr=Ae?Ye(Ae):Wr,Pr=Mr,Br="[object Set]";function zr(e){return Ce(e)&&ne(e)==Br}var je=N&&N.isSet,Nr=je?Ye(je):zr,Ur=Nr,Rr=1,Vr=2,qr=4,Qe="[object Arguments]",Dr="[object Array]",Gr="[object Boolean]",Kr="[object Date]",kr="[object Error]",Xe="[object Function]",Yr="[object GeneratorFunction]",Hr="[object Map]",Jr="[object Number]",et="[object Object]",Zr="[object RegExp]",Qr="[object Set]",Xr="[object String]",eo="[object Symbol]",to="[object WeakMap]",ro="[object ArrayBuffer]",oo="[object DataView]",no="[object Float32Array]",lo="[object Float64Array]",ao="[object Int8Array]",io="[object Int16Array]",so="[object Int32Array]",uo="[object Uint8Array]",fo="[object Uint8ClampedArray]",co="[object Uint16Array]",mo="[object Uint32Array]",d={};d[Qe]=d[Dr]=d[ro]=d[oo]=d[Gr]=d[Kr]=d[no]=d[lo]=d[ao]=d[io]=d[so]=d[Hr]=d[Jr]=d[et]=d[Zr]=d[Qr]=d[Xr]=d[eo]=d[uo]=d[fo]=d[co]=d[mo]=!0;d[kr]=d[Xe]=d[to]=!1;function M(e,r,t,l,o,i){var a,s=r&Rr,b=r&Vr,_=r&qr;if(t&&(a=o?t(e,l,o,i):t(e)),a!==void 0)return a;if(!ee(e))return e;var u=Oe(e);if(u){if(a=ar(e),!s)return Vt(e,a)}else{var p=ne(e),x=p==Xe||p==Yr;if(Pt(e))return Qt(e,s);if(p==et||p==Qe||x&&!o){if(a=b||x?{}:Er(e),!s)return b?rr(e,Jt(a,e)):Xt(e,Ht(a,e))}else{if(!d[p])return o?e:{};a=Cr(e,p,s)}}i||(i=new Bt);var S=i.get(e);if(S)return S;i.set(e,a),Ur(e)?e.forEach(function(h){a.add(M(h,r,t,h,e,i))}):Pr(e)&&e.forEach(function(h,w){a.set(w,M(h,r,t,w,e,i))});var A=_?b?or:zt:b?le:Ke,j=u?void 0:A(e);return qt(j||e,function(h,w){j&&(w=h,h=e[w]),$e(a,w,M(h,r,t,w,e,i))}),a}var po=4;function Ie(e){return M(e,po)}const go=Ee({model:Object,rules:{type:H(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:{type:String,values:Le},disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean}),vo={validate:(e,r,t)=>(_t(e)||Z(e))&&We(r)&&Z(t)};function bo(){const e=O([]),r=v(()=>{if(!e.value.length)return"0";const i=Math.max(...e.value);return i?`${i}px`:""});function t(i){return e.value.indexOf(i)}function l(i,a){if(i&&a){const s=t(a);e.value.splice(s,1,i)}else i&&e.value.push(i)}function o(i){const a=t(i);a>-1&&e.value.splice(a,1)}return{autoLabelWidth:r,registerLabelWidth:l,deregisterLabelWidth:o}}const L=(e,r)=>{const t=X(r);return t.length>0?e.filter(l=>l.prop&&t.includes(l.prop)):e},ho={name:"ElForm"},yo=oe({...ho,props:go,emits:vo,setup(e,{expose:r,emit:t}){const l=e,o=[],i=Me(),a=te("form"),s=v(()=>{const{labelPosition:f,inline:m}=l;return[a.b(),a.m(i.value||"default"),{[a.m(`label-${f}`)]:f,[a.m("inline")]:m}]}),b=f=>{o.push(f)},_=f=>{f.prop&&o.splice(o.indexOf(f),1)},u=(f=[])=>{!l.model||L(o,f).forEach(m=>m.resetField())},p=(f=[])=>{L(o,f).forEach(m=>m.clearValidate())},x=v(()=>!!l.model),S=f=>{if(o.length===0)return[];const m=L(o,f);return m.length?m:[]},A=async f=>h(void 0,f),j=async(f=[])=>{if(!x.value)return!1;const m=S(f);if(m.length===0)return!0;let I={};for(const F of m)try{await F.validate("")}catch($){I={...I,...$}}return Object.keys(I).length===0?!0:Promise.reject(I)},h=async(f=[],m)=>{const I=!Re(m);try{const F=await j(f);return F===!0&&(m==null||m(F)),F}catch(F){const $=F;return l.scrollToError&&w(Object.keys($)[0]),m==null||m(!1,$),I&&Promise.reject($)}},w=f=>{var m;const I=L(o,f)[0];I&&((m=I.$el)==null||m.scrollIntoView())};return P(()=>l.rules,()=>{l.validateOnRuleChange&&A().catch(f=>pt())},{deep:!0}),Be(re,ze({...Ne(l),emit:t,resetFields:u,clearValidate:p,validateField:h,addField:b,removeField:_,...bo()})),r({validate:A,validateField:h,resetFields:u,clearValidate:p,scrollToField:w}),(f,m)=>(Q(),Ue("form",{class:E(g(s))},[W(f.$slots,"default")],2))}});var _o=Pe(yo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);const xo=["","error","validating","success"],wo=Ee({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:H([String,Array])},required:{type:Boolean,default:void 0},rules:{type:H([Object,Array])},error:String,validateStatus:{type:String,values:xo},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Le}}),Fe="ElLabelWrap";var To=oe({name:Fe,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:r}){const t=B(re,void 0);B(J)||gt(Fe,"usage: <el-form-item><label-wrap /></el-form-item>");const o=te("form"),i=O(),a=O(0),s=()=>{var u;if((u=i.value)!=null&&u.firstElementChild){const p=window.getComputedStyle(i.value.firstElementChild).width;return Math.ceil(Number.parseFloat(p))}else return 0},b=(u="update")=>{De(()=>{r.default&&e.isAutoWidth&&(u==="update"?a.value=s():u==="remove"&&(t==null||t.deregisterLabelWidth(a.value)))})},_=()=>b("update");return Ve(()=>{_()}),qe(()=>{b("remove")}),xt(()=>_()),P(a,(u,p)=>{e.updateAll&&(t==null||t.registerLabelWidth(u,p))}),$t(v(()=>{var u,p;return(p=(u=i.value)==null?void 0:u.firstElementChild)!=null?p:null}),_),()=>{var u,p;if(!r)return null;const{isAutoWidth:x}=e;if(x){const S=t==null?void 0:t.autoLabelWidth,A={};if(S&&S!=="auto"){const j=Math.max(0,Number.parseInt(S,10)-a.value),h=t.labelPosition==="left"?"marginRight":"marginLeft";j&&(A[h]=`${j}px`)}return z("div",{ref:i,class:[o.be("item","label-wrap")],style:A},[(u=r.default)==null?void 0:u.call(r)])}else return z(wt,{ref:i},[(p=r.default)==null?void 0:p.call(r)])}}});const So=["role","aria-labelledby"],Ao={name:"ElFormItem"},jo=oe({...Ao,props:wo,setup(e,{expose:r}){const t=e,l=Tt(),o=B(re,void 0),i=B(J,void 0),a=Me(void 0,{formItem:!1}),s=te("form-item"),b=vt().value,_=O([]),u=O(""),p=bt(u,100),x=O(""),S=O();let A,j=!1;const h=v(()=>{if((o==null?void 0:o.labelPosition)==="top")return{};const n=me(t.labelWidth||(o==null?void 0:o.labelWidth)||"");return n?{width:n}:{}}),w=v(()=>{if((o==null?void 0:o.labelPosition)==="top"||(o==null?void 0:o.inline))return{};if(!t.label&&!t.labelWidth&&rt)return{};const n=me(t.labelWidth||(o==null?void 0:o.labelWidth)||"");return!t.label&&!l.label?{marginLeft:n}:{}}),f=v(()=>[s.b(),s.m(a.value),s.is("error",u.value==="error"),s.is("validating",u.value==="validating"),s.is("success",u.value==="success"),s.is("required",lt.value||t.required),s.is("no-asterisk",o==null?void 0:o.hideRequiredAsterisk),{[s.m("feedback")]:o==null?void 0:o.statusIcon}]),m=v(()=>We(t.inlineMessage)?t.inlineMessage:(o==null?void 0:o.inlineMessage)||!1),I=v(()=>[s.e("error"),{[s.em("error","inline")]:m.value}]),F=v(()=>t.prop?Z(t.prop)?t.prop:t.prop.join("."):""),$=v(()=>!!(t.label||l.label)),R=v(()=>t.for||_.value.length===1?_.value[0]:void 0),V=v(()=>!R.value&&$.value),rt=!!i,ie=v(()=>{const n=o==null?void 0:o.model;if(!(!n||!t.prop))return k(n,t.prop).value}),q=v(()=>{const n=t.rules?X(t.rules):[],c=o==null?void 0:o.rules;if(c&&t.prop){const y=k(c,t.prop).value;y&&n.push(...X(y))}return t.required!==void 0&&n.push({required:!!t.required}),n}),ot=v(()=>q.value.length>0),nt=n=>q.value.filter(y=>!y.trigger||!n?!0:Array.isArray(y.trigger)?y.trigger.includes(n):y.trigger===n).map(({trigger:y,...T})=>T),lt=v(()=>q.value.some(n=>n.required===!0)),at=v(()=>{var n;return p.value==="error"&&t.showMessage&&((n=o==null?void 0:o.showMessage)!=null?n:!0)}),se=v(()=>`${t.label||""}${(o==null?void 0:o.labelSuffix)||""}`),C=n=>{u.value=n},it=n=>{var c,y;const{errors:T,fields:K}=n;(!T||!K)&&console.error(n),C("error"),x.value=T?(y=(c=T==null?void 0:T[0])==null?void 0:c.message)!=null?y:`${t.prop} is required`:"",o==null||o.emit("validate",t.prop,!1,x.value)},st=()=>{C("success"),o==null||o.emit("validate",t.prop,!0,"")},ut=async n=>{const c=F.value;return new Ft({[c]:n}).validate({[c]:ie.value},{firstFields:!0}).then(()=>(st(),!0)).catch(T=>(it(T),Promise.reject(T)))},ue=async(n,c)=>{if(j)return j=!1,!1;const y=Re(c);if(!ot.value)return c==null||c(!1),!1;const T=nt(n);return T.length===0?(c==null||c(!0),!0):(C("validating"),ut(T).then(()=>(c==null||c(!0),!0)).catch(K=>{const{fields:de}=K;return c==null||c(!1,de),y?!1:Promise.reject(de)}))},D=()=>{C(""),x.value=""},fe=async()=>{const n=o==null?void 0:o.model;if(!n||!t.prop)return;const c=k(n,t.prop);Nt(c.value,A)||(j=!0),c.value=Ie(A),await De(),D()},ft=n=>{_.value.includes(n)||_.value.push(n)},dt=n=>{_.value=_.value.filter(c=>c!==n)};P(()=>t.error,n=>{x.value=n||"",C(n?"error":"")},{immediate:!0}),P(()=>t.validateStatus,n=>C(n||""));const G=ze({...Ne(t),$el:S,size:a,validateState:u,labelId:b,inputIds:_,isGroup:V,addInputId:ft,removeInputId:dt,resetField:fe,clearValidate:D,validate:ue});return Be(J,G),Ve(()=>{t.prop&&(o==null||o.addField(G),A=Ie(ie.value))}),qe(()=>{o==null||o.removeField(G)}),r({size:a,validateMessage:x,validateState:u,validate:ue,clearValidate:D,resetField:fe}),(n,c)=>{var y;return Q(),Ue("div",{ref_key:"formItemRef",ref:S,class:E(g(f)),role:g(V)?"group":void 0,"aria-labelledby":g(V)?g(b):void 0},[z(g(To),{"is-auto-width":g(h).width==="auto","update-all":((y=g(o))==null?void 0:y.labelWidth)==="auto"},{default:Y(()=>[g($)?(Q(),St(jt(g(R)?"label":"div"),{key:0,id:g(b),for:g(R),class:E(g(s).e("label")),style:ge(g(h))},{default:Y(()=>[W(n.$slots,"label",{label:g(se)},()=>[At(pe(g(se)),1)])]),_:3},8,["id","for","class","style"])):ve("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),be("div",{class:E(g(s).e("content")),style:ge(g(w))},[W(n.$slots,"default"),z(It,{name:`${g(s).namespace.value}-zoom-in-top`},{default:Y(()=>[g(at)?W(n.$slots,"error",{key:0,error:x.value},()=>[be("div",{class:E(g(I))},pe(x.value),3)]):ve("v-if",!0)]),_:3},8,["name"])],6)],10,So)}}});var tt=Pe(jo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const Eo=ht(_o,{FormItem:tt}),Lo=yt(tt);export{Lo as E,Eo as a};
